{"version":3,"file":"883d7235-6325a62a622f89b9056a.js","mappings":"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","sources":["webpack://museologi.st/./node_modules/@samvera/clover-iiif/dist/viewer/index.mjs"],"sourcesContent":["import oi from \"i18next-browser-languagedetector\";\nimport si from \"i18next\";\nimport { initReactI18next as li, useTranslation as pe } from \"react-i18next\";\nimport o, { useReducer as ci, useEffect as T, useState as P, useRef as Ue, useCallback as qe, createContext as di, useContext as ui, cloneElement as mi, Fragment as fi } from \"react\";\nimport { HAS_PART as Ne, PART_OF as lt, frameResource as mr, normalize as hi, serialize as pi, serializeConfigPresentation2 as gi, serializeConfigPresentation3 as vi, isSpecificResource as yi } from \"@iiif/parser\";\nimport { v4 as Me } from \"uuid\";\nimport { decodeContentState as bi, getVisibleCanvasesFromCanvasId as wi, encodeContentState as xi, getManifestSequence as Ei } from \"@iiif/helpers\";\nimport * as Si from \"@radix-ui/react-collapsible\";\nimport { ErrorBoundary as St } from \"react-error-boundary\";\nimport { createStitches as Ci, createTheme as Ai } from \"@stitches/react\";\nimport * as je from \"@radix-ui/react-tabs\";\nimport Ii from \"@nulib/use-markdown\";\nimport { WebVTT as Ze } from \"vtt.js\";\nimport * as Ge from \"@radix-ui/react-radio-group\";\nimport Ri from \"sanitize-html\";\nimport ne from \"hls.js\";\nimport * as Le from \"@radix-ui/react-form\";\nimport * as Oe from \"@radix-ui/react-popover\";\nimport * as Pe from \"@radix-ui/react-select\";\nimport { SelectValue as Ti, SelectIcon as $i, SelectPortal as ki, SelectScrollUpButton as Mi, SelectViewport as Oi, SelectGroup as Pi, SelectScrollDownButton as Li, SelectItemText as Fi, SelectItemIndicator as _i } from \"@radix-ui/react-select\";\nimport ke from \"openseadragon\";\nimport * as fr from \"@radix-ui/react-switch\";\nconst zi = \"Close\", Di = \"Next\", Bi = \"Previous\", Hi = \"Search\", Wi = \"Search...\", Ni = \"Share\", Vi = \"View All\", Ui = \"Failed\", qi = \"Copied\", ji = \"Loading...\", Gi = \"Search\", Qi = \"No Results\", Ji = \"More Results\", Yi = \"Select\", Xi = \"Viewer\", Zi = \"About\", Ki = \"Annotations\", ea = \"Search\", ta = \"More Information\", ra = \"View Collection\", na = \"Copy Collection URL\", ia = \"View Manifest\", aa = \"Copy Manifest URL\", oa = {\n  commonClose: zi,\n  commonNext: Di,\n  commonPrevious: Bi,\n  commonSearch: Hi,\n  commonSearchPlaceholder: Wi,\n  commonShare: Ni,\n  commonViewAll: Vi,\n  copyFailure: Ui,\n  copySuccess: qi,\n  contentSearchLoading: ji,\n  contentSearchPlaceholder: Gi,\n  contentSearchResultsNone: Qi,\n  contentSearchResultsMore: Ji,\n  informationPanelTabs: Yi,\n  informationPanelTabsClose: Xi,\n  informationPanelTabsAbout: Zi,\n  informationPanelTabsAnnotations: Ki,\n  informationPanelTabsSearch: ea,\n  informationPanelToggle: ta,\n  shareCollectionJson: ra,\n  shareCollectionCopy: na,\n  shareManifestJson: ia,\n  shareManifestCopy: aa\n}, sa = {}, la = {\n  en: oa,\n  pt: sa\n}, ct = \"clover\", ca = Object.fromEntries(\n  Object.entries(la).map(([e, t]) => [\n    e,\n    { [`${ct}`]: t }\n  ])\n);\nsi.use(oi).use(li).init({\n  defaultNS: ct,\n  fallbackLng: \"en\",\n  ns: [ct],\n  resources: { ...ca }\n});\nvar N = function(t) {\n  return function() {\n    const r = { type: t, getType: () => t, toString: () => t };\n    return (n, i) => ({\n      ...r,\n      ...n !== void 0 && { payload: n },\n      ...i !== void 0 && { meta: i }\n    });\n  };\n}, hr = \"@iiif/IMPORT_ENTITIES\", pr = \"@iiif/MODIFY_ENTITY_FIELD\", gr = \"@iiif/REORDER_ENTITY_FIELD\", vr = \"@iiif/ADD_REFERENCE\", dt = \"@iiif/UPDATE_REFERENCE\", yr = \"@iiif/REMOVE_REFERENCE\", br = \"@iiif/ADD_METADATA\", wr = \"@iiif/REMOVE_METADATA\", ut = \"@iiif/UPDATE_METADATA\", xr = \"@iiif/REORDER_METADATA\", Er = N(hr)(), da = N(pr)(), ua = N(gr)(), ma = N(vr)(), fa = N(yr)(), ha = N(dt)(), pa = N(br)(), ga = N(ut)(), va = N(wr)(), ya = N(xr)(), ba = {\n  importEntities: Er,\n  modifyEntityField: da,\n  reorderEntityField: ua,\n  addReference: ma,\n  removeReference: fa,\n  updateReference: ha,\n  addMetadata: pa,\n  removeMetadata: va,\n  updateMetadata: ga,\n  reorderMetadata: ya\n}, Sr = \"@iiif/ADD_MAPPING\", Cr = \"@iiif/ADD_MAPPINGS\", wa = N(Sr)(), xa = N(Cr)(), mt = \"RESOURCE_ERROR\", Ar = \"RESOURCE_LOADING\", ft = \"RESOURCE_READY\", Ir = \"@iiif/REQUEST_RESOURCE\", Rr = \"@iiif/REQUEST_ERROR\", Tr = \"@iiif/REQUEST_MISMATCH\", $r = \"@iiif/REQUEST_COMPLETE\", Ea = \"@iiif/REQUEST_OFFLINE_RESOURCE\", Sa = N(Ir)(), ht = N(Rr)(), Ca = N(Tr)(), Aa = N($r)(), Ct = \"@iiif/BATCH\", Ia = \"@iiif/BATCH_IMPORT\", pt = N(Ct)(), Ra = (e, t) => {\n  const { entities: r, resource: n, mapping: i } = hi(t);\n  if (n.id === void 0)\n    return [ht({ id: e, message: \"ID is not defined in resource.\" })];\n  const a = [Er({ entities: r }), xa({ mapping: i })];\n  return n.id !== e && (a.push(wa({ id: e, type: n.type })), a.push(Ca({ requestId: e, actualId: n.id }))), a.push(Aa({ id: e })), a;\n}, Ft = Number.isNaN || function(t) {\n  return typeof t == \"number\" && t !== t;\n};\nfunction Ta(e, t) {\n  return !!(e === t || Ft(e) && Ft(t));\n}\nfunction _t(e, t) {\n  if (!Array.isArray(e) || !Array.isArray(t))\n    return e === t;\n  if (e.length !== t.length)\n    return !1;\n  for (let r = 0; r < e.length; r++)\n    if (!Ta(e[r], t[r]))\n      return !1;\n  return !0;\n}\nfunction Ke(e, t, r) {\n  const n = e.iiif.requests[t], i = e.iiif.mapping[t];\n  if (!i || !e.iiif.entities[i][n.resourceUri])\n    return;\n  const a = e.iiif.entities[i][n.resourceUri];\n  if (a && a[Ne]) {\n    const s = a[Ne].find((l) => l[lt] === a.id);\n    return mr(a, s);\n  }\n  return a;\n}\nfunction $a(e) {\n  return e && typeof e.then == \"function\";\n}\nfunction zt(e, t, { waitTimeout: r = 30 } = {}) {\n  return (n, i) => {\n    const a = e.getStore(), s = a.getState(), l = s.iiif.requests[n];\n    if (l) {\n      if (l.loadingState === ft) {\n        const u = Ke(s, n);\n        if (u)\n          return u;\n      }\n      switch (l.loadingState) {\n        case mt:\n          break;\n        case Ar:\n          return (async () => {\n            let u, c = !1;\n            try {\n              const m = await Promise.race([\n                new Promise((p, f) => {\n                  c || (u = a.subscribe(() => {\n                    const g = a.getState();\n                    if (g.iiif.requests[n].loadingState === mt) {\n                      f();\n                      return;\n                    }\n                    if (g.iiif.requests[n].loadingState === ft) {\n                      const h = Ke(g, n);\n                      h ? p(h) : f();\n                    }\n                  }));\n                }),\n                new Promise(\n                  (p, f) => setTimeout(\n                    () => {\n                      c = !0, f();\n                    },\n                    r * 60 * 1e3\n                  )\n                )\n              ]);\n              if (u && u(), m)\n                return m;\n            } catch {\n              u && u();\n            }\n          })();\n      }\n    }\n    e.dispatch(Sa({ id: n }));\n    const d = (u) => {\n      if (!u)\n        return;\n      !u.id && !u[\"@id\"] && (u[\"@type\"] && (u[\"@id\"] = n), u.id = n);\n      const c = Ra(n, u);\n      return e.dispatch(pt({ actions: c })), Ke(a.getState(), n);\n    };\n    try {\n      const u = t(n, i);\n      return $a(u) ? (async () => {\n        try {\n          return d(await u);\n        } catch (c) {\n          throw e.dispatch(ht({ id: n, message: c.toString() })), c;\n        }\n      })() : d(u);\n    } catch (u) {\n      throw e.dispatch(ht({ id: n, message: u.toString() })), u;\n    }\n  };\n}\nfunction kr() {\n  return {\n    Collection: {},\n    Manifest: {},\n    Canvas: {},\n    AnnotationPage: {},\n    AnnotationCollection: {},\n    Annotation: {},\n    ContentResource: {},\n    Range: {},\n    Service: {},\n    Selector: {},\n    Agent: {}\n  };\n}\nconst ka = { BASE_URL: \"/\", DEV: !1, MODE: \"production\", PROD: !0, SSR: !1 };\nvar Dt = (e) => {\n  let t;\n  const r = /* @__PURE__ */ new Set(), n = (c, m) => {\n    const p = typeof c == \"function\" ? c(t) : c;\n    if (!Object.is(p, t)) {\n      const f = t;\n      t = m ?? (typeof p != \"object\" || p === null) ? p : Object.assign({}, t, p), r.forEach((g) => g(t, f));\n    }\n  }, i = () => t, d = { setState: n, getState: i, getInitialState: () => u, subscribe: (c) => (r.add(c), () => r.delete(c)), destroy: () => {\n    (ka ? \"production\" : void 0) !== \"production\" && console.warn(\n      \"[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected.\"\n    ), r.clear();\n  } }, u = t = e(n, i, d);\n  return d;\n}, Ma = (e) => e ? Dt(e) : Dt, Mr = \"@iiif/SET_META_VALUE\", Or = \"@iiif/SET_META_VALUE_DYNAMIC\", Pr = \"@iiif/UNSET_META_VALUE\", Oa = N(Mr)(), Pa = N(Or)(), La = N(Pr)(), Bt = {\n  setMetaValue: Oa,\n  setMetaValueDynamic: Pa,\n  unsetMetaValue: La\n};\nconst et = { BASE_URL: \"/\", DEV: !1, MODE: \"production\", PROD: !0, SSR: !1 };\nvar Fa = (e, t) => (r, n, i) => (i.dispatch = (a) => (r((s) => e(s, a), !1, a), a), i.dispatchFromDevtools = !0, { dispatch: (...a) => i.dispatch(...a), ...t }), _a = Fa, gt = /* @__PURE__ */ new Map(), Fe = (e) => {\n  const t = gt.get(e);\n  return t ? Object.fromEntries(\n    Object.entries(t.stores).map(([r, n]) => [r, n.getState()])\n  ) : {};\n}, za = (e, t, r) => {\n  if (e === void 0)\n    return {\n      type: \"untracked\",\n      connection: t.connect(r)\n    };\n  const n = gt.get(r.name);\n  if (n)\n    return { type: \"tracked\", store: e, ...n };\n  const i = {\n    connection: t.connect(r),\n    stores: {}\n  };\n  return gt.set(r.name, i), { type: \"tracked\", store: e, ...i };\n}, Da = (e, t = {}) => (r, n, i) => {\n  const { enabled: a, anonymousActionType: s, store: l, ...d } = t;\n  let u;\n  try {\n    u = (a ?? (et ? \"production\" : void 0) !== \"production\") && window.__REDUX_DEVTOOLS_EXTENSION__;\n  } catch {\n  }\n  if (!u)\n    return (et ? \"production\" : void 0) !== \"production\" && a && console.warn(\n      \"[zustand devtools middleware] Please install/enable Redux devtools extension\"\n    ), e(r, n, i);\n  const { connection: c, ...m } = za(l, u, d);\n  let p = !0;\n  i.setState = (h, w, v) => {\n    const b = r(h, w);\n    if (!p)\n      return b;\n    const E = v === void 0 ? { type: s || \"anonymous\" } : typeof v == \"string\" ? { type: v } : v;\n    return l === void 0 ? (c == null || c.send(E, n()), b) : (c == null || c.send(\n      {\n        ...E,\n        type: `${l}/${E.type}`\n      },\n      {\n        ...Fe(d.name),\n        [l]: i.getState()\n      }\n    ), b);\n  };\n  const f = (...h) => {\n    const w = p;\n    p = !1, r(...h), p = w;\n  }, g = e(i.setState, n, i);\n  if (m.type === \"untracked\" ? c == null || c.init(g) : (m.stores[m.store] = i, c == null || c.init(\n    Object.fromEntries(\n      Object.entries(m.stores).map(([h, w]) => [\n        h,\n        h === m.store ? g : w.getState()\n      ])\n    )\n  )), i.dispatchFromDevtools && typeof i.dispatch == \"function\") {\n    let h = !1;\n    const w = i.dispatch;\n    i.dispatch = (...v) => {\n      (et ? \"production\" : void 0) !== \"production\" && v[0].type === \"__setState\" && !h && (console.warn(\n        '[zustand devtools middleware] \"__setState\" action type is reserved to set state from the devtools. Avoid using it.'\n      ), h = !0), w(...v);\n    };\n  }\n  return c.subscribe((h) => {\n    var w;\n    switch (h.type) {\n      case \"ACTION\":\n        if (typeof h.payload != \"string\") {\n          console.error(\n            \"[zustand devtools middleware] Unsupported action format\"\n          );\n          return;\n        }\n        return tt(\n          h.payload,\n          (v) => {\n            if (v.type === \"__setState\") {\n              if (l === void 0) {\n                f(v.state);\n                return;\n              }\n              Object.keys(v.state).length !== 1 && console.error(\n                `\n                    [zustand devtools middleware] Unsupported __setState action format. \n                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),\n                    and value of this only key should be a state object. Example: { \"type\": \"__setState\", \"state\": { \"abc123Store\": { \"foo\": \"bar\" } } }\n                    `\n              );\n              const b = v.state[l];\n              if (b == null)\n                return;\n              JSON.stringify(i.getState()) !== JSON.stringify(b) && f(b);\n              return;\n            }\n            i.dispatchFromDevtools && typeof i.dispatch == \"function\" && i.dispatch(v);\n          }\n        );\n      case \"DISPATCH\":\n        switch (h.payload.type) {\n          case \"RESET\":\n            return f(g), l === void 0 ? c == null ? void 0 : c.init(i.getState()) : c == null ? void 0 : c.init(Fe(d.name));\n          case \"COMMIT\":\n            if (l === void 0) {\n              c == null || c.init(i.getState());\n              return;\n            }\n            return c == null ? void 0 : c.init(Fe(d.name));\n          case \"ROLLBACK\":\n            return tt(h.state, (v) => {\n              if (l === void 0) {\n                f(v), c == null || c.init(i.getState());\n                return;\n              }\n              f(v[l]), c == null || c.init(Fe(d.name));\n            });\n          case \"JUMP_TO_STATE\":\n          case \"JUMP_TO_ACTION\":\n            return tt(h.state, (v) => {\n              if (l === void 0) {\n                f(v);\n                return;\n              }\n              JSON.stringify(i.getState()) !== JSON.stringify(v[l]) && f(v[l]);\n            });\n          case \"IMPORT_STATE\": {\n            const { nextLiftedState: v } = h.payload, b = (w = v.computedStates.slice(-1)[0]) == null ? void 0 : w.state;\n            if (!b)\n              return;\n            f(l === void 0 ? b : b[l]), c == null || c.send(\n              null,\n              // FIXME no-any\n              v\n            );\n            return;\n          }\n          case \"PAUSE_RECORDING\":\n            return p = !p;\n        }\n        return;\n    }\n  }), g;\n}, Ba = Da, tt = (e, t) => {\n  let r;\n  try {\n    r = JSON.parse(e);\n  } catch (n) {\n    console.error(\n      \"[zustand devtools middleware] Could not parse the received json\",\n      n\n    );\n  }\n  r !== void 0 && t(r);\n}, Ha = (e) => (t, r, n) => {\n  const i = n.subscribe;\n  return n.subscribe = (s, l, d) => {\n    let u = s;\n    if (l) {\n      const c = (d == null ? void 0 : d.equalityFn) || Object.is;\n      let m = s(n.getState());\n      u = (p) => {\n        const f = s(p);\n        if (!c(m, f)) {\n          const g = m;\n          l(m = f, g);\n        }\n      }, d != null && d.fireImmediately && l(m, m);\n    }\n    return i(u);\n  }, e(t, r, n);\n}, Wa = Ha, Na = (e = {}, t) => {\n  switch (t.type) {\n    case Sr:\n      return {\n        ...e,\n        [t.payload.id]: t.payload.type\n      };\n    case Cr:\n      return {\n        ...e,\n        ...t.payload.mapping\n      };\n    default:\n      return e;\n  }\n};\nfunction rt(e, t, r, n) {\n  return !(!e[r] || !e[r][t] || !e[r][t][n] || !Array.isArray(e[r][t][n]));\n}\nfunction Va(e, t) {\n  const r = {}, n = [];\n  for (const [i, a] of Object.entries(e || {})) {\n    n.push(i);\n    const s = (t || {})[i];\n    if (!s || s.length === 0) {\n      r[i] = a;\n      continue;\n    }\n    r[i] = s;\n  }\n  for (const [i, a] of Object.entries(t || {}))\n    n.indexOf(i) === -1 && (r[i] = a);\n  return r;\n}\nfunction R(e) {\n  return e.payload;\n}\nfunction nt(e, t) {\n  return typeof e > \"u\" ? t : e;\n}\nvar Ua = (e = kr(), t) => {\n  var n;\n  const r = (i, a) => ({\n    ...e,\n    [R(t).type]: {\n      ...e[R(t).type],\n      [R(t).id]: {\n        ...i,\n        ...a\n      }\n    }\n  });\n  switch (t.type) {\n    case pr: {\n      if (!e[R(t).type] || !e[R(t).type][R(t).id])\n        return e;\n      const i = e[R(t).type][R(t).id];\n      return typeof i == \"string\" ? e : r(i, { [R(t).key]: R(t).value });\n    }\n    case gr: {\n      if (!rt(e, R(t).id, R(t).type, R(t).key))\n        return e;\n      const i = e[R(t).type][R(t).id];\n      if (typeof i == \"string\")\n        return e;\n      const a = Array.from(i[R(t).key]), [s] = a.splice(R(t).startIndex, 1);\n      return a.splice(R(t).endIndex, 0, s), r(i, { [R(t).key]: a });\n    }\n    case hr: {\n      const i = Object.keys(R(t).entities), a = { ...e };\n      for (const s of i) {\n        const l = R(t).entities[s], d = { ...e[s] || {} };\n        let u = !1;\n        const c = Object.keys(l || {}) || [];\n        if (l && c) {\n          for (const m of c)\n            u = !0, d[m] = e[s][m] ? Va(e[s][m], l[m]) : l[m];\n          u && (a[s] = d);\n        }\n      }\n      return a;\n    }\n    case vr: {\n      if (!rt(e, R(t).id, R(t).type, R(t).key))\n        return e;\n      const i = e[R(t).type][R(t).id], a = Array.from(i[R(t).key]);\n      return a.splice(nt(R(t).index, a.length + 1), 0, R(t).reference), r(i, { [R(t).key]: a });\n    }\n    case dt:\n    case yr: {\n      if (!rt(e, R(t).id, R(t).type, R(t).key))\n        return e;\n      const i = e[R(t).type][R(t).id], a = Array.from(i[R(t).key]), s = nt(\n        R(t).index,\n        a.findIndex((l) => l && l.id === R(t).reference.id)\n      );\n      return s === -1 || ((n = a[s]) == null ? void 0 : n.id) !== R(t).reference.id ? e : (t.type === dt ? a.splice(s, 1, R(t).reference) : a.splice(s, 1), r(i, { [R(t).key]: a }));\n    }\n    case br: {\n      const i = e[R(t).type][R(t).id];\n      if (!i)\n        return e;\n      const a = Array.from(i.metadata || []), s = R(t);\n      return a.splice(nt(t.payload.beforeIndex, a.length + 1), 0, {\n        label: s.label,\n        value: s.label\n      }), r(i, { metadata: a });\n    }\n    case xr: {\n      const i = e[R(t).type][R(t).id];\n      if (typeof i == \"string\" || !i)\n        return e;\n      const a = Array.from(i.metadata || []), [s] = a.splice(R(t).startIndex, 1);\n      return a.splice(R(t).endIndex, 0, s), r(i, { metadata: a });\n    }\n    case ut:\n    case wr: {\n      const i = e[R(t).type][R(t).id], a = Array.from(i.metadata || []), s = R(t).atIndex;\n      return typeof s > \"u\" || s === -1 || !a[s] ? e : (t.type === ut ? a.splice(s, 1, { label: R(t).label, value: R(t).value }) : a.splice(s, 1), r(i, { metadata: a }));\n    }\n    default:\n      return e;\n  }\n}, qa = (e = {}, t) => {\n  switch (t.type) {\n    case Ir:\n    case Ea:\n      return {\n        ...e,\n        [t.payload.id]: {\n          requestUri: t.payload.id,\n          loadingState: Ar,\n          uriMismatch: !1,\n          resourceUri: t.payload.id\n        }\n      };\n    case Tr:\n      return {\n        ...e,\n        [t.payload.requestId]: {\n          ...e[t.payload.requestId] || {},\n          uriMismatch: !0,\n          resourceUri: t.payload.actualId\n        },\n        [t.payload.actualId]: {\n          requestUri: t.payload.requestId,\n          loadingState: e[t.payload.requestId].loadingState,\n          uriMismatch: !0,\n          resourceUri: t.payload.actualId\n        }\n      };\n    case Rr:\n      return {\n        ...e,\n        [t.payload.id]: {\n          ...e[t.payload.id] || {},\n          loadingState: mt,\n          error: t.payload.message\n        }\n      };\n    case $r:\n      return {\n        ...e,\n        [t.payload.id]: {\n          ...e[t.payload.id] || {},\n          loadingState: ft,\n          error: void 0\n        }\n      };\n  }\n  return e;\n}, ja = (e = {}, t) => {\n  const { id: r, updateValue: n, value: i, meta: a, key: s } = t && t.payload || {};\n  switch (t.type) {\n    case Mr:\n      return {\n        ...e,\n        [r]: {\n          ...e[r] || {},\n          [a]: {\n            ...e[r] ? e[r][a] || {} : {},\n            [s]: i\n          }\n        }\n      };\n    case Or:\n      return {\n        ...e,\n        [r]: {\n          ...e[r] || {},\n          [a]: {\n            ...e[r] ? e[r][a] || {} : {},\n            [s]: e[r] && e[r][a] ? n(e[r][a][s]) : n(void 0)\n          }\n        }\n      };\n    case Pr:\n      return e[r] && e[r][a] && e[r][a][s] ? {\n        ...e,\n        [r]: {\n          ...e[r] || {},\n          [a]: {\n            ...e[r] ? e[r][a] || {} : {},\n            [s]: void 0\n          }\n        }\n      } : e;\n    default:\n      return e;\n  }\n};\nfunction Lr(e = {}) {\n  const t = Object.keys(e);\n  return function(n = {}, i) {\n    let a = !1;\n    const s = {};\n    for (let l = 0; l < t.length; l++) {\n      const d = t[l];\n      s[d] = e[d](n[d], i), a = a || s[d] !== n[d];\n    }\n    return a ? s : n;\n  };\n}\nfunction Ga(e) {\n  return (t, r) => r && r.type === Ct ? r.payload.actions.reduce(e, t) : r && r.type === Ia ? {\n    ...t,\n    iiif: {\n      ...t.iiif,\n      ...r.payload.state\n    }\n  } : e(t, r);\n}\nvar Qa = Lr({\n  mapping: Na,\n  entities: Ua,\n  requests: qa,\n  meta: ja\n});\nfunction Ja() {\n  return {\n    iiif: {\n      entities: kr(),\n      meta: {},\n      mapping: {},\n      requests: {}\n    }\n  };\n}\nfunction Ya(e = {}) {\n  const {\n    enableDevtools: t = !1,\n    iiifStoreName: r = \"iiif\",\n    defaultState: n = Ja(),\n    customReducers: i = {}\n  } = e, a = Ga(Lr({ [r]: Qa, ...i })), l = !!(typeof window < \"u\" && window.__REDUX_DEVTOOLS_EXTENSION__) ? Ba : (d, u) => d;\n  return Ma(\n    //\n    Wa(\n      //\n      l(\n        //\n        _a(a, n),\n        { enabled: t }\n      )\n    )\n  );\n}\nvar Xa = Object.defineProperty, Za = (e, t, r) => t in e ? Xa(e, t, { enumerable: !0, configurable: !0, writable: !0, value: r }) : e[t] = r, me = (e, t, r) => (Za(e, typeof t != \"symbol\" ? t + \"\" : t, r), r);\nfunction Ka(e) {\n  return { all: e = e || /* @__PURE__ */ new Map(), on: function(t, r) {\n    var n = e.get(t);\n    n ? n.push(r) : e.set(t, [r]);\n  }, off: function(t, r) {\n    var n = e.get(t);\n    n && (r ? n.splice(n.indexOf(r) >>> 0, 1) : e.set(t, []));\n  }, emit: function(t, r) {\n    var n = e.get(t);\n    n && n.slice().map(function(i) {\n      i(r);\n    }), (n = e.get(\"*\")) && n.slice().map(function(i) {\n      i(t, r);\n    });\n  } };\n}\nfunction Q(e, t, r, n = !0) {\n  t[Te] = t[Te] || [], t[Te].push(e);\n  const i = /* @__PURE__ */ new Map();\n  Object.defineProperty(t, e, {\n    enumerable: n,\n    get() {\n      if (typeof t[be][e] > \"u\")\n        return;\n      const a = t[be][e];\n      if (!a)\n        return a;\n      const s = r.get(t[be][e], {\n        parent: this.id ? { id: this.id, type: this.type } : void 0\n      });\n      return i.has(s) || (i.clear(), i.set(s, we(s, r))), i.get(s);\n    },\n    set(a) {\n      t[be][e] !== a && (this[ye] ? r.modifyEntityField({ id: this.id, type: this.type }, e, Fr(a)) : this[be][e] = a);\n    }\n  });\n}\nvar be = Symbol.for(\"_refs_\"), ye = Symbol.for(\"_reactive_\"), Te = Symbol.for(\"_defined_\"), Ht = Symbol.for(\"_parent_\");\nfunction eo(e, t = !1, r) {\n  const n = {\n    id: \"\",\n    type: \"unknown\",\n    [Te]: [],\n    [be]: {},\n    [Ht]: null,\n    [ye]: null,\n    is(i) {\n      return typeof i == \"string\" ? this.id === i : i.id ? i.id === this.id : !1;\n    },\n    reactive() {\n      if (!this[ye])\n        return this[ye] = this.subscribe(() => this.refresh(), !0), () => {\n          this.unreactive();\n        };\n    },\n    refresh() {\n      if (this.id) {\n        const i = this.unwrap();\n        for (const a of Object.keys(i || {}))\n          this[Te].includes(a) ? this[be][a] = i[a] : this[a] = i[a];\n      }\n    },\n    unreactive() {\n      this[ye] && (this[ye](), this[ye] = null);\n    },\n    unwrap() {\n      if (!this.id)\n        throw new Error(\"Invalid object\");\n      const i = this[Ht];\n      return e.get(this.id, { parent: i ? { id: i, type: \"unknown\" } : void 0 });\n    },\n    toPresentation3() {\n      return e.toPresentation3(this.unwrap());\n    },\n    toPresentation2() {\n      return e.toPresentation2(this.unwrap());\n    },\n    valueOf() {\n      return this.unwrap();\n    },\n    toJSON() {\n      const i = this;\n      return {\n        ...i,\n        items: i.items,\n        annotations: i.annotations,\n        structures: i.structures,\n        seeAlso: i.seeAlso,\n        service: i.service,\n        services: i.services,\n        rendering: i.rendering,\n        partOf: i.partOf,\n        start: i.start,\n        supplementary: i.supplementary,\n        homepage: i.homepage,\n        thumbnail: i.thumbnail,\n        placeholderCanvas: i.placeholderCanvas,\n        accompanyingCanvas: i.accompanyingCanvas,\n        provider: i.provider\n      };\n    },\n    subscribe(i, a = !0) {\n      return e.subscribe(\n        () => this.id ? e.get(this.id) : null,\n        i,\n        a\n      );\n    }\n  };\n  return Q(\"items\", n, e), Q(\"annotations\", n, e), Q(\"structures\", n, e), Q(\"seeAlso\", n, e), Q(\"rendering\", n, e), Q(\"partOf\", n, e), Q(\"start\", n, e, !1), Q(\"supplementary\", n, e), Q(\"homepage\", n, e), Q(\"thumbnail\", n, e), Q(\"placeholderCanvas\", n, e, !1), Q(\"accompanyingCanvas\", n, e, !1), Q(\"provider\", n, e), Q(\"body\", n, e), Q(\"logo\", n, e), n;\n}\nfunction to(e) {\n  return !!e[Te];\n}\nfunction Fr(e) {\n  return Array.isArray(e) ? e.map((t) => Fr(t)) : !e || !e.type ? e : { id: e.id, type: e.type };\n}\nfunction we(e, t, r = !1, n) {\n  if (Array.isArray(e))\n    return e.map((l) => we(l, t, r));\n  if (!e || !e.type || !e.id)\n    return e;\n  const i = eo(t, r), a = Object.create(i), s = Object.assign(a, e);\n  return r && s.reactive(), s;\n}\nfunction Wt(e) {\n  switch (e) {\n    case \"Image\":\n    case \"Video\":\n    case \"Sound\":\n    case \"Dataset\":\n    case \"Text\":\n    case \"Composite\":\n    case \"List\":\n    case \"Independents\":\n    case \"Audience\":\n      return \"ContentResource\";\n    case \"ImageService1\":\n    case \"ImageService2\":\n    case \"ImageService3\":\n      return \"Service\";\n  }\n  return e;\n}\nvar _r = class {\n  constructor(e, t) {\n    me(this, \"options\"), me(this, \"store\"), me(this, \"emitter\"), me(this, \"isBatching\", !1), me(this, \"batchQueue\", []), me(this, \"remoteFetcher\"), me(this, \"staticFetcher\"), me(this, \"defaultFetcher\", (r) => fetch(r).then((n) => n.json())), this.options = Object.assign(\n      {\n        reducers: {},\n        customFetcher: this.defaultFetcher,\n        enableDevtools: !0\n      },\n      e || {}\n    ), this.store = t || Ya({\n      customReducers: this.options.reducers,\n      defaultState: this.options.defaultState,\n      enableDevtools: this.options.enableDevtools\n    }), this.emitter = Ka(), this.remoteFetcher = zt(this, this.options.customFetcher), this.staticFetcher = zt(this, (r, n) => n);\n  }\n  batch(e) {\n    this.isBatching = !0;\n    try {\n      e(this), this.isBatching = !1, this.dispatch(pt({ actions: this.batchQueue }));\n    } catch (t) {\n      throw this.batchQueue = [], this.isBatching = !1, t;\n    }\n    this.batchQueue = [];\n  }\n  async asyncBatch(e) {\n    this.isBatching = !0;\n    try {\n      await e(this), this.isBatching = !1, this.dispatch(pt({ actions: this.batchQueue }));\n    } catch (t) {\n      throw this.batchQueue = [], this.isBatching = !1, t;\n    }\n    this.batchQueue = [];\n  }\n  modifyEntityField(e, t, r) {\n    this.dispatch(\n      ba.modifyEntityField({\n        id: e.id,\n        type: e.type,\n        key: t,\n        value: r\n      })\n    );\n  }\n  dispatch(e) {\n    if (this.isBatching)\n      this.batchQueue.push(e);\n    else {\n      if (e.type === Ct) {\n        for (const n of e.payload.actions)\n          this.emitter.emit(n.type, { action: n, state: this.store.getState() });\n        this.store.dispatch(e);\n        const r = this.getState();\n        for (const n of e.payload.actions)\n          this.emitter.emit(`after:${n.type}`, { action: n, state: r });\n        return;\n      }\n      this.emitter.emit(e.type, { action: e, state: this.store.getState() }), this.store.dispatch(e);\n      const t = this.store.getState();\n      this.emitter.emit(`after:${e.type}`, { action: e, state: t });\n      return;\n    }\n  }\n  on(e, t) {\n    return this.emitter.on(e, t), () => {\n      this.emitter.off(e, t);\n    };\n  }\n  serialize(e, t) {\n    return pi(this.getState().iiif, e, t);\n  }\n  toPresentation2(e) {\n    return this.serialize(e, gi);\n  }\n  toPresentation3(e) {\n    return this.serialize(e, vi);\n  }\n  hydrate(e, t, r = {}) {\n    return this.get(e, t, { ...r, skipSelfReturn: !1 });\n  }\n  get(e, t, r = {}) {\n    typeof t != \"string\" && (r = t || {}, t = void 0);\n    const { skipSelfReturn: n = !0 } = r || {};\n    let i = r.parent ? typeof r.parent == \"string\" ? r.parent : r.parent.id : void 0;\n    if (Array.isArray(e))\n      return e.map((c) => this.get(c, r));\n    const a = this.getState();\n    if (yi(e) && !r.preserveSpecificResources && (e = e.source), typeof e == \"string\") {\n      const c = Wt(t || a.iiif.mapping[e]);\n      if (!c)\n        return n ? null : { id: e, type: \"unknown\" };\n      e = { id: e, type: c };\n    }\n    if (e && e.partOf && !i && !r.skipPartOfCheck) {\n      const c = Array.isArray(e.partOf) ? e.partOf[0] : e.partOf;\n      c && (typeof c == \"string\" && (i = c), typeof c.id == \"string\" && (i = c.id));\n    }\n    const s = Wt(t || (e == null ? void 0 : e.type)), l = e == null ? void 0 : e.id, d = a.iiif.entities[s];\n    if (!d) {\n      const c = a.iiif.requests[l];\n      return c && c.resourceUri !== l ? this.get(c.resourceUri, r) : n ? null : e;\n    }\n    const u = d[e.id];\n    if (u && u[Ne]) {\n      const c = u[Ne].find((m) => i ? m[lt] === i : m[lt] === u.id);\n      return mr(u, c);\n    }\n    return d[e.id] || (n ? null : e);\n  }\n  select(e) {\n    return e(this.getState());\n  }\n  getStore() {\n    return this.store;\n  }\n  getState() {\n    return this.store.getState();\n  }\n  deep(e, t) {\n    if (typeof e > \"u\")\n      return this.get(t, { skipSelfReturn: !1 });\n    if (typeof e == \"function\")\n      try {\n        const n = e(this.get(t, { skipSelfReturn: !1 })), i = (a) => this.deep(a, n);\n        return i.size = Array.isArray(n) ? n.length : 1, i;\n      } catch {\n        const i = (a) => this.deep(a, void 0);\n        return i.size = 0, i;\n      }\n    const r = (n) => this.deep(n, e);\n    return r.size = Array.isArray(e) ? e.length : 1, r;\n  }\n  loadManifest(e, t) {\n    const r = typeof e == \"string\" ? e : e.id;\n    return this.load(r, t);\n  }\n  loadCollection(e, t) {\n    const r = typeof e == \"string\" ? e : e.id;\n    return this.load(r, t);\n  }\n  load(e, t) {\n    const r = typeof e == \"string\" ? e : e.id;\n    return t ? Promise.resolve(this.staticFetcher(r, t)) : Promise.resolve(this.remoteFetcher(r));\n  }\n  loadSync(e, t) {\n    const r = typeof e == \"string\" ? e : e.id;\n    return this.staticFetcher(r, t);\n  }\n  loadManifestSync(e, t) {\n    const r = typeof e == \"string\" ? e : e.id;\n    return this.loadSync(r, t);\n  }\n  loadCollectionSync(e, t) {\n    const r = typeof e == \"string\" ? e : e.id;\n    return this.loadSync(r, t);\n  }\n  areInputsEqual(e, t) {\n    return _t(e, t);\n  }\n  subscribe(e, t, r) {\n    return typeof r > \"u\" && (typeof t > \"u\" || t === !1 || t === !0) && (r = t, t = e, e = (n) => n), this.store.subscribe(e, (n) => t(n, this), {\n      equalityFn: _t,\n      fireImmediately: !r\n    });\n  }\n  async ensureLoaded(e) {\n    const t = typeof e == \"string\" ? e : e.id;\n    this.requestStatus(t) || await this.load(t);\n  }\n  requestStatus(e) {\n    return this.select((t) => t.iiif.requests[e]);\n  }\n  getResourceMeta(e, t) {\n    const r = this.getState().iiif.meta[e];\n    if (r)\n      return t ? r[t] : r;\n  }\n  getObject(e, t, r = {}) {\n    const { reactive: n, ...i } = r;\n    return we(this.get(e, t, i), this, n);\n  }\n  async loadObject(e, t) {\n    return we(await this.load(e, t), this);\n  }\n  async loadManifestObject(e, t) {\n    return we(await this.loadManifest(e, t), this);\n  }\n  async loadCollectionObject(e, t) {\n    return we(await this.loadCollection(e, t), this);\n  }\n  wrapObject(e) {\n    return we(this.get(e, { skipSelfReturn: !1 }), this);\n  }\n  isWrapped(e) {\n    return to(e);\n  }\n  setMetaValue([e, t, r], n) {\n    this.dispatch(\n      typeof n == \"function\" ? Bt.setMetaValueDynamic({\n        id: e,\n        meta: t,\n        key: r,\n        updateValue: n\n      }) : Bt.setMetaValue({\n        id: e,\n        meta: t,\n        key: r,\n        value: n\n      })\n    );\n  }\n};\nconst ro = (e) => {\n  const t = e.toString().split(\":\"), r = Math.ceil(parseInt(t[0])), n = Math.ceil(parseInt(t[1])), i = no(Math.ceil(parseInt(t[2])), 2);\n  let s = `${r !== 0 && n < 10 ? (n + \"\").padStart(2, \"0\") : n}:${i}`;\n  return r !== 0 && (s = `${r}:${s}`), s;\n}, zr = (e) => {\n  const t = new Date(e * 1e3).toISOString().substr(11, 8);\n  return ro(t);\n}, Dr = (e, t) => {\n  if (typeof e != \"object\" || e === null)\n    return t;\n  for (const r in t)\n    typeof t[r] == \"object\" && t[r] !== null && !Array.isArray(t[r]) ? (e[r] || (e[r] = {}), e[r] = Dr(e[r], t[r])) : e[r] = t[r];\n  return e;\n}, Br = (e) => e.split(\"\").reduce(function(t, r) {\n  return t = (t << 5) - t + r.charCodeAt(0), t & t;\n}, 0), Hr = (e, t) => Object.hasOwn(e, t) ? e[t].toString() : void 0, no = (e, t) => String(e).padStart(t, \"0\"), io = {\n  behavior: \"smooth\",\n  block: \"center\"\n}, fe = {\n  annotationOverlays: {\n    backgroundColor: \"#6666ff\",\n    borderColor: \"#000099\",\n    borderType: \"solid\",\n    borderWidth: \"1px\",\n    opacity: \"0.5\",\n    renderOverlays: !0,\n    zoomLevel: 2\n  },\n  background: \"transparent\",\n  canvasBackgroundColor: \"#6662\",\n  canvasHeight: \"500px\",\n  contentSearch: {\n    searchResultsLimit: 20,\n    overlays: {\n      backgroundColor: \"#ff6666\",\n      borderColor: \"#990000\",\n      borderType: \"solid\",\n      borderWidth: \"1px\",\n      opacity: \"0.5\",\n      renderOverlays: !0,\n      zoomLevel: 4\n    }\n  },\n  crossOrigin: void 0,\n  ignoreCaptionLabels: [],\n  informationPanel: {\n    vtt: {\n      autoScroll: {\n        enabled: !0,\n        settings: io\n      }\n    },\n    open: !0,\n    renderAbout: !0,\n    renderSupplementing: !0,\n    renderToggle: !0,\n    renderAnnotation: !0,\n    renderContentSearch: !0\n  },\n  openSeadragon: {},\n  requestHeaders: { \"Content-Type\": \"application/json\" },\n  showDownload: !0,\n  showIIIFBadge: !0,\n  showTitle: !0,\n  withCredentials: !1\n};\nfunction Wr(e) {\n  let t = {\n    ...fe.informationPanel.vtt.autoScroll\n  };\n  return typeof e == \"object\" && (t = \"enabled\" in e ? e : { enabled: !0, settings: e }), e === !1 && (t.enabled = !1), ao(t.settings), t;\n}\nfunction ao({ behavior: e, block: t }) {\n  const r = [\"auto\", \"instant\", \"smooth\"], n = [\"center\", \"end\", \"nearest\", \"start\"];\n  if (!r.includes(e))\n    throw TypeError(`'${e}' not in ${r.join(\" | \")}`);\n  if (!n.includes(t))\n    throw TypeError(`'${t}' not in ${n.join(\" | \")}`);\n}\nvar cr, dr;\nconst oo = Wr(\n  (dr = (cr = fe == null ? void 0 : fe.informationPanel) == null ? void 0 : cr.vtt) == null ? void 0 : dr.autoScroll\n);\nvar ur;\nconst Qe = {\n  activeCanvas: \"\",\n  activeManifest: \"\",\n  activePlayer: null,\n  activeSelector: void 0,\n  OSDImageLoaded: !1,\n  collection: {},\n  configOptions: fe,\n  customDisplays: [],\n  plugins: [],\n  isAutoScrollEnabled: oo.enabled,\n  isAutoScrolling: !1,\n  isInformationOpen: (ur = fe == null ? void 0 : fe.informationPanel) == null ? void 0 : ur.open,\n  isLoaded: !1,\n  isUserScrolling: void 0,\n  sequence: [[], []],\n  vault: new _r(),\n  openSeadragonViewer: null,\n  viewerId: Me(),\n  visibleCanvases: [],\n  visibleAnnotations: []\n}, Nr = o.createContext(Qe), Vr = o.createContext(Qe);\nfunction so(e, t) {\n  switch (t.type) {\n    case \"updateActiveCanvas\":\n      return t.canvasId || (t.canvasId = \"\"), {\n        ...e,\n        activeCanvas: t.canvasId\n      };\n    case \"updateActiveManifest\":\n      return {\n        ...e,\n        activeManifest: t.manifestId\n      };\n    case \"updateActivePlayer\":\n      return {\n        ...e,\n        activePlayer: t.player\n      };\n    case \"updateOSDImageLoaded\":\n      return {\n        ...e,\n        OSDImageLoaded: t.OSDImageLoaded\n      };\n    case \"updateAutoScrollAnnotationEnabled\":\n      return {\n        ...e,\n        isAutoScrollEnabled: t.isAutoScrollEnabled\n      };\n    case \"updateAutoScrolling\":\n      return {\n        ...e,\n        isAutoScrolling: t.isAutoScrolling\n      };\n    case \"updateCollection\":\n      return {\n        ...e,\n        collection: t.collection\n      };\n    case \"updateConfigOptions\":\n      return {\n        ...e,\n        configOptions: Dr(e.configOptions, t.configOptions)\n      };\n    case \"updateContentStateAnnotation\":\n      return {\n        ...e,\n        contentStateAnnotation: t.contentStateAnnotation\n      };\n    case \"updateInformationOpen\":\n      return {\n        ...e,\n        isInformationOpen: t.isInformationOpen\n      };\n    case \"updateInformationPanelResource\":\n      return {\n        ...e,\n        informationPanelResource: t.informationPanelResource\n      };\n    case \"updateIsLoaded\":\n      return {\n        ...e,\n        isLoaded: t.isLoaded\n      };\n    case \"updateManifestSequence\":\n      return {\n        ...e,\n        sequence: t.sequence\n      };\n    case \"updateUserScrolling\":\n      return {\n        ...e,\n        isUserScrolling: t.isUserScrolling\n      };\n    case \"updateOpenSeadragonViewer\":\n      return {\n        ...e,\n        openSeadragonViewer: t.openSeadragonViewer\n      };\n    case \"updateViewerId\":\n      return {\n        ...e,\n        viewerId: t.viewerId\n      };\n    case \"updateActiveSelector\":\n      return {\n        ...e,\n        activeSelector: t.selector\n      };\n    case \"updateVisibleCanvases\":\n      return {\n        ...e,\n        visibleCanvases: t.visibleCanvases\n      };\n    default:\n      throw new Error(`Unhandled action type: ${t.type}`);\n  }\n}\nconst lo = ({\n  initialState: e = Qe,\n  children: t\n}) => {\n  const [r, n] = ci(so, e), { openSeadragonViewer: i } = r;\n  return T(() => {\n    if (i)\n      return i.addHandler(\"update-viewport\", () => {\n        const a = i.viewport, s = a.getBounds(), l = a.viewportToImageRectangle(s), u = `xywh=${[\n          Math.round(l.x),\n          Math.round(l.y),\n          Math.round(l.width),\n          Math.round(l.height)\n        ].join(\",\")}`;\n        n({\n          type: \"updateActiveSelector\",\n          // @ts-ignore\n          selector: {\n            type: \"FragmentSelector\",\n            value: u\n          }\n        });\n      }), () => {\n        i.removeAllHandlers(\"update-viewport\");\n      };\n  }, [i]), /* @__PURE__ */ o.createElement(Nr.Provider, { value: r }, /* @__PURE__ */ o.createElement(\n    Vr.Provider,\n    {\n      value: n\n    },\n    t\n  ));\n};\nfunction z() {\n  const e = o.useContext(Nr);\n  if (e === void 0)\n    throw new Error(\"useViewerState must be used within a ViewerProvider\");\n  return e;\n}\nfunction X() {\n  const e = o.useContext(Vr);\n  if (e === void 0)\n    throw new Error(\"useViewerDispatch must be used within a ViewerProvider\");\n  return e;\n}\nconst co = async (e, t) => {\n  const r = e.get({\n    id: t,\n    type: \"Canvas\"\n  });\n  if (!(r != null && r.annotations) || !r.annotations[0]) return [];\n  const i = e.get(r.annotations).filter((s) => s.items ? s : !1), a = [];\n  for (const s of i)\n    if (s.items.length > 0) {\n      const l = s.label || { none: [\"Annotations\"] };\n      a.push({ ...s, label: l });\n    } else {\n      let l = {};\n      try {\n        l = await e.load(s.id);\n      } catch (d) {\n        console.log(d);\n      }\n      if (l.items && l.items.length > 0) {\n        const d = l.label || {\n          none: [\"Annotations\"]\n        };\n        a.push({ ...l, label: d });\n      }\n    }\n  return a;\n}, Ur = async (e, t, r) => {\n  try {\n    if (r == null || r.q == null)\n      return {};\n    const n = r.q.trim(), i = new URL(t);\n    return i.searchParams.set(\"q\", n), await e.load(i.toString());\n  } catch (n) {\n    return console.warn(\"Error in getContentSearchResources:\", n), {};\n  }\n}, qr = (e, t, r, n) => {\n  var s, l;\n  const i = {\n    canvas: void 0,\n    accompanyingCanvas: void 0,\n    annotationPage: void 0,\n    annotations: []\n  }, a = (d) => {\n    if (d) {\n      if (!d.body || !d.motivation) {\n        console.error(\n          \"Invalid annotation after Hyperion parsing: missing either 'body' or 'motivation'\",\n          d\n        );\n        return;\n      }\n      let u = d.body;\n      Array.isArray(u) && (u = u[0]);\n      const c = e.get(u.id);\n      if (!c) return;\n      switch (r) {\n        case \"painting\":\n          return d.target === t.id && d.motivation && d.motivation[0] === \"painting\" && n.includes(c.type) && (d.body = c), !!d;\n        case \"supplementing\":\n          return;\n        default:\n          throw new Error(\"Invalid annotation motivation.\");\n      }\n    }\n  };\n  if (i.canvas = e.get(t), i.canvas && (i.annotationPage = e.get(i.canvas.items[0]), i.accompanyingCanvas = (s = i.canvas) != null && s.accompanyingCanvas ? e.get((l = i.canvas) == null ? void 0 : l.accompanyingCanvas) : void 0), i.annotationPage) {\n    const d = e.get(i.annotationPage.items).map((c) => ({\n      body: e.get(c.body[0].id),\n      motivation: c.motivation,\n      type: \"Annotation\"\n    })), u = [];\n    d.forEach((c) => {\n      c.body.type === \"Choice\" ? c.body.items.forEach(\n        (m) => u.push({\n          ...c,\n          id: m.id,\n          body: e.get(m.id)\n        })\n      ) : u.push(c);\n    }), i.annotations = u.filter(a);\n  }\n  return i;\n}, At = (e, t = \"en\") => {\n  if (!e) return \"\";\n  if (!e[t]) {\n    const r = Object.getOwnPropertyNames(e);\n    if (r.length > 0) return e[r[0]];\n  }\n  return e[t];\n}, he = (e, t) => {\n  const r = qr(\n    e,\n    { id: t, type: \"Canvas\" },\n    \"painting\",\n    [\"Image\", \"Sound\", \"Video\"]\n  );\n  if (r.annotations.length !== 0 && r.annotations && r.annotations)\n    return r.annotations.map(\n      (n) => n == null ? void 0 : n.body\n    );\n}, it = 209, uo = {\n  colors: {\n    /*\n     * Black and dark grays in a light theme.\n     * Must contrast to 4.5 or greater with `secondary`.\n     */\n    primary: \"#1a1d1e\",\n    primaryMuted: \"#26292b\",\n    primaryAlt: \"#151718\",\n    /*\n     * Key brand color(s).\n     * Must contrast to 4.5 or greater with `secondary`.\n     */\n    accent: `hsl(${it} 100% 38.2%)`,\n    accentMuted: `hsl(${it} 80% 61.8%)`,\n    accentAlt: `hsl(${it} 80% 30%)`,\n    /*\n     * White and light grays in a light theme.\n     * Must contrast to 4.5 or greater with `primary` and  `accent`.\n     */\n    secondary: \"#FFFFFF\",\n    secondaryMuted: \"#e6e8eb\",\n    secondaryAlt: \"#c1c8cd\"\n  },\n  fontSizes: {\n    1: \"12px\",\n    2: \"13px\",\n    3: \"15px\",\n    4: \"17px\",\n    5: \"19px\",\n    6: \"21px\",\n    7: \"27px\",\n    8: \"35px\",\n    9: \"59px\"\n  },\n  lineHeights: {\n    1: \"12px\",\n    2: \"13px\",\n    3: \"15px\",\n    4: \"17px\",\n    5: \"19px\",\n    6: \"21px\",\n    7: \"27px\",\n    8: \"35px\",\n    9: \"59px\"\n  },\n  sizes: {\n    1: \"5px\",\n    2: \"10px\",\n    3: \"15px\",\n    4: \"20px\",\n    5: \"25px\",\n    6: \"35px\",\n    7: \"45px\",\n    8: \"65px\",\n    9: \"80px\"\n  },\n  space: {\n    1: \"5px\",\n    2: \"10px\",\n    3: \"15px\",\n    4: \"20px\",\n    5: \"25px\",\n    6: \"35px\",\n    7: \"45px\",\n    8: \"65px\",\n    9: \"80px\"\n  },\n  radii: {\n    1: \"4px\",\n    2: \"6px\",\n    3: \"8px\",\n    4: \"12px\",\n    round: \"50%\",\n    pill: \"9999px\"\n  },\n  transitions: {\n    all: \"all 200ms cubic-bezier(0.16, 1, 0.3, 1)\"\n  },\n  zIndices: {\n    1: \"100\",\n    2: \"200\",\n    3: \"300\",\n    4: \"400\",\n    max: \"999\"\n  }\n}, jr = {\n  xxs: \"(max-width: 349px)\",\n  xs: \"(max-width: 575px)\",\n  sm: \"(max-width: 767px)\",\n  md: \"(max-width: 991px)\",\n  lg: \"(max-width: 90rem)\",\n  xl: \"(min-width: calc(90rem + 1px))\"\n}, { styled: x, css: qu, keyframes: Gr, createTheme: ju } = Ci({\n  theme: uo,\n  media: jr\n}), mo = x(\"div\", {\n  display: \"flex\",\n  flexDirection: \"column\",\n  alignItems: \"center\"\n}), fo = x(\"p\", {\n  fontWeight: \"bold\",\n  fontSize: \"x-large\"\n}), ho = x(\"span\", {\n  fontSize: \"medium\"\n}), It = ({ error: e }) => {\n  const { message: t } = e;\n  return /* @__PURE__ */ o.createElement(mo, { role: \"alert\" }, /* @__PURE__ */ o.createElement(fo, { \"data-testid\": \"headline\" }, \"Something went wrong\"), t && /* @__PURE__ */ o.createElement(ho, null, `Error message: ${t}`, \" \"));\n}, po = x(\"div\", {\n  position: \"relative\",\n  zIndex: \"0\"\n}), Qr = x(\"div\", {\n  display: \"flex\",\n  flexDirection: \"row\",\n  flexGrow: \"1\",\n  overflow: \"hidden\"\n}), Jr = x(\"div\", {\n  display: \"flex\",\n  flexDirection: \"column\",\n  flexGrow: \"1\",\n  flexShrink: \"1\",\n  width: \"100%\",\n  height: \"100%\",\n  \"&[data-aside-active='true']\": {\n    width: \"61.8%\",\n    \"@sm\": {\n      width: \"0\",\n      opacity: \"0\"\n    }\n  },\n  \"&[data-aside-toggle='false']\": {\n    \"@sm\": {\n      width: \"100% !important\",\n      opacity: \"1 !important\"\n    }\n  }\n}), go = x(\"aside\", {\n  display: \"flex\",\n  flexGrow: \"1\",\n  flexShrink: \"0\",\n  width: \"0\",\n  maxHeight: \"100%\",\n  \"&[data-aside-active='true']\": {\n    width: \"38.2%\",\n    \"@sm\": {\n      width: \"100%\"\n    }\n  },\n  \"&[data-aside-toggle='false']\": {\n    \"@sm\": {\n      width: \"0 !important\"\n    }\n  }\n}), vo = x(\"div\", {\n  display: \"flex\",\n  flexDirection: \"column\",\n  fontSmooth: \"auto\",\n  webkitFontSmoothing: \"antialiased\",\n  '&[data-absolute-position=\"true\"]': {\n    position: \"absolute\",\n    width: \"100%\",\n    height: \"100%\",\n    zIndex: \"0\"\n  },\n  \"> div\": {\n    display: \"flex\",\n    flexDirection: \"column\",\n    flexGrow: \"1\",\n    justifyContent: \"flex-start\",\n    height: \"100%\",\n    maxHeight: \"100%\",\n    \"@sm\": {\n      [`& ${Qr}`]: {\n        flexGrow: \"1\"\n      },\n      [`& ${Jr}`]: {\n        flexGrow: \"0\"\n      }\n    }\n  },\n  \"@sm\": {\n    padding: \"0\"\n  },\n  \"&[data-information-panel-open='true']\": {\n    \"@sm\": {}\n  }\n}), yo = x(je.Root, {\n  display: \"flex\",\n  flexDirection: \"column\",\n  width: \"100%\",\n  height: \"100%\",\n  flexGrow: \"1\",\n  flexShrink: \"0\",\n  position: \"relative\",\n  zIndex: \"1\",\n  maskImage: \"linear-gradient(180deg, rgba(0, 0, 0, 1) calc(100% -  2rem), transparent 100%)\",\n  \"@sm\": {\n    marginTop: \"0.5rem\",\n    boxShadow: \"none\"\n  }\n}), bo = x(je.List, {\n  display: \"flex\",\n  flexGrow: \"0\",\n  margin: \"0 1.618rem\",\n  borderBottom: \"5px solid #6663\",\n  \"@sm\": {\n    margin: \"0 1rem\"\n  }\n}), $e = x(je.Trigger, {\n  display: \"flex\",\n  position: \"relative\",\n  padding: \"0.5rem 1.618rem\",\n  background: \"none\",\n  backgroundColor: \"transparent\",\n  fontFamily: \"inherit\",\n  border: \"none\",\n  opacity: \"0.7\",\n  fontSize: \"1rem\",\n  lineHeight: \"1rem\",\n  whiteSpace: \"nowrap\",\n  cursor: \"pointer\",\n  fontWeight: 400,\n  transition: \"$all\",\n  \"&[data-value='manifest-back']\": {\n    display: \"none;\",\n    \"@sm\": {\n      display: \"block\"\n    }\n  },\n  \"&::after\": {\n    width: \"0\",\n    height: \"4px\",\n    content: \"\",\n    position: \"absolute\",\n    bottom: \"-4px\",\n    left: \"0\",\n    transition: \"$all\"\n  },\n  \"&[data-state='active']\": {\n    opacity: \"1\",\n    fontWeight: 700,\n    \"&::after\": {\n      width: \"100%\",\n      backgroundColor: \"$accent\"\n    }\n  }\n}), _e = x(je.Content, {\n  display: \"flex\",\n  flexDirection: \"column\",\n  flexGrow: \"1\",\n  flexShrink: \"0\",\n  position: \"absolute\",\n  top: \"0\",\n  left: \"0\",\n  \"&[data-state='active']\": {\n    width: \"100%\",\n    height: \"calc(100% - 2rem)\",\n    padding: \"1.618rem 0\"\n  }\n}), wo = ({\n  handleScroll: e,\n  children: t,\n  className: r\n}) => /* @__PURE__ */ o.createElement(\"div\", { className: r, onScroll: e }, t), xo = x(wo, {\n  position: \"relative\",\n  height: \"100%\",\n  width: \"100%\",\n  overflowY: \"scroll\"\n}), Yr = {\n  position: \"relative\",\n  display: \"flex\",\n  margin: \"0 1.618rem\",\n  padding: \"0.5rem 0\",\n  fontFamily: \"inherit\",\n  fontSize: \"0.8333rem\",\n  lineHeight: \"1.47rem\",\n  color: \"inherit\",\n  background: \"none\",\n  borderRadius: \"3px\",\n  border: \"none\"\n}, Je = x(\"button\", {\n  textAlign: \"left\",\n  \"&:hover\": {\n    color: \"$accent\"\n  }\n}), Rt = x(\"div\", {\n  display: \"flex\",\n  flexDirection: \"column\",\n  width: \"100%\",\n  header: {\n    margin: \"0 1.618rem 0.5rem \",\n    fontWeight: 700,\n    fontSize: \"0.8333rem\",\n    em: {\n      fontStyle: \"normal\",\n      fontWeight: 400,\n      opacity: 0.7\n    }\n  },\n  paddingBottom: \"1rem\",\n  marginBottom: \"1rem\",\n  borderBottom: \"1px solid #0001\"\n}), Ye = x(\"div\", {\n  gap: \"1rem\",\n  fontSize: \"1rem\",\n  lineHeight: \"1.47em\",\n  margin: \"0\",\n  \"&[data-content-search=true]\": {\n    em: {\n      fontWeight: 700,\n      display: \"inline\"\n    }\n  }\n}), Eo = x(\"div\", {\n  ...Yr,\n  display: \"flex\",\n  flexDirection: \"row\",\n  gap: \"1rem\",\n  \"&[data-format='text/vtt']\": {\n    marginTop: \"-1rem\",\n    \"> span\": {\n      display: \"none\"\n    }\n  },\n  \"> span\": {\n    display: \"flex\",\n    width: \"2rem\",\n    height: \"2rem\",\n    backgroundColor: \"#0001\",\n    flexShrink: \"0\",\n    borderRadius: \"3px\",\n    marginTop: \"0.25rem\"\n  },\n  [`&[dir=rtl] ${Ye}`]: {\n    textAlign: \"right !important\"\n  }\n}), So = ({\n  value: e,\n  handleClick: t\n}) => /* @__PURE__ */ o.createElement(Je, { onClick: t }, /* @__PURE__ */ o.createElement(Ye, { dangerouslySetInnerHTML: { __html: e } })), Co = ({\n  caption: e,\n  handleClick: t,\n  imageUri: r\n}) => /* @__PURE__ */ o.createElement(Je, { onClick: t }, /* @__PURE__ */ o.createElement(\"img\", { src: r, alt: `A visual annotation for ${e}` }), /* @__PURE__ */ o.createElement(\"span\", null, e)), Ao = ({\n  value: e,\n  handleClick: t\n}) => {\n  const r = Ii(e);\n  return /* @__PURE__ */ o.createElement(Je, { onClick: t }, /* @__PURE__ */ o.createElement(\n    Ye,\n    {\n      dangerouslySetInnerHTML: { __html: r.html }\n    }\n  ));\n}, Nt = ({\n  value: e,\n  handleClick: t,\n  isContentSearch: r\n}) => /* @__PURE__ */ o.createElement(Je, { onClick: t }, /* @__PURE__ */ o.createElement(\n  Ye,\n  {\n    dangerouslySetInnerHTML: { __html: e },\n    \"data-content-search\": r\n  }\n)), Io = () => {\n  function e(a) {\n    return a.map((s) => {\n      const l = s.identifier || Me();\n      return { ...s, identifier: l };\n    });\n  }\n  function t(a) {\n    var u;\n    const s = [], l = [], d = e(a);\n    for (const c of d) {\n      for (; l.length > 0 && l[l.length - 1].end <= c.start; )\n        l.pop();\n      l.length > 0 ? (l[l.length - 1].children || (l[l.length - 1].children = []), (u = l[l.length - 1].children) == null || u.push(c), l.push(c)) : (s.push(c), l.push(c));\n    }\n    return s;\n  }\n  function r(a, s = []) {\n    return s.some(\n      (l) => a.start >= l.start && a.end <= l.end\n    );\n  }\n  function n(a = []) {\n    return a.sort((s, l) => s.start - l.start);\n  }\n  function i(a) {\n    return new Promise((s, l) => {\n      const d = [], u = new Ze.Parser(window, Ze.StringDecoder());\n      u.oncue = (c) => {\n        const m = Ze.convertCueToDOMTree(\n          window,\n          c.text\n        ), p = m.innerHTML || \"&nbsp;\", f = m.textContent || \"\";\n        d.push({\n          identifier: Me(),\n          start: c.startTime,\n          end: c.endTime,\n          align: c.align,\n          html: p,\n          text: f\n        });\n      }, u.onflush = () => s(d), u.onparsingerror = (c) => l(c), u.parse(a), u.flush();\n    });\n  }\n  return {\n    addIdentifiersToParsedCues: e,\n    createNestedCues: t,\n    isChild: r,\n    orderCuesByTime: n,\n    parseVttData: i\n  };\n}, Ro = x(Ge.Root, {\n  display: \"flex\",\n  flexDirection: \"column\",\n  width: \"100%\"\n}), Xr = x(Ge.Item, {\n  ...Yr,\n  justifyContent: \"space-between\",\n  textAlign: \"left\",\n  flexGrow: 1,\n  margin: 0,\n  marginLeft: \"-1rem\",\n  padding: \"0.618rem 1rem\",\n  width: \"calc(100% + 2rem)\",\n  fontSize: \"1rem\",\n  strong: {\n    marginLeft: \"1rem\"\n  },\n  \"&:hover\": {\n    color: \"$accent\"\n  },\n  \"&[aria-checked='true']\": {\n    background: \"#6662\"\n  }\n}), To = 750, $o = (e) => {\n  for (; e && e !== document.body; ) {\n    const t = window.getComputedStyle(e).overflowY;\n    if (t !== \"visible\" && t !== \"hidden\" && e.scrollHeight > e.clientHeight)\n      return e;\n    e = e.parentNode;\n  }\n  return null;\n}, ko = ({ html: e, text: t, start: r, end: n }) => {\n  var h, w;\n  const i = X(), {\n    activePlayer: a,\n    configOptions: s,\n    isAutoScrollEnabled: l,\n    isUserScrolling: d\n  } = z(), u = (w = (h = s == null ? void 0 : s.informationPanel) == null ? void 0 : h.vtt) == null ? void 0 : w.autoScroll, [c, m] = P(!1), p = Ue(null), f = a;\n  T(() => (f == null || f.addEventListener(\"timeupdate\", () => {\n    const { currentTime: v } = f;\n    m(r <= v && v < n);\n  }), () => document.removeEventListener(\"timeupdate\", () => {\n  })), [n, r, f]), T(() => {\n    var b;\n    const v = (E) => {\n      i({ type: \"updateAutoScrolling\", isAutoScrolling: !0 }), E(), setTimeout(\n        () => i({ type: \"updateAutoScrolling\", isAutoScrolling: !1 }),\n        To\n      );\n    };\n    if (l && c && p.current && !d) {\n      const E = p.current;\n      if (E && E instanceof HTMLElement) {\n        const y = $o(E);\n        if (y && y instanceof HTMLElement) {\n          let S;\n          switch ((b = u == null ? void 0 : u.settings) == null ? void 0 : b.block) {\n            case \"center\":\n              const C = y.getBoundingClientRect();\n              S = E.offsetTop + E.offsetHeight - Math.floor((C.bottom - C.top) / 2);\n              break;\n            case \"end\":\n              S = E.offsetTop + E.offsetHeight - (y.clientHeight - E.clientHeight) + 2;\n              break;\n            default:\n              S = E.offsetTop - 2;\n              break;\n          }\n          v(\n            () => {\n              var C;\n              return y.scrollTo({\n                top: S,\n                left: 0,\n                behavior: (C = u == null ? void 0 : u.settings) == null ? void 0 : C.behavior\n              });\n            }\n          );\n        }\n      }\n    }\n  }, [\n    u,\n    c,\n    d,\n    l,\n    i\n  ]);\n  const g = () => {\n    f && (f.pause(), f.currentTime = r, f.play());\n  };\n  return /* @__PURE__ */ o.createElement(\n    Xr,\n    {\n      ref: p,\n      \"aria-checked\": c,\n      \"data-testid\": \"information-panel-cue\",\n      onClick: g,\n      value: t\n    },\n    /* @__PURE__ */ o.createElement(\n      \"div\",\n      {\n        className: \"webvtt-cue\",\n        dangerouslySetInnerHTML: { __html: e }\n      }\n    ),\n    /* @__PURE__ */ o.createElement(\"strong\", null, zr(r))\n  );\n}, Mo = x(\"ul\", {\n  listStyle: \"none\",\n  paddingLeft: \"1rem\",\n  position: \"relative\",\n  \"&&:first-child\": {\n    paddingLeft: \"0\"\n  },\n  \"& li ul\": {\n    [`& ${Xr}`]: {\n      backgroundColor: \"unset\",\n      \"&::before\": {\n        content: \"none\"\n      },\n      \"&::after\": {\n        content: \"none\"\n      }\n    }\n  },\n  \"&:first-child\": {\n    margin: \"0 0 1.618rem\"\n  }\n}), Zr = ({ items: e }) => /* @__PURE__ */ o.createElement(Mo, null, e.map((t) => {\n  const { html: r, text: n, start: i, end: a, children: s, identifier: l } = t;\n  return /* @__PURE__ */ o.createElement(\"li\", { key: l }, /* @__PURE__ */ o.createElement(ko, { html: r, text: n, start: i, end: a }), s && /* @__PURE__ */ o.createElement(Zr, { items: s }));\n})), Oo = ({\n  inlineCues: e,\n  label: t,\n  vttUri: r\n}) => {\n  const [n, i] = o.useState(\n    e || []\n  ), { createNestedCues: a, orderCuesByTime: s, parseVttData: l } = Io(), [d, u] = o.useState();\n  return T(\n    () => {\n      !e && r && fetch(r, {\n        headers: {\n          \"Content-Type\": \"text/plain\",\n          Accept: \"application/json\"\n        }\n      }).then((c) => c.text()).then((c) => {\n        l(c).then((m) => {\n          const p = s(m), f = a(p);\n          i(f);\n        });\n      }).catch((c) => {\n        console.error(r, c.toString()), u(c);\n      });\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [r, e]\n  ), /* @__PURE__ */ o.createElement(\n    Ro,\n    {\n      \"data-testid\": \"annotation-item-vtt\",\n      \"aria-label\": `${At(t)}`\n    },\n    d && /* @__PURE__ */ o.createElement(\"div\", { \"data-testid\": \"error-message\" }, \"Network Error: \", d.toString()),\n    /* @__PURE__ */ o.createElement(Zr, { items: n })\n  );\n}, Po = (e) => {\n  var n;\n  if (!e) return \"LTR\";\n  const t = [\n    \"ar\",\n    \"fa\",\n    \"ur\",\n    \"ps\",\n    \"dv\",\n    \"sd\",\n    \"ug\",\n    \"ku\",\n    \"he\",\n    \"yi\",\n    \"jrb\",\n    \"jpr\",\n    \"nqo\"\n  ], r = Array.isArray(e) ? (n = e[0]) == null ? void 0 : n.split(\"-\")[0] : e == null ? void 0 : e.split(\"-\")[0];\n  return t.includes(r) ? \"RTL\" : \"LTR\";\n}, Lo = (e) => {\n  var r, n, i, a, s;\n  let t = {\n    id: typeof e == \"string\" ? e : e.source\n  };\n  if (typeof e == \"string\") {\n    if (e.includes(\"#xywh=\")) {\n      const l = e.split(\"#xywh=\");\n      if (l && l[1]) {\n        const [d, u, c, m] = l[1].split(\",\").map((p) => Number(p));\n        t = {\n          id: l[0],\n          rect: {\n            x: d,\n            y: u,\n            w: c,\n            h: m\n          }\n        };\n      }\n    } else if (e.includes(\"#t=\")) {\n      const l = e.split(\"#t=\");\n      l && l[1] && (t = {\n        id: l[0],\n        t: l[1]\n      });\n    }\n  } else if (typeof e == \"object\") {\n    if (((r = e.selector) == null ? void 0 : r.type) === \"PointSelector\")\n      t = {\n        id: e.source,\n        point: {\n          x: e.selector.x,\n          y: e.selector.y\n        }\n      };\n    else if (((n = e.selector) == null ? void 0 : n.type) === \"SvgSelector\")\n      t = {\n        id: e.source,\n        svg: e.selector.value\n      };\n    else if (((i = e.selector) == null ? void 0 : i.type) === \"FragmentSelector\" && (a = e.selector) != null && a.value.includes(\"xywh=\") && e.source.type == \"Canvas\" && e.source.id) {\n      const l = (s = e.selector) == null ? void 0 : s.value.split(\"xywh=\");\n      if (l && l[1]) {\n        const [d, u, c, m] = l[1].split(\",\").map((p) => Number(p));\n        t = {\n          id: e.source.id,\n          rect: {\n            x: d,\n            y: u,\n            w: c,\n            h: m\n          }\n        };\n      }\n    }\n  }\n  return t;\n}, Tt = ({\n  annotation: e,\n  targetResource: t,\n  isContentSearch: r,\n  isContentState: n\n}) => {\n  var te, L, J, K, G, oe, ve;\n  const { target: i } = e, a = (te = i == null ? void 0 : i.selector) == null ? void 0 : te.type, s = ((J = (L = i == null ? void 0 : i.selector) == null ? void 0 : L.value) == null ? void 0 : J.split(\"=\")[1]) || \"full\", [l, d] = s !== \"full\" ? s == null ? void 0 : s.split(\",\").slice(2) : [100, 100], c = `${t}/${s}/!${((_, B) => {\n    const D = Math.max(_, B), M = Math.round(_ / D * 100), q = Math.round(B / D * 100);\n    return [M, q].join(\",\");\n  })(l, d)}/0/default.jpg`, m = z(), p = X(), { openSeadragonViewer: f, vault: g, visibleCanvases: h } = m, w = e != null && e.body ? (K = e == null ? void 0 : e.body) == null ? void 0 : K.map((_) => g.get(_.id)) : [], {\n    format: v = a === \"PointSelector\" ? \"text/vtt\" : \"text/plain\",\n    language: b = \"none\",\n    value: E = \"\",\n    // @ts-ignore\n    chars: y = \"\"\n  } = w[0] ? w[0] : {}, S = a === \"PointSelector\" ? \"text/vtt\" : v, C = ((G = w[0]) == null ? void 0 : G.label) || { none: [\"t\"] }, A = E || y || \"None\", I = b ? Po(b).toLocaleLowerCase() : \"LTR\", O = (\n    // @ts-ignore\n    a === \"PointSelector\" && ((oe = i == null ? void 0 : i.selector) != null && oe.t) ? [\n      {\n        // @ts-ignore\n        start: (ve = i == null ? void 0 : i.selector) == null ? void 0 : ve.t,\n        end: 0,\n        html: A,\n        text: A,\n        styles: \"\",\n        children: []\n      }\n    ] : void 0\n  );\n  function $() {\n    var B;\n    const _ = f == null ? void 0 : f.getOverlayById(e.id);\n    if (_ && (f != null && f.viewport)) {\n      _ != null && _.element && ((B = _.element) == null || B.focus());\n      const k = _ == null ? void 0 : _.getBounds(f.viewport);\n      k.x -= 0.2, k.y -= 0.2, k.width += 0.5, k.height += 0.5, f.viewport.fitBounds(k, !1);\n    }\n  }\n  T(() => {\n    if (!f || !n) return;\n    const _ = setInterval(() => {\n      (f == null ? void 0 : f.getOverlayById(e.id)) && ($(), f.container.className = \"clover-iiif-content-state\", clearInterval(_));\n    }, 1e3);\n    return () => clearInterval(_);\n  }, [f, n]);\n  function F(_) {\n    var M;\n    _.preventDefault(), _.stopPropagation();\n    const B = ((M = e == null ? void 0 : e.target) == null ? void 0 : M.source) || (e == null ? void 0 : e.target), k = B == null ? void 0 : B.id;\n    h.map((q) => q.id).includes(k) ? $() : p({\n      type: \"updateActiveCanvas\",\n      canvasId: k\n    });\n  }\n  function V() {\n    var _, B, k;\n    switch (S) {\n      case \"text/plain\":\n        return /* @__PURE__ */ o.createElement(\n          Nt,\n          {\n            value: A,\n            handleClick: F,\n            isContentSearch: r\n          }\n        );\n      case \"text/html\":\n        return /* @__PURE__ */ o.createElement(So, { value: A, handleClick: F });\n      case \"text/markdown\":\n        return /* @__PURE__ */ o.createElement(Ao, { value: A, handleClick: F });\n      case \"text/vtt\":\n        return /* @__PURE__ */ o.createElement(\n          Oo,\n          {\n            inlineCues: O,\n            label: C,\n            vttUri: ((_ = w[0]) == null ? void 0 : _.id) || void 0\n          }\n        );\n      case ((B = v == null ? void 0 : v.match(/^image\\//)) == null ? void 0 : B.input):\n        const D = ((k = w.find((M) => {\n          var q;\n          return !((q = M.id) != null && q.includes(\"vault://\"));\n        })) == null ? void 0 : k.id) || \"\";\n        return /* @__PURE__ */ o.createElement(\n          Co,\n          {\n            caption: E,\n            handleClick: F,\n            imageUri: D\n          }\n        );\n      default:\n        return /* @__PURE__ */ o.createElement(Nt, { value: A, handleClick: F });\n    }\n  }\n  if (v)\n    return /* @__PURE__ */ o.createElement(\n      Eo,\n      {\n        dir: I,\n        \"data-format\": v,\n        \"data-content\": A,\n        className: \"clover-iiif-annotation-item\"\n      },\n      /* @__PURE__ */ o.createElement(\n        \"span\",\n        {\n          style: {\n            backgroundImage: `url(${c})`,\n            backgroundSize: \"cover\",\n            backgroundPosition: \"center\"\n          }\n        }\n      ),\n      V()\n    );\n}, Kr = (e, t = \"none\") => {\n  if (!e) return null;\n  if (typeof e == \"string\") return [e];\n  if (!e[t]) {\n    const r = Object.getOwnPropertyNames(e);\n    if (r.length > 0) return e[r[0]];\n  }\n  return !e[t] || !Array.isArray(e[t]) ? null : e[t];\n}, Z = (e, t = \"none\", r = \", \") => {\n  const n = Kr(e, t);\n  return Array.isArray(n) ? n.join(`${r}`) : n;\n};\nfunction Fo(e) {\n  return { __html: _o(e) };\n}\nfunction ie(e, t) {\n  const r = Object.keys(e).filter(\n    (i) => t.includes(i) ? null : i\n  ), n = new Object();\n  return r.forEach((i) => {\n    n[i] = e[i];\n  }), n;\n}\nfunction _o(e) {\n  return Ri(e, {\n    allowedAttributes: {\n      a: [\"href\"],\n      img: [\"alt\", \"src\", \"height\", \"width\"]\n    },\n    allowedSchemes: [\"http\", \"https\", \"mailto\"],\n    allowedTags: [\n      \"a\",\n      \"b\",\n      \"br\",\n      \"i\",\n      \"img\",\n      \"p\",\n      \"small\",\n      \"span\",\n      \"sub\",\n      \"sup\"\n    ]\n  });\n}\nconst zo = x(\"span\", {}), ce = (e) => {\n  const { as: t, label: r } = e, i = ie(e, [\"as\", \"label\"]);\n  return /* @__PURE__ */ o.createElement(zo, { as: t, ...i }, Z(r, i.lang));\n}, Do = (e, t = \"200,\", r = \"full\") => {\n  Array.isArray(e) && (e = e[0]);\n  const { id: n, service: i } = e;\n  let a;\n  if (!i) return n;\n  if (Array.isArray(e.service) && e.service.length > 0 && (a = i[0]), a) {\n    if (a[\"@id\"])\n      return `${a[\"@id\"]}/${r}/${t}/0/default.jpg`;\n    if (a.id)\n      return `${a.id}/${r}/${t}/0/default.jpg`;\n  }\n}, Vt = x(\"img\", { objectFit: \"cover\" }), Bo = (e) => {\n  const t = Ue(null), { contentResource: r, altAsLabel: n, region: i = \"full\" } = e;\n  let a;\n  n && (a = Z(n));\n  const l = ie(e, [\"contentResource\", \"altAsLabel\"]), { type: d, id: u, width: c = 200, height: m = 200, duration: p } = r;\n  T(() => {\n    if (!u && !t.current || [\"Image\"].includes(d) || !u.includes(\"m3u8\")) return;\n    const h = new ne();\n    return t.current && (h.attachMedia(t.current), h.on(ne.Events.MEDIA_ATTACHED, function() {\n      h.loadSource(u);\n    })), h.on(ne.Events.ERROR, function(w, v) {\n      if (v.fatal)\n        switch (v.type) {\n          case ne.ErrorTypes.NETWORK_ERROR:\n            console.error(\n              `fatal ${w} network error encountered, try to recover`\n            ), h.startLoad();\n            break;\n          case ne.ErrorTypes.MEDIA_ERROR:\n            console.error(\n              `fatal ${w} media error encountered, try to recover`\n            ), h.recoverMediaError();\n            break;\n          default:\n            h.destroy();\n            break;\n        }\n    }), () => {\n      h && (h.detachMedia(), h.destroy());\n    };\n  }, [u, d]);\n  const f = qe(() => {\n    if (!t.current) return;\n    let h = 0, w = 30;\n    if (p && (w = p), !u.split(\"#t=\") && p && (h = p * 0.1), u.split(\"#t=\").pop()) {\n      const b = u.split(\"#t=\").pop();\n      b && (h = parseInt(b.split(\",\")[0]));\n    }\n    const v = t.current;\n    v.autoplay = !0, v.currentTime = h, setTimeout(() => f(), w * 1e3);\n  }, [p, u]);\n  T(() => f(), [f]);\n  const g = Do(\n    r,\n    `${c},${m}`,\n    i\n  );\n  switch (d) {\n    case \"Image\":\n      return /* @__PURE__ */ o.createElement(\n        Vt,\n        {\n          as: \"img\",\n          alt: a,\n          css: { width: c, height: m },\n          key: u,\n          src: g,\n          ...l\n        }\n      );\n    case \"Video\":\n      return /* @__PURE__ */ o.createElement(\n        Vt,\n        {\n          as: \"video\",\n          css: { width: c, height: m },\n          disablePictureInPicture: !0,\n          key: u,\n          loop: !0,\n          muted: !0,\n          onPause: f,\n          ref: t,\n          src: u\n        }\n      );\n    default:\n      return console.warn(\n        `Resource type: ${d} is not valid or not yet supported in Primitives.`\n      ), /* @__PURE__ */ o.createElement(o.Fragment, null);\n  }\n}, Ho = x(\"a\", {}), Wo = (e) => {\n  const { children: t, homepage: r } = e, i = ie(e, [\"children\", \"homepage\"]);\n  return /* @__PURE__ */ o.createElement(o.Fragment, null, r && r.map((a) => {\n    const s = Z(\n      a.label,\n      i.lang\n    );\n    return /* @__PURE__ */ o.createElement(\n      Ho,\n      {\n        \"aria-label\": t ? s : void 0,\n        href: a.id,\n        key: a.id,\n        ...i\n      },\n      t || s\n    );\n  }));\n}, No = {\n  delimiter: \", \"\n}, $t = di(void 0), en = () => {\n  const e = ui($t);\n  if (e === void 0)\n    throw new Error(\n      \"usePrimitivesContext must be used with a PrimitivesProvider\"\n    );\n  return e;\n}, kt = ({\n  children: e,\n  initialState: t = No\n}) => {\n  const r = Vo(t, \"delimiter\");\n  return /* @__PURE__ */ o.createElement($t.Provider, { value: { delimiter: r } }, e);\n}, Vo = (e, t) => Object.hasOwn(e, t) ? e[t].toString() : void 0, Uo = x(\"span\", {}), Ut = (e) => {\n  const { as: t, markup: r } = e, { delimiter: n } = en();\n  if (!r) return /* @__PURE__ */ o.createElement(o.Fragment, null);\n  const a = ie(e, [\"as\", \"markup\"]), s = Fo(\n    Z(r, a.lang, n)\n  );\n  return /* @__PURE__ */ o.createElement(Uo, { as: t, ...a, dangerouslySetInnerHTML: s });\n}, tn = (e) => o.useContext($t) ? /* @__PURE__ */ o.createElement(Ut, { ...e }) : /* @__PURE__ */ o.createElement(kt, null, /* @__PURE__ */ o.createElement(Ut, { ...e })), qo = ({ as: e = \"dd\", lang: t, value: r }) => /* @__PURE__ */ o.createElement(tn, { markup: r, as: e, lang: t }), jo = x(\"span\", {}), Go = ({\n  as: e = \"dd\",\n  customValueContent: t,\n  lang: r,\n  value: n\n}) => {\n  var s;\n  const { delimiter: i } = en(), a = (s = Kr(n, r)) == null ? void 0 : s.map((l) => mi(t, {\n    value: l\n  }));\n  return /* @__PURE__ */ o.createElement(jo, { as: e, lang: r }, a == null ? void 0 : a.map((l, d) => [\n    d > 0 && `${i}`,\n    /* @__PURE__ */ o.createElement(fi, { key: d }, l)\n  ]));\n}, rn = (e) => {\n  var l;\n  const { item: t, lang: r, customValueContent: n } = e, { label: i, value: a } = t, s = (l = Z(i)) == null ? void 0 : l.replace(\" \", \"-\").toLowerCase();\n  return /* @__PURE__ */ o.createElement(\"div\", { role: \"group\", \"data-label\": s }, /* @__PURE__ */ o.createElement(ce, { as: \"dt\", label: i, lang: r }), n ? /* @__PURE__ */ o.createElement(\n    Go,\n    {\n      as: \"dd\",\n      customValueContent: n,\n      value: a,\n      lang: r\n    }\n  ) : /* @__PURE__ */ o.createElement(qo, { as: \"dd\", value: a, lang: r }));\n};\nfunction Qo(e, t) {\n  const r = t.filter((n) => {\n    const { matchingLabel: i } = n, a = Object.keys(n.matchingLabel)[0], s = Z(i, a);\n    if (Z(e, a) === s) return !0;\n  }).map((n) => n.Content);\n  if (Array.isArray(r))\n    return r[0];\n}\nconst Jo = x(\"dl\", {}), Yo = (e) => {\n  const { as: t, customValueContent: r, metadata: n } = e;\n  if (!Array.isArray(n)) return /* @__PURE__ */ o.createElement(o.Fragment, null);\n  const i = Hr(e, \"customValueDelimiter\"), s = ie(e, [\n    \"as\",\n    \"customValueContent\",\n    \"customValueDelimiter\",\n    \"metadata\"\n  ]);\n  return /* @__PURE__ */ o.createElement(\n    kt,\n    {\n      ...typeof i == \"string\" ? { initialState: { delimiter: i } } : void 0\n    },\n    n.length > 0 && /* @__PURE__ */ o.createElement(Jo, { as: t, ...s }, n.map((l, d) => {\n      const u = r ? Qo(l.label, r) : void 0;\n      return /* @__PURE__ */ o.createElement(\n        rn,\n        {\n          customValueContent: u,\n          item: l,\n          key: d,\n          lang: s == null ? void 0 : s.lang\n        }\n      );\n    }))\n  );\n};\nx(\"li\", {});\nx(\"ul\", {});\nconst Xo = x(\"li\", {}), Zo = x(\"ul\", {}), Ko = (e) => {\n  const { as: t, rendering: r } = e, i = ie(e, [\"as\", \"rendering\"]);\n  return /* @__PURE__ */ o.createElement(Zo, { as: t }, r && r.map((a) => {\n    const s = Z(\n      a.label,\n      i.lang\n    );\n    return /* @__PURE__ */ o.createElement(Xo, { key: a.id }, /* @__PURE__ */ o.createElement(\"a\", { href: a.id, ...i, target: \"_blank\" }, s || a.id));\n  }));\n}, es = x(\"dl\", {}), ts = (e) => {\n  const { as: t, requiredStatement: r } = e;\n  if (!r) return /* @__PURE__ */ o.createElement(o.Fragment, null);\n  const n = Hr(e, \"customValueDelimiter\"), a = ie(e, [\"as\", \"customValueDelimiter\", \"requiredStatement\"]);\n  return /* @__PURE__ */ o.createElement(\n    kt,\n    {\n      ...typeof n == \"string\" ? { initialState: { delimiter: n } } : void 0\n    },\n    /* @__PURE__ */ o.createElement(es, { as: t, ...a }, /* @__PURE__ */ o.createElement(rn, { item: r, lang: a.lang }))\n  );\n}, rs = x(\"li\", {}), ns = x(\"ul\", {}), is = (e) => {\n  const { as: t, seeAlso: r } = e, i = ie(e, [\"as\", \"seeAlso\"]);\n  return /* @__PURE__ */ o.createElement(ns, { as: t }, r && r.map((a) => {\n    const s = Z(\n      a.label,\n      i.lang\n    );\n    return /* @__PURE__ */ o.createElement(rs, { key: a.id }, /* @__PURE__ */ o.createElement(\"a\", { href: a.id, ...i }, s || a.id));\n  }));\n}, as = (e) => {\n  const { as: t, summary: r } = e, i = ie(e, [\"as\", \"customValueDelimiter\", \"summary\"]);\n  return /* @__PURE__ */ o.createElement(tn, { as: t, markup: r, ...i });\n}, nn = (e) => {\n  const { thumbnail: t, region: r } = e, i = ie(e, [\"thumbnail\"]);\n  return /* @__PURE__ */ o.createElement(o.Fragment, null, t && t.map((a) => /* @__PURE__ */ o.createElement(\n    Bo,\n    {\n      contentResource: a,\n      key: a.id,\n      region: r,\n      ...i\n    }\n  )));\n}, os = ({ annotationPage: e }) => {\n  var d, u, c, m, p, f;\n  const t = z(), { vault: r } = t;\n  if (!e || !e.items || ((d = e.items) == null ? void 0 : d.length) === 0)\n    return /* @__PURE__ */ o.createElement(o.Fragment, null);\n  const n = e.items.map((g) => r.get(g.id));\n  if (!n) return /* @__PURE__ */ o.createElement(o.Fragment, null);\n  const i = n.reduce((g, h) => (g.canvas = h.target.source.id, g.annotations = [], g.annotations.push(h == null ? void 0 : h.id), g), {}), a = r.get(i.canvas), s = he(r, a.id), l = (u = s == null ? void 0 : s[0]) != null && u.service ? ((m = (c = s == null ? void 0 : s[0]) == null ? void 0 : c.service[0]) == null ? void 0 : m.id) || ((f = (p = s == null ? void 0 : s[0]) == null ? void 0 : p.service[0]) == null ? void 0 : f[\"@id\"]) : void 0;\n  return /* @__PURE__ */ o.createElement(Rt, { \"data-testid\": \"annotation-page\" }, a && /* @__PURE__ */ o.createElement(\"header\", null, /* @__PURE__ */ o.createElement(ce, { label: a.label })), /* @__PURE__ */ o.createElement(\"div\", { \"data-testid\": \"annotation-page-items\" }, n == null ? void 0 : n.map((g) => /* @__PURE__ */ o.createElement(\n    Tt,\n    {\n      annotation: g,\n      targetResource: l,\n      key: g.id\n    }\n  ))));\n}, ss = x(\"div\", {\n  form: {\n    display: \"flex\",\n    alignItems: \"center\",\n    width: \"100%\",\n    height: \"100%\",\n    gap: \"1rem\",\n    padding: \"0 1.618rem 1.618rem\",\n    \".content-search-input\": {\n      flexGrow: \"1\",\n      input: {\n        width: \"100%\",\n        border: \"none\",\n        backgroundColor: \"$secondaryMuted\",\n        color: \"$primary\",\n        marginRight: \"1rem\",\n        height: \"2rem\",\n        padding: \"0 1rem\",\n        borderRadius: \"1rem\",\n        fontFamily: \"inherit\",\n        fontSize: \"1rem\",\n        lineHeight: \"1rem\",\n        boxShadow: \"inset 1px 1px 2px #0001\",\n        \"&::placeholder\": {\n          color: \"#0006\"\n        }\n      }\n    }\n  }\n}), ls = x(\"button\", {\n  display: \"flex\",\n  background: \"none\",\n  border: \"none\",\n  width: \"2rem\",\n  height: \"2rem\",\n  padding: \"0\",\n  margin: \"0\",\n  fontWeight: \"700\",\n  borderRadius: \"2rem\",\n  backgroundColor: \"$accent\",\n  color: \"$secondary\",\n  cursor: \"pointer\",\n  boxSizing: \"content-box\",\n  transition: \"$all\",\n  svg: {\n    height: \"60%\",\n    width: \"60%\",\n    padding: \"20%\",\n    fill: \"$secondary\",\n    stroke: \"$secondary\",\n    opacity: \"1\",\n    filter: \"drop-shadow(5px 5px 5px #000D)\",\n    boxSizing: \"inherit\",\n    transition: \"$all\"\n  },\n  \"&:disabled\": {\n    backgroundColor: \"transparent\",\n    boxShadow: \"none\",\n    svg: { opacity: \"0.25\" }\n  }\n}), cs = ({\n  searchServiceUrl: e,\n  setContentSearchResource: t,\n  setLoading: r\n}) => {\n  const { t: n } = pe(), [i, a] = P(), s = z(), { openSeadragonViewer: l, vault: d } = s;\n  async function u(p) {\n    if (p.preventDefault(), !!l && e) {\n      if (!i || i.trim() === \"\") {\n        t({});\n        return;\n      }\n      r(!0), Ur(d, e, {\n        q: i\n      }).then((f) => {\n        t(f), r(!1);\n      });\n    }\n  }\n  const c = (p) => {\n    p.preventDefault(), a(p.target.value);\n  }, m = n(\"contentSearchPlaceholder\");\n  return /* @__PURE__ */ o.createElement(ss, null, /* @__PURE__ */ o.createElement(Le.Root, { onSubmit: u, className: \"content-search-form\" }, /* @__PURE__ */ o.createElement(\n    Le.Field,\n    {\n      className: \"content-search-input\",\n      name: \"searchTerms\",\n      onChange: c\n    },\n    /* @__PURE__ */ o.createElement(Le.Control, { placeholder: m })\n  ), /* @__PURE__ */ o.createElement(Le.Submit, { asChild: !0 }, /* @__PURE__ */ o.createElement(ls, { type: \"submit\" }, /* @__PURE__ */ o.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", viewBox: \"0 0 512 512\" }, /* @__PURE__ */ o.createElement(\"title\", null, n(\"informationPanelTabsSearch\")), /* @__PURE__ */ o.createElement(\"path\", { d: \"M456.69 421.39L362.6 327.3a173.81 173.81 0 0034.84-104.58C397.44 126.38 319.06 48 222.72 48S48 126.38 48 222.72s78.38 174.72 174.72 174.72A173.81 173.81 0 00327.3 362.6l94.09 94.09a25 25 0 0035.3-35.3zM97.92 222.72a124.8 124.8 0 11124.8 124.8 124.95 124.95 0 01-124.8-124.8z\" }))))));\n}, ds = ({\n  searchServiceUrl: e,\n  setContentSearchResource: t,\n  activeCanvas: r,\n  annotationPage: n\n}) => {\n  const i = z(), { vault: a } = i, { t: s } = pe(), [l, d] = P(!1), [u, c] = P({});\n  T(() => {\n    var g;\n    if (!(n != null && n.items)) return;\n    const f = ((g = n == null ? void 0 : n.items) == null ? void 0 : g.map((h) => a.get(h.id))).reduce((h, w) => {\n      const v = w.target.source.id;\n      return h[v] || (h[v] = []), h[v].push(w.id), h;\n    }, {});\n    c(f);\n  }, [n]);\n  let m;\n  return /* @__PURE__ */ o.createElement(o.Fragment, null, /* @__PURE__ */ o.createElement(\n    cs,\n    {\n      searchServiceUrl: e,\n      setContentSearchResource: t,\n      activeCanvas: r,\n      setLoading: d\n    }\n  ), l ? /* @__PURE__ */ o.createElement(\"span\", null, s(\"contentSearchLoading\")) : u && Object.keys(u).length > 0 && Object.keys(u).map((p) => (m = a.get(p), /* @__PURE__ */ o.createElement(Rt, { key: p, \"data-testid\": \"annotation-page\" }, m && /* @__PURE__ */ o.createElement(\"header\", null, /* @__PURE__ */ o.createElement(ce, { label: m.label })), u[p].map((f) => {\n    var v, b, E, y, S;\n    const g = a.get(\n      f\n    ), h = he(a, m.id), w = (v = h == null ? void 0 : h[0]) != null && v.service ? ((E = (b = h == null ? void 0 : h[0]) == null ? void 0 : b.service[0]) == null ? void 0 : E.id) || ((S = (y = h == null ? void 0 : h[0]) == null ? void 0 : y.service[0]) == null ? void 0 : S[\"@id\"]) : void 0;\n    return /* @__PURE__ */ o.createElement(\n      Tt,\n      {\n        annotation: g,\n        targetResource: w,\n        key: g.id,\n        isContentSearch: !0\n      }\n    );\n  })))));\n}, us = x(\"div\", {\n  width: \"100%\",\n  padding: \" 0 1.618rem 2rem\",\n  display: \"flex\",\n  flexDirection: \"column\",\n  overflow: \"auto\",\n  position: \"absolute\",\n  fontWeight: \"400\",\n  fontSize: \"1rem\",\n  zIndex: \"0\",\n  img: {\n    maxWidth: \"100px\",\n    maxHeight: \"100px\",\n    objectFit: \"contain\",\n    color: \"transparent\",\n    margin: \"0 0 1rem\",\n    borderRadius: \"3px\",\n    backgroundColor: \"$secondaryMuted\"\n  },\n  video: {\n    display: \"none\"\n  },\n  \"a, a:visited\": {\n    color: \"$accent\"\n  },\n  p: {\n    fontSize: \"1rem\",\n    lineHeight: \"1.47em\",\n    margin: \"0\"\n  },\n  dl: {\n    margin: \"0\",\n    dt: {\n      fontWeight: \"700\",\n      margin: \"1rem 0 0.25rem\"\n    },\n    dd: {\n      margin: \"0\"\n    }\n  },\n  \".manifest-property-title\": {\n    fontWeight: \"700\",\n    margin: \"1rem 0 0.25rem\"\n  },\n  \"ul, ol\": {\n    padding: \"0\",\n    margin: \"0\",\n    li: {\n      fontSize: \"1rem\",\n      lineHeight: \"1.45em\",\n      listStyle: \"none\",\n      margin: \"0.25rem 0 0.25rem\"\n    }\n  }\n}), ms = x(\"div\", {\n  position: \"relative\",\n  width: \"100%\",\n  height: \"100%\",\n  zIndex: \"0\"\n}), fs = ({\n  homepage: e\n}) => (e == null ? void 0 : e.length) === 0 ? /* @__PURE__ */ o.createElement(o.Fragment, null) : /* @__PURE__ */ o.createElement(o.Fragment, null, /* @__PURE__ */ o.createElement(\"span\", { className: \"manifest-property-title\" }, \"Homepage\"), /* @__PURE__ */ o.createElement(Wo, { homepage: e })), hs = ({\n  id: e,\n  htmlLabel: t,\n  parent: r = \"manifest\"\n}) => /* @__PURE__ */ o.createElement(o.Fragment, null, /* @__PURE__ */ o.createElement(\"span\", { className: \"manifest-property-title\" }, t), /* @__PURE__ */ o.createElement(\"a\", { href: e, target: \"_blank\", id: `iiif-${r}-id` }, e)), ps = ({\n  metadata: e,\n  parent: t = \"manifest\"\n}) => e ? /* @__PURE__ */ o.createElement(o.Fragment, null, /* @__PURE__ */ o.createElement(Yo, { metadata: e, id: `iiif-${t}-metadata` })) : /* @__PURE__ */ o.createElement(o.Fragment, null), gs = ({\n  rendering: e\n}) => (e == null ? void 0 : e.length) === 0 ? /* @__PURE__ */ o.createElement(o.Fragment, null) : /* @__PURE__ */ o.createElement(o.Fragment, null, /* @__PURE__ */ o.createElement(\"span\", { className: \"manifest-property-title\" }, \"Alternate formats\"), /* @__PURE__ */ o.createElement(Ko, { rendering: e })), vs = ({\n  requiredStatement: e,\n  parent: t = \"manifest\"\n}) => e ? /* @__PURE__ */ o.createElement(o.Fragment, null, /* @__PURE__ */ o.createElement(\n  ts,\n  {\n    requiredStatement: e,\n    id: `iiif-${t}-required-statement`\n  }\n)) : /* @__PURE__ */ o.createElement(o.Fragment, null), ys = ({ rights: e }) => e ? /* @__PURE__ */ o.createElement(o.Fragment, null, /* @__PURE__ */ o.createElement(\"span\", { className: \"manifest-property-title\" }, \"Rights\"), /* @__PURE__ */ o.createElement(\"a\", { href: e, target: \"_blank\" }, e)) : /* @__PURE__ */ o.createElement(o.Fragment, null), bs = ({ seeAlso: e }) => (e == null ? void 0 : e.length) === 0 ? /* @__PURE__ */ o.createElement(o.Fragment, null) : /* @__PURE__ */ o.createElement(o.Fragment, null, /* @__PURE__ */ o.createElement(\"span\", { className: \"manifest-property-title\" }, \"See Also\"), /* @__PURE__ */ o.createElement(is, { seeAlso: e })), ws = ({\n  summary: e,\n  parent: t = \"manifest\"\n}) => e ? /* @__PURE__ */ o.createElement(o.Fragment, null, /* @__PURE__ */ o.createElement(as, { summary: e, as: \"p\", id: `iiif-${t}-summary` })) : /* @__PURE__ */ o.createElement(o.Fragment, null), xs = ({\n  label: e,\n  thumbnail: t\n}) => (t == null ? void 0 : t.length) === 0 ? /* @__PURE__ */ o.createElement(o.Fragment, null) : /* @__PURE__ */ o.createElement(o.Fragment, null, /* @__PURE__ */ o.createElement(\n  nn,\n  {\n    altAsLabel: e || { none: [\"resource\"] },\n    thumbnail: t,\n    style: { backgroundColor: \"#6663\", objectFit: \"cover\" }\n  }\n)), Es = () => {\n  const e = z(), { activeManifest: t, vault: r } = e, [n, i] = P(), [a, s] = P([]), [l, d] = P([]), [u, c] = P(\n    []\n  ), [m, p] = P([]);\n  return T(() => {\n    var g, h, w, v;\n    const f = r.get(t);\n    f && (i(f), ((g = f.homepage) == null ? void 0 : g.length) > 0 && s(\n      r.get(\n        f.homepage\n      )\n    ), ((h = f.seeAlso) == null ? void 0 : h.length) > 0 && d(\n      r.get(\n        f.seeAlso\n      )\n    ), ((w = f.rendering) == null ? void 0 : w.length) > 0 && c(\n      r.get(\n        f.rendering\n      )\n    ), ((v = f.thumbnail) == null ? void 0 : v.length) > 0 && p(\n      r.get(\n        f.thumbnail\n      )\n    ));\n  }, [t, r]), n ? /* @__PURE__ */ o.createElement(ms, null, /* @__PURE__ */ o.createElement(us, null, /* @__PURE__ */ o.createElement(xs, { thumbnail: m, label: n.label }), /* @__PURE__ */ o.createElement(ws, { summary: n.summary }), /* @__PURE__ */ o.createElement(ps, { metadata: n.metadata }), /* @__PURE__ */ o.createElement(vs, { requiredStatement: n.requiredStatement }), /* @__PURE__ */ o.createElement(ys, { rights: n.rights }), /* @__PURE__ */ o.createElement(fs, { homepage: a }), /* @__PURE__ */ o.createElement(bs, { seeAlso: l }), /* @__PURE__ */ o.createElement(gs, { rendering: u }), /* @__PURE__ */ o.createElement(hs, { id: n.id, htmlLabel: \"IIIF Manifest\" }))) : /* @__PURE__ */ o.createElement(o.Fragment, null);\n};\nfunction Ss(e) {\n  const t = [];\n  return e.forEach((r) => {\n    var n;\n    (n = r.informationPanel) != null && n.component && t.push(r);\n  }), { pluginsWithInfoPanel: t };\n}\nconst Cs = ({\n  contentStateAnnotation: e\n}) => {\n  var l, d, u, c, m, p;\n  const t = z(), { vault: r } = t;\n  if (!e) return /* @__PURE__ */ o.createElement(o.Fragment, null);\n  const n = (\n    // @ts-ignore\n    ((l = e == null ? void 0 : e.target) == null ? void 0 : l.source) || (e == null ? void 0 : e.target)\n  ), i = r.get(n == null ? void 0 : n.id), a = he(r, i.id), s = (d = a == null ? void 0 : a[0]) != null && d.service ? ((c = (u = a == null ? void 0 : a[0]) == null ? void 0 : u.service[0]) == null ? void 0 : c.id) || ((p = (m = a == null ? void 0 : a[0]) == null ? void 0 : m.service[0]) == null ? void 0 : p[\"@id\"]) : void 0;\n  return /* @__PURE__ */ o.createElement(Rt, { \"data-testid\": \"annotation-page\" }, i && /* @__PURE__ */ o.createElement(\"header\", null, /* @__PURE__ */ o.createElement(ce, { label: i.label }), \" \", /* @__PURE__ */ o.createElement(\"em\", null, \"(Shared)\")), /* @__PURE__ */ o.createElement(\"div\", { \"data-testid\": \"annotation-page-items\" }, /* @__PURE__ */ o.createElement(\n    Tt,\n    {\n      annotation: e,\n      targetResource: s,\n      key: e.id,\n      isContentState: !0\n    }\n  )));\n}, As = 1500, Is = ({\n  activeCanvas: e,\n  annotationResources: t,\n  searchServiceUrl: r,\n  setContentSearchResource: n,\n  contentSearchResource: i\n}) => {\n  var te;\n  const { t: a } = pe(), s = X(), l = z(), {\n    contentStateAnnotation: d,\n    informationPanelResource: u,\n    isAutoScrolling: c,\n    isUserScrolling: m,\n    vault: p,\n    configOptions: f,\n    plugins: g\n  } = l, { informationPanel: h } = f, w = h == null ? void 0 : h.renderAbout, v = h == null ? void 0 : h.renderAnnotation, b = p.get({\n    id: e,\n    type: \"Canvas\"\n  }), E = h == null ? void 0 : h.renderContentSearch, y = h == null ? void 0 : h.renderToggle, S = (\n    // @ts-ignore\n    ((te = d == null ? void 0 : d.target) == null ? void 0 : te.source) || (d == null ? void 0 : d.target)\n  ), C = !!d && // @ts-ignore\n  S.id === e, A = !!(t != null && t.length) || C, { pluginsWithInfoPanel: I } = Ss(g);\n  function O(L, J) {\n    var G, oe;\n    const K = (G = L == null ? void 0 : L.informationPanel) == null ? void 0 : G.component;\n    return K === void 0 ? /* @__PURE__ */ o.createElement(o.Fragment, null) : /* @__PURE__ */ o.createElement(_e, { key: J, value: L.id }, /* @__PURE__ */ o.createElement(St, { FallbackComponent: It }, /* @__PURE__ */ o.createElement(\n      K,\n      {\n        ...(oe = L == null ? void 0 : L.informationPanel) == null ? void 0 : oe.componentProps,\n        canvas: b,\n        useViewerDispatch: X,\n        useViewerState: z\n      }\n    )));\n  }\n  const $ = () => {\n    s({\n      type: \"updateInformationOpen\",\n      isInformationOpen: !1\n    });\n  };\n  T(() => {\n    [\n      \"manifest-about\",\n      \"manifest-annotations\",\n      \"manifest-content-search\"\n    ].includes(String(h == null ? void 0 : h.defaultTab)) ? s({\n      type: \"updateInformationPanelResource\",\n      informationPanelResource: h == null ? void 0 : h.defaultTab\n    }) : s(C ? {\n      type: \"updateInformationPanelResource\",\n      informationPanelResource: \"manifest-annotations\"\n    } : {\n      type: \"updateInformationPanelResource\",\n      informationPanelResource: \"manifest-about\"\n    });\n  }, []), T(() => {\n    A || s({\n      type: \"updateInformationPanelResource\",\n      informationPanelResource: \"manifest-about\"\n    });\n  }, [A]);\n  function F() {\n    if (!c) {\n      clearTimeout(m);\n      const L = setTimeout(() => {\n        s({\n          type: \"updateUserScrolling\",\n          isUserScrolling: void 0\n        });\n      }, As);\n      s({\n        type: \"updateUserScrolling\",\n        isUserScrolling: L\n      });\n    }\n  }\n  const V = (L) => {\n    s({\n      type: \"updateInformationPanelResource\",\n      informationPanelResource: L\n    });\n  };\n  return /* @__PURE__ */ o.createElement(\n    yo,\n    {\n      \"data-testid\": \"information-panel\",\n      defaultValue: u,\n      onValueChange: V,\n      orientation: \"horizontal\",\n      value: u,\n      className: \"clover-viewer-information-panel\"\n    },\n    /* @__PURE__ */ o.createElement(\n      bo,\n      {\n        \"aria-label\": a(\"informationPanelTabs\"),\n        \"data-testid\": \"information-panel-list\"\n      },\n      y && /* @__PURE__ */ o.createElement(\n        $e,\n        {\n          value: \"manifest-back\",\n          \"data-value\": \"manifest-back\",\n          onClick: $,\n          as: \"button\"\n        },\n        a(\"informationPanelTabsClose\")\n      ),\n      w && /* @__PURE__ */ o.createElement($e, { value: \"manifest-about\" }, a(\"informationPanelTabsAbout\")),\n      E && i && /* @__PURE__ */ o.createElement($e, { value: \"manifest-content-search\" }, a(\"informationPanelTabsSearch\")),\n      v && A && /* @__PURE__ */ o.createElement($e, { value: \"manifest-annotations\" }, a(\"informationPanelTabsAnnotations\")),\n      I && I.map((L, J) => {\n        var K;\n        return /* @__PURE__ */ o.createElement($e, { key: J, value: L.id }, /* @__PURE__ */ o.createElement(\n          ce,\n          {\n            label: (K = L.informationPanel) == null ? void 0 : K.label\n          }\n        ));\n      })\n    ),\n    /* @__PURE__ */ o.createElement(xo, { handleScroll: F }, w && /* @__PURE__ */ o.createElement(_e, { value: \"manifest-about\" }, /* @__PURE__ */ o.createElement(Es, null)), E && i && /* @__PURE__ */ o.createElement(_e, { value: \"manifest-content-search\" }, /* @__PURE__ */ o.createElement(\n      ds,\n      {\n        searchServiceUrl: r,\n        setContentSearchResource: n,\n        activeCanvas: e,\n        annotationPage: i\n      }\n    )), v && t && /* @__PURE__ */ o.createElement(_e, { value: \"manifest-annotations\" }, d && C && /* @__PURE__ */ o.createElement(\n      Cs,\n      {\n        contentStateAnnotation: d\n      }\n    ), t.map((L) => /* @__PURE__ */ o.createElement(\n      os,\n      {\n        key: L.id,\n        annotationPage: L\n      }\n    ))), I && I.map(\n      (L, J) => O(L, J)\n    ))\n  );\n}, Rs = () => /* @__PURE__ */ o.createElement(\n  \"path\",\n  {\n    fill: \"none\",\n    stroke: \"currentColor\",\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    strokeWidth: \"32\",\n    d: \"M256 112v288M400 256H112\"\n  }\n), Ts = () => /* @__PURE__ */ o.createElement(o.Fragment, null, /* @__PURE__ */ o.createElement(\"path\", { d: \"M232 416a23.88 23.88 0 01-14.2-4.68 8.27 8.27 0 01-.66-.51L125.76 336H56a24 24 0 01-24-24V200a24 24 0 0124-24h69.75l91.37-74.81a8.27 8.27 0 01.66-.51A24 24 0 01256 120v272a24 24 0 01-24 24zm-106.18-80zm-.27-159.86zM320 336a16 16 0 01-14.29-23.19c9.49-18.87 14.3-38 14.3-56.81 0-19.38-4.66-37.94-14.25-56.73a16 16 0 0128.5-14.54C346.19 208.12 352 231.44 352 256c0 23.86-6 47.81-17.7 71.19A16 16 0 01320 336z\" }), /* @__PURE__ */ o.createElement(\"path\", { d: \"M368 384a16 16 0 01-13.86-24C373.05 327.09 384 299.51 384 256c0-44.17-10.93-71.56-29.82-103.94a16 16 0 0127.64-16.12C402.92 172.11 416 204.81 416 256c0 50.43-13.06 83.29-34.13 120a16 16 0 01-13.87 8z\" }), /* @__PURE__ */ o.createElement(\"path\", { d: \"M416 432a16 16 0 01-13.39-24.74C429.85 365.47 448 323.76 448 256c0-66.5-18.18-108.62-45.49-151.39a16 16 0 1127-17.22C459.81 134.89 480 181.74 480 256c0 64.75-14.66 113.63-50.6 168.74A16 16 0 01416 432z\" })), $s = () => /* @__PURE__ */ o.createElement(\"path\", { d: \"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z\" }), ks = () => /* @__PURE__ */ o.createElement(o.Fragment, null, /* @__PURE__ */ o.createElement(\n  \"path\",\n  {\n    d: \"M336 176h40a40 40 0 0140 40v208a40 40 0 01-40 40H136a40 40 0 01-40-40V216a40 40 0 0140-40h40\",\n    fill: \"none\",\n    stroke: \"currentColor\",\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    strokeWidth: \"32\"\n  }\n), /* @__PURE__ */ o.createElement(\n  \"path\",\n  {\n    fill: \"none\",\n    stroke: \"currentColor\",\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    strokeWidth: \"32\",\n    d: \"M176 272l80 80 80-80M256 48v288\"\n  }\n)), Ms = () => /* @__PURE__ */ o.createElement(\"path\", { d: \"M416 64H96a64.07 64.07 0 00-64 64v256a64.07 64.07 0 0064 64h320a64.07 64.07 0 0064-64V128a64.07 64.07 0 00-64-64zm-80 64a48 48 0 11-48 48 48.05 48.05 0 0148-48zM96 416a32 32 0 01-32-32v-67.63l94.84-84.3a48.06 48.06 0 0165.8 1.9l64.95 64.81L172.37 416zm352-32a32 32 0 01-32 32H217.63l121.42-121.42a47.72 47.72 0 0161.64-.16L448 333.84z\" }), Os = () => /* @__PURE__ */ o.createElement(\"path\", { d: \"M464 384.39a32 32 0 01-13-2.77 15.77 15.77 0 01-2.71-1.54l-82.71-58.22A32 32 0 01352 295.7v-79.4a32 32 0 0113.58-26.16l82.71-58.22a15.77 15.77 0 012.71-1.54 32 32 0 0145 29.24v192.76a32 32 0 01-32 32zM268 400H84a68.07 68.07 0 01-68-68V180a68.07 68.07 0 0168-68h184.48A67.6 67.6 0 01336 179.52V332a68.07 68.07 0 01-68 68z\" }), an = x(\"svg\", {\n  display: \"inline-flex\",\n  variants: {\n    isLarge: {\n      true: {\n        height: \"4rem\",\n        width: \"4rem\"\n      }\n    },\n    isMedium: {\n      true: {\n        height: \"2rem\",\n        width: \"2rem\"\n      }\n    },\n    isSmall: {\n      true: {\n        height: \"1rem\",\n        width: \"1rem\"\n      }\n    }\n  }\n}), Ps = ({ children: e }) => /* @__PURE__ */ o.createElement(\"title\", null, e), j = (e) => /* @__PURE__ */ o.createElement(\n  an,\n  {\n    ...e,\n    \"data-testid\": \"icon-svg\",\n    role: \"img\",\n    viewBox: \"0 0 512 512\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  },\n  e.children\n);\nj.Title = Ps;\nj.Add = Rs;\nj.Audio = Ts;\nj.Close = $s;\nj.Download = ks;\nj.Image = Ms;\nj.Video = Os;\nconst Ls = Gr({\n  \"0%\": { opacity: 0, transform: \"translateY(1rem)\" },\n  \"100%\": { opacity: 1, transform: \"translateY(0)\" }\n}), Fs = Gr({\n  \"0%\": { opacity: 0, transform: \"translateY(1rem)\" },\n  \"100%\": { opacity: 1, transform: \"translateY(0)\" }\n}), on = x(Oe.Arrow, {\n  fill: \"$secondaryAlt\"\n}), _s = x(Oe.Close, {\n  position: \"absolute\",\n  right: \"0\",\n  top: \"0\",\n  padding: \"0.5rem\",\n  margin: \"0\",\n  cursor: \"pointer\",\n  border: \"none\",\n  background: \"none\",\n  fill: \"inherit\",\n  \"&:hover\": {\n    opacity: \"0.75\"\n  }\n}), zs = x(Oe.Content, {\n  border: \"none\",\n  backgroundColor: \"white\",\n  fill: \"inhrerit\",\n  padding: \"1rem 2rem 1rem 1rem\",\n  width: \"auto\",\n  minWidth: \"200px\",\n  maxWidth: \"350px\",\n  borderRadius: \"3px\",\n  boxShadow: \"5px 5px 13px #0002\",\n  /**\n   * Animate toggle\n   */\n  animationDuration: \"0.3s\",\n  animationTimingFunction: \"cubic-bezier(0.16, 1, 0.3, 1)\",\n  '&[data-side=\"top\"]': { animationName: Fs },\n  '&[data-side=\"bottom\"]': { animationName: Ls },\n  /**\n   *\n   */\n  '&[data-align=\"end\"]': {\n    [`& ${on}`]: {\n      margin: \"0 0.7rem\"\n    }\n  }\n}), Ds = x(Oe.Trigger, {\n  display: \"inline-flex\",\n  padding: \"0.5rem 0\",\n  margin: \"0 0.5rem 0 0\",\n  cursor: \"pointer\",\n  border: \"none\",\n  background: \"none\",\n  \"> button, > span\": {\n    margin: \"0\"\n  }\n}), Bs = x(Oe.Root, {\n  boxSizing: \"content-box\"\n}), Hs = (e) => /* @__PURE__ */ o.createElement(Ds, { ...e }, e.children), Ws = (e) => /* @__PURE__ */ o.createElement(zs, { ...e, sideOffset: 5, collisionPadding: 21 }, /* @__PURE__ */ o.createElement(on, null), /* @__PURE__ */ o.createElement(_s, null, /* @__PURE__ */ o.createElement(j, { isSmall: !0 }, /* @__PURE__ */ o.createElement(j.Close, null))), e.children), Ce = ({ children: e }) => /* @__PURE__ */ o.createElement(Bs, null, e);\nCe.Trigger = Hs;\nCe.Content = Ws;\nconst Ve = x(\"div\", {\n  // Reset\n  boxSizing: \"border-box\",\n  // Custom\n  display: \"inline-flex\",\n  alignItems: \"center\",\n  borderRadius: \"2px\",\n  padding: \"$1\",\n  marginBottom: \"$2\",\n  marginRight: \"$2\",\n  backgroundColor: \"$lightGrey\",\n  color: \"$richBlack50\",\n  textTransform: \"uppercase\",\n  fontSize: \"$2\",\n  objectFit: \"contain\",\n  lineHeight: \"1em !important\",\n  \"&:last-child\": {\n    marginRight: \"0\"\n  },\n  [`${an}`]: {\n    position: \"absolute\",\n    left: \"$1\",\n    height: \"$3\",\n    width: \"$3\"\n  },\n  variants: {\n    isIcon: {\n      true: { position: \"relative\", paddingLeft: \"$5\" }\n    }\n  }\n}), Be = x(\"span\", {\n  background: \"transparent\",\n  opacity: \"0\",\n  border: \"3px solid transparent\",\n  position: \"absolute\",\n  width: \"100%\",\n  height: \"100%\",\n  zIndex: \"0\",\n  left: \"0\",\n  top: \"0\",\n  transition: \"$all\"\n}), sn = x(\"span\", {\n  display: \"flex\"\n}), Ns = x(\"span\", {\n  display: \"flex\",\n  width: \"1.2111rem\",\n  height: \"0.7222rem\"\n}), Vs = x(\"span\", {\n  display: \"inline-flex\",\n  marginLeft: \"5px\",\n  marginBottom: \"-1px\"\n}), He = x(\"div\", {\n  position: \"relative\",\n  display: \"flex\",\n  backgroundColor: \"$secondaryAlt\",\n  width: \"inherit\",\n  height: \"100px\",\n  overflow: \"hidden\",\n  borderRadius: \"3px\",\n  \".media-thumbnail-lazyload\": {\n    width: \"100%\",\n    height: \"100%\",\n    borderRadius: \"3px\"\n  },\n  img: {\n    width: \"100%\",\n    height: \"100%\",\n    objectFit: \"cover\",\n    objectPosition: \"top center\",\n    filter: \"blur(0)\",\n    transform: \"scale3d(1, 1, 1)\",\n    borderRadius: \"3px\",\n    transition: \"$all\",\n    color: \"transparent\"\n  },\n  [`& ${sn}`]: {\n    position: \"absolute\",\n    right: \"0\",\n    bottom: \"0\",\n    [`& ${Ve}`]: {\n      display: \"none\",\n      margin: \"0\",\n      paddingLeft: \"0\",\n      fontSize: \"0.7222rem\",\n      backgroundColor: \"#000d\",\n      color: \"$secondary\",\n      fill: \"$secondary\",\n      borderBottomLeftRadius: \"0\",\n      borderTopRightRadius: \"0\"\n    }\n  }\n}), vt = x(Ge.Item, {\n  display: \"flex\",\n  flexShrink: \"0\",\n  padding: \"0\",\n  cursor: \"pointer\",\n  background: \"none\",\n  border: \"none\",\n  fontFamily: \"inherit\",\n  lineHeight: \"1.25em\",\n  fontSize: \"1rem\",\n  textAlign: \"left\",\n  figure: {\n    margin: \"0\",\n    width: \"161.8px\",\n    figcaption: {\n      marginTop: \"0.5rem\",\n      fontWeight: \"400\",\n      fontSize: \"0.8333rem\",\n      display: \"-webkit-box\",\n      overflow: \"hidden\",\n      MozBoxOrient: \"vertical\",\n      WebkitBoxOrient: \"vertical\",\n      WebkitLineClamp: \"5\",\n      \"@sm\": {\n        fontSize: \"0.8333rem\"\n      }\n    }\n  }\n}), Us = x(Ge.Root, {\n  display: \"flex\",\n  flexDirection: \"row\",\n  flexGrow: \"1\",\n  overflowX: \"scroll\",\n  position: \"relative\",\n  zIndex: \"0\",\n  gap: \"1rem\",\n  padding: \"1.618rem 0\"\n}), qs = x(\"div\", {\n  display: \"flex\",\n  flexDirection: \"row\",\n  \"&[data-active='true']\": {\n    [`& ${vt}`]: {\n      figcaption: {\n        fontWeight: \"700\"\n      },\n      [`& ${Ve}`]: {\n        backgroundColor: \"$accent\"\n      },\n      [`& ${Be}`]: {\n        background: \"#0003\",\n        opacity: \"1\",\n        borderBottom: \"3px solid $accent\"\n      },\n      \"&:first-of-type\": {\n        [`& ${Be}`]: {\n          borderRight: \"unset\"\n        }\n      },\n      \"&:last-of-type\": {\n        [`& ${Be}`]: {\n          borderLeft: \"unset\"\n        }\n      }\n    }\n  },\n  [`& ${vt}`]: {\n    [`& ${He}`]: {\n      borderRadius: \"unset\"\n    },\n    \"&:first-of-type\": {\n      [`& ${He}`]: {\n        borderTopLeftRadius: \"3px\",\n        borderBottomLeftRadius: \"3px\"\n      }\n    },\n    \"&:last-of-type\": {\n      [`& ${He}`]: {\n        borderTopRightRadius: \"3px\",\n        borderBottomRightRadius: \"3px\"\n      },\n      [`& ${Ve}`]: {\n        display: \"flex\"\n      }\n    }\n  }\n}), ln = x(\"div\", {\n  position: \"absolute\",\n  right: \"1rem\",\n  top: \"1rem\",\n  display: \"flex\",\n  justifyContent: \"flex-end\",\n  zIndex: \"1\"\n}), js = x(\"input\", {\n  flexGrow: \"1\",\n  border: \"none\",\n  backgroundColor: \"$secondaryMuted\",\n  color: \"$primary\",\n  marginRight: \"1rem\",\n  height: \"2rem\",\n  padding: \"0 1rem\",\n  borderRadius: \"2rem\",\n  fontFamily: \"inherit\",\n  fontSize: \"1rem\",\n  lineHeight: \"1rem\",\n  boxShadow: \"inset 1px 1px 2px #0001\",\n  \"&::placeholder\": {\n    color: \"$primaryMuted\"\n  }\n}), at = x(\"button\", {\n  display: \"flex\",\n  background: \"none\",\n  border: \"none\",\n  width: \"2rem !important\",\n  height: \"2rem !important\",\n  padding: \"0\",\n  margin: \"0\",\n  fontWeight: \"700\",\n  borderRadius: \"2rem\",\n  backgroundColor: \"$accent\",\n  color: \"$secondary\",\n  cursor: \"pointer\",\n  boxSizing: \"content-box !important\",\n  transition: \"$all\",\n  svg: {\n    height: \"60%\",\n    width: \"60%\",\n    padding: \"20%\",\n    fill: \"$secondary\",\n    stroke: \"$secondary\",\n    opacity: \"1\",\n    filter: \"drop-shadow(5px 5px 5px #000D)\",\n    boxSizing: \"inherit\",\n    transition: \"$all\"\n  },\n  \"&:disabled\": {\n    backgroundColor: \"transparent\",\n    boxShadow: \"none\",\n    svg: { opacity: \"0.25\" }\n  }\n}), Gs = x(\"div\", {\n  display: \"flex\",\n  marginRight: \"0.618rem\",\n  backgroundColor: \"$accentAlt\",\n  borderRadius: \"2rem\",\n  boxShadow: \"5px 5px 5px #0003\",\n  color: \"$secondary\",\n  alignItems: \"center\",\n  \"> span\": {\n    display: \"flex\",\n    margin: \"0 0.5rem\",\n    fontSize: \"0.7222rem\",\n    fontWeight: \"bold\",\n    gap: \"0.25rem\",\n    em: {\n      opacity: \"0.25\"\n    }\n  }\n}), Qs = x(\"div\", {\n  display: \"flex\",\n  position: \"relative\",\n  zIndex: \"1\",\n  width: \"100%\",\n  padding: \"0\",\n  transition: \"$all\",\n  variants: {\n    isToggle: {\n      true: {\n        paddingTop: \"2.618rem\",\n        [`& ${ln}`]: {\n          width: \"calc(100% - 2rem)\",\n          \"@sm\": {\n            width: \"calc(100% - 2rem)\"\n          }\n        }\n      }\n    }\n  }\n}), Js = (e, t) => {\n  T(() => {\n    function r(n) {\n      n.key === e && t();\n    }\n    return window.addEventListener(\"keyup\", r), () => window.removeEventListener(\"keyup\", r);\n  }, []);\n}, Ys = ({ title: e }) => /* @__PURE__ */ o.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", viewBox: \"0 0 512 512\" }, /* @__PURE__ */ o.createElement(\"title\", null, e), /* @__PURE__ */ o.createElement(\n  \"path\",\n  {\n    fill: \"none\",\n    stroke: \"currentColor\",\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    strokeMiterlimit: \"10\",\n    strokeWidth: \"45\",\n    d: \"M244 400L100 256l144-144M120 256h292\"\n  }\n)), Xs = ({ title: e }) => /* @__PURE__ */ o.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", viewBox: \"0 0 512 512\" }, /* @__PURE__ */ o.createElement(\"title\", null, e), /* @__PURE__ */ o.createElement(\n  \"path\",\n  {\n    fill: \"none\",\n    stroke: \"currentColor\",\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    strokeMiterlimit: \"10\",\n    strokeWidth: \"45\",\n    d: \"M268 112l144 144-144 144M392 256H100\"\n  }\n)), Zs = ({ title: e }) => /* @__PURE__ */ o.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", viewBox: \"0 0 512 512\" }, /* @__PURE__ */ o.createElement(\"title\", null, e), /* @__PURE__ */ o.createElement(\"path\", { d: \"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z\" })), Ks = ({ title: e }) => /* @__PURE__ */ o.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", viewBox: \"0 0 512 512\" }, /* @__PURE__ */ o.createElement(\"title\", null, e), /* @__PURE__ */ o.createElement(\"path\", { d: \"M456.69 421.39L362.6 327.3a173.81 173.81 0 0034.84-104.58C397.44 126.38 319.06 48 222.72 48S48 126.38 48 222.72s78.38 174.72 174.72 174.72A173.81 173.81 0 00327.3 362.6l94.09 94.09a25 25 0 0035.3-35.3zM97.92 222.72a124.8 124.8 0 11124.8 124.8 124.95 124.95 0 01-124.8-124.8z\" })), el = ({\n  handleCanvasToggle: e,\n  handleFilter: t,\n  activeIndex: r,\n  canvasLength: n\n}) => {\n  const [i, a] = P(!1), [s, l] = P(!1), [d, u] = P(!1), { t: c } = pe();\n  T(() => {\n    u(r === 0), r === n - 1 ? l(!0) : l(!1);\n  }, [r, n]), Js(\"Escape\", () => {\n    a(!1), t(\"\");\n  });\n  const m = () => {\n    a((f) => !f), t(\"\");\n  }, p = (f) => t(f.target.value);\n  return /* @__PURE__ */ o.createElement(\n    Qs,\n    {\n      isToggle: i,\n      className: \"clover-viewer-media-controls\"\n    },\n    /* @__PURE__ */ o.createElement(ln, null, i && /* @__PURE__ */ o.createElement(\n      js,\n      {\n        autoFocus: !0,\n        onChange: p,\n        placeholder: c(\"commonSearchPlaceholder\")\n      }\n    ), !i && /* @__PURE__ */ o.createElement(Gs, { className: \"clover-viewer-media-navigation\" }, /* @__PURE__ */ o.createElement(\n      at,\n      {\n        onClick: () => e(-1),\n        disabled: d,\n        type: \"button\"\n      },\n      /* @__PURE__ */ o.createElement(Ys, { title: c(\"commonPrevious\") })\n    ), /* @__PURE__ */ o.createElement(\"span\", null, r + 1, \" \", /* @__PURE__ */ o.createElement(\"em\", null, \"/\"), \" \", n), /* @__PURE__ */ o.createElement(\n      at,\n      {\n        onClick: () => e(1),\n        disabled: s,\n        type: \"button\"\n      },\n      /* @__PURE__ */ o.createElement(Xs, { title: c(\"commonNext\") })\n    )), /* @__PURE__ */ o.createElement(\n      at,\n      {\n        onClick: m,\n        type: \"button\",\n        className: \"clover-viewer-media-search\"\n      },\n      i ? /* @__PURE__ */ o.createElement(Zs, { title: c(\"commonClose\") }) : /* @__PURE__ */ o.createElement(Ks, { title: c(\"commonSearch\") })\n    ))\n  );\n}, tl = ({\n  children: e,\n  rootMargin: t = \"100px\",\n  attributes: r = {},\n  isVisibleCallback: n = () => {\n  }\n}) => {\n  const i = Ue(null), [a, s] = P(!1);\n  return T(() => {\n    const l = i.current;\n    if (!l) return;\n    const d = new IntersectionObserver(\n      ([u]) => {\n        u.isIntersecting && (n(!0), s(!0), d.disconnect());\n      },\n      { rootMargin: t }\n    );\n    return d.observe(l), () => d.disconnect();\n  }, [i]), /* @__PURE__ */ o.createElement(\"div\", { ref: i, ...r }, a ? e : null);\n};\nvar ze = {}, Mt = {\n  get(e) {\n    return e;\n  },\n  setMetaValue([e, t, r], n) {\n    const i = Mt.getResourceMeta(e, t), a = i ? i[r] : void 0, s = typeof n == \"function\" ? n(a) : n;\n    ze[e] = {\n      ...ze[e] || {},\n      [t]: {\n        ...(ze[e] || {})[t] || {},\n        [r]: s\n      }\n    };\n  },\n  getResourceMeta: (e, t) => {\n    const r = ze[e];\n    if (r)\n      return t ? r[t] : r;\n  },\n  async load(e) {\n    const t = typeof e == \"string\" ? e : e.id;\n    return fetch(t).then((r) => r.json());\n  },\n  requestStatus(e) {\n  }\n}, rl = Object.defineProperty, nl = (e, t, r) => t in e ? rl(e, t, { enumerable: !0, configurable: !0, writable: !0, value: r }) : e[t] = r, De = (e, t, r) => (nl(e, typeof t != \"symbol\" ? t + \"\" : t, r), r);\nfunction xe(e) {\n  return e.endsWith(\"info.json\") ? e : e.endsWith(\"/\") ? `${e}info.json` : `${e}/info.json`;\n}\nvar il = \"http://library.stanford.edu/iiif/image-api/compliance.html#level0\", cn = \"http://library.stanford.edu/iiif/image-api/compliance.html#level1\", dn = \"http://library.stanford.edu/iiif/image-api/compliance.html#level2\", al = \"http://library.stanford.edu/iiif/image-api/conformance.html#level0\", un = \"http://library.stanford.edu/iiif/image-api/conformance.html#level1\", mn = \"http://library.stanford.edu/iiif/image-api/conformance.html#level2\", ol = \"http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0\", fn = \"http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level1\", hn = \"http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2\", sl = \"http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level0\", pn = \"http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level1\", gn = \"http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level2\", ll = \"http://iiif.io/api/image/1/level0.json\", cl = \"http://iiif.io/api/image/1/profiles/level0.json\", vn = \"http://iiif.io/api/image/1/level1.json\", yn = \"http://iiif.io/api/image/1/profiles/level1.json\", bn = \"http://iiif.io/api/image/1/level2.json\", wn = \"http://iiif.io/api/image/1/profiles/level2.json\", dl = \"http://iiif.io/api/image/2/level0.json\", ul = \"http://iiif.io/api/image/2/profiles/level0.json\", xn = \"http://iiif.io/api/image/2/level1.json\", En = \"http://iiif.io/api/image/2/profiles/level1.json\", Sn = \"http://iiif.io/api/image/2/level2.json\", Cn = \"http://iiif.io/api/image/2/profiles/level2.json\", ml = \"level0\", An = \"level1\", In = \"level2\", fl = \"http://iiif.io/api/image/2/level0\", Rn = \"http://iiif.io/api/image/2/level1\", Tn = \"http://iiif.io/api/image/2/level2\", hl = \"https://iiif.io/api/image/1.1/compliance/#level0\", $n = \"https://iiif.io/api/image/1.1/compliance/#level1\", kn = \"https://iiif.io/api/image/1.1/compliance/#level2\", Mn = [Tn, dn, mn, hn, gn, bn, wn, Sn, Cn, In, kn], On = [...Mn, Rn, cn, un, fn, pn, vn, yn, xn, En, An, $n], pl = [fl, Rn, Tn, il, cn, dn, al, un, mn, ol, fn, hn, sl, pn, gn, ll, cl, vn, yn, bn, wn, dl, ul, xn, En, Sn, Cn, ml, An, In, hl, $n, kn], gl = { extraFormats: [\"jpg\"], extraQualities: [\"default\"], extraFeatures: [\"sizeByWhListed\"] }, vl = { extraFormats: [\"jpg\"], extraQualities: [\"default\"], extraFeatures: [\"baseUriRedirect\", \"cors\", \"jsonldMediaType\", \"regionByPx\", \"regionSquare\", \"sizeByWhListed\", \"sizeByH\", \"sizeByW\", \"sizeByWh\"] }, yl = { extraFormats: [\"jpg\", \"png\"], extraQualities: [\"default\"], extraFeatures: [\"baseUriRedirect\", \"cors\", \"jsonldMediaType\", \"regionByPct\", \"regionByPx\", \"regionSquare\", \"rotationBy90s\", \"sizeByWhListed\", \"sizeByConfinedWh\", \"sizeByH\", \"sizeByPct\", \"sizeByW\", \"sizeByWh\"] };\nfunction bl(e) {\n  return Mn.indexOf(e) !== -1 ? yl : On.indexOf(e) !== -1 ? vl : gl;\n}\nfunction wl(e) {\n  let t = e ? Array.isArray(e.profile) ? e.profile : [e.profile] : [], r = { extraQualities: [], extraFormats: [], extraFeatures: [] };\n  for (let n of t) if (typeof n == \"string\" && (n = bl(n)), !!n) {\n    if (n.formats) for (let i of n.formats) r.extraFormats.indexOf(i) === -1 && r.extraFormats.push(i);\n    if (n.qualities) for (let i of n.qualities) r.extraQualities.indexOf(i) === -1 && r.extraQualities.push(i);\n    if (n.supports) for (let i of n.supports) r.extraFeatures.indexOf(i) === -1 && r.extraFeatures.push(i);\n    if (n.maxHeight && (r.maxHeight = n.maxHeight), n.maxWidth && (r.maxWidth = n.maxWidth), n.maxArea && (r.maxArea = n.maxArea), n.extraFormats) for (let i of n.extraFormats) r.extraFormats.indexOf(i) === -1 && r.extraFormats.push(i);\n    if (n.extraQualities) for (let i of n.extraQualities) r.extraQualities.indexOf(i) === -1 && r.extraQualities.push(i);\n    if (n.extraFeatures) for (let i of n.extraFeatures) r.extraFeatures.indexOf(i) === -1 && r.extraFeatures.push(i);\n    n.maxHeight && (r.maxHeight = n.maxHeight), n.maxWidth && (r.maxWidth = n.maxWidth), n.maxArea && (r.maxArea = n.maxArea);\n  }\n  if (e.extraFormats) for (let n of e.extraFormats) r.extraFormats.indexOf(n) === -1 && r.extraFormats.push(n);\n  if (e.extraFeatures) for (let n of e.extraFeatures) r.extraFeatures.indexOf(n) === -1 && r.extraFeatures.push(n);\n  if (e.extraQualities) for (let n of e.extraQualities) r.extraQualities.indexOf(n) === -1 && r.extraQualities.push(n);\n  return r;\n}\nfunction xl(e) {\n  try {\n    if (e === \"full\") return { full: !0 };\n    if (e === \"square\") return { square: !0 };\n    let t = e.startsWith(\"pct:\"), r = e.substr(t ? 4 : 0).split(\",\").map((n) => parseFloat(n));\n    return { x: r[0], y: r[1], w: r[2], h: r[3], percent: t };\n  } catch {\n    throw new Error(\"Expected 'full', 'square' or 'x,y,w,h'. Found \" + e);\n  }\n}\nfunction El(e) {\n  let t = { upscaled: !1, max: !1, confined: !1 };\n  if (e[0] === \"^\" && (t.upscaled = !0, e = e.slice(1)), e === \"max\" || e === \"full\") return t.max = !0, t.serialiseAsFull = e === \"full\", t;\n  if (e[0] === \"!\" && (t.confined = !0, e = e.slice(1)), e[0] === \"p\") return t.percentScale = parseFloat(e.slice(4)), t;\n  let r = e.split(\",\").map((n) => n.trim());\n  return r.length && typeof r[0] < \"u\" && (r[0] !== \"\" && (t.width = parseInt(r[0], 10)), typeof r[1] < \"u\" && r[1] !== \"\" ? (t.height = parseInt(r[1], 10), t.version = 2) : t.version = 3), t;\n}\nfunction Sl(e) {\n  let t = { angle: 0 };\n  if (e[0] === \"!\" && (t.mirror = !0, e = e.substr(1)), t.angle = parseFloat(e) % 360, Number.isNaN(t.angle)) throw new Error(`Invalid rotation ${e}`);\n  return t;\n}\nfunction Cl(e, t = \"\") {\n  let r = e.match(/^(([a-zA-Z]+):\\/\\/([^/]+))?((.*)+)/);\n  if (!r) throw new Error(`Invalid or unknown input ${e}`);\n  let n = r[2], i = r[3], a = r[4];\n  if (a[0] === \"/\" && (a = a.substring(1)), t.length > 0) {\n    if (t[0] === \"/\" && (t = t.substring(1)), t !== a.substring(0, t.length)) throw new Error(`Path does not start with prefix (path: ${a}, prefix: ${t})`);\n    a = a.substring(t.length);\n  }\n  return { scheme: n, server: i, path: a, prefix: t };\n}\nfunction Al(e, t = \"\") {\n  let { path: r, scheme: n, server: i, prefix: a } = Cl(e, t), s = (r || \"\").split(\"/\").reverse(), [l, d, u, c, ...m] = s, p = m.reverse().filter(Boolean).join(\"/\");\n  if (s.length === 1 || l === \"\") return { type: \"base\", scheme: n, server: i, prefix: a, identifier: p };\n  if (l === \"info.json\") {\n    let [, ...g] = s;\n    return { type: \"info\", scheme: n, server: i, prefix: a, identifier: g.reverse().filter(Boolean).join(\"/\") };\n  }\n  let f = (l || \"\").split(\".\");\n  if (typeof f[1] > \"u\" || typeof f[0] > \"u\" || typeof c > \"u\" || typeof u > \"u\" || typeof d > \"u\") throw new Error(\"Invalid image request\");\n  return { type: \"image\", scheme: n, server: i, prefix: a, identifier: p, originalPath: r, region: xl(c), size: El(u), rotation: Sl(d), quality: f[0], format: f[1] };\n}\nfunction Il(e) {\n  let t = Al(xe(e.id));\n  if (t.type !== \"info\") throw new Error(\"Invalid service URL\");\n  let r = wl(e);\n  return { identifier: t.identifier, originalPath: \"\", server: t.server, prefix: t.prefix, scheme: t.scheme, type: \"image\", quality: r.extraQualities.indexOf(\"default\") === -1 ? r.extraQualities[0] : \"default\", region: { full: !0 }, size: { max: !0, upscaled: !1, confined: !1 }, format: \"jpg\", rotation: { angle: 0 } };\n}\nfunction Rl(e, t, r) {\n  let n = r.length, i = [];\n  for (let a = 0; a < n; a++) {\n    let s = r[a];\n    if (s) {\n      let l = s.width;\n      i.push(e / l);\n    }\n  }\n  return i;\n}\nfunction Tl(e, t, r) {\n  let n = r.length, i = [];\n  for (let a = 0; a < n; a++) {\n    let s = r[a];\n    s && i.push({ width: Math.floor(e / s), height: Math.floor(t / s) });\n  }\n  return i;\n}\nfunction H(e) {\n  if (e[\"@id\"]) return e[\"@id\"];\n  if (e.id) return e.id;\n}\nfunction Xe(e) {\n  if (!e || !e.profile || !H(e)) return !1;\n  let t = Array.isArray(e.profile) ? e.profile : [e.profile];\n  for (let r of t) if (typeof r == \"string\" && pl.indexOf(r) !== -1) return !0;\n  return !1;\n}\nfunction $l(e) {\n  if (!Xe(e)) return !1;\n  let t = Array.isArray(e.profile) ? e.profile : [e.profile];\n  for (let r of t) if (typeof r == \"string\") {\n    if (On.indexOf(r) !== -1) return !0;\n  } else {\n    let n = [...r.supports || [], ...r.extraFeatures || []];\n    if (n.indexOf(\"regionByPx\") !== -1 && (n.indexOf(\"sizeByW\") !== -1 || n.indexOf(\"sizeByWh\") !== -1)) return !0;\n  }\n  return !1;\n}\nfunction We(e, t) {\n  if (t && t.profile) {\n    let r = t.profile;\n    if (r) {\n      let n = Array.isArray(r) ? r : [r];\n      return n.includes(`level${e}`) || n.includes(`http://iiif.io/api/image/2/level${e}.json`) || n.includes(`http://iiif.io/api/image/1/level${e}.json`) || n.includes(`http://iiif.io/api/image/1/profiles/level${e}.json`);\n    }\n  }\n  return !1;\n}\nfunction yt(e) {\n  return Xe(e) ? We(0, e) ? 0 : We(1, e) ? 1 : We(2, e) ? 2 : null : null;\n}\nfunction Pn(e) {\n  return (e[\"@context\"] ? Array.isArray(e[\"@context\"]) ? e[\"@context\"] : [e[\"@context\"]] : []).indexOf(\"http://iiif.io/api/image/3/context.json\") !== -1;\n}\nfunction kl(e) {\n  if (!$l(e)) return [];\n  let t = [], r = Array.isArray(e.profile) ? e.profile : [e.profile], n = r.length;\n  for (let i = 0; i < n; i++) {\n    let a = r[i];\n    if (a && typeof a != \"string\" && (a.maxHeight || a.maxWidth)) return [{ id: H(e), type: \"variable\", minWidth: 0, minHeight: 0, maxHeight: a.maxHeight || a.maxWidth, maxWidth: a.maxWidth || a.maxHeight, level: yt(e), version: e[\"@context\"] === \"http://iiif.io/api/image/3/context.json\" ? 3 : 2 }];\n  }\n  if (e.tiles) {\n    let i = e.tiles.length;\n    for (let a = 0; a < i; a++) {\n      let s = e.tiles[a];\n      s && (s.height || s.width) && t.push({ id: H(e), type: \"variable\", minHeight: 0, minWidth: 0, maxHeight: s.height || s.width, maxWidth: s.width, level: yt(e), version: Pn(e) ? 3 : 2 });\n    }\n  }\n  return t;\n}\nfunction qt(e) {\n  let t = /^.*\\/(full)\\/(((\\d+),(\\d+)?)|max)\\/(\\d+)\\/default\\.(jpg|png|jpeg)$/, r = e.match(t);\n  if (r && r[4] && r[5]) {\n    let n = r[1], i = parseInt(r[4], 10), a = parseInt(r[5], 10), s = r[7];\n    if ((n === \"max\" || n === \"full\") && i && a && s) return { type: \"fixed\", id: e, height: a, width: i };\n  }\n  return { type: \"unknown\", id: e };\n}\nfunction Ml(e) {\n  if (e[\"@type\"]) return e[\"@type\"];\n  if (e.type) return e.type;\n}\nfunction bt(e) {\n  if (typeof e == \"string\") return qt(e);\n  let t = Ml(e);\n  if (t !== \"Image\" && t !== \"sc:Image\") return null;\n  let r = e, n = H(r);\n  return n ? n && r.width && r.height ? { id: n, type: \"fixed\", width: r.width, height: r.height, unsafe: !0 } : qt(n) : null;\n}\nfunction Ol(e) {\n  return Xe(e) ? (e && e.sizes ? e.sizes : []).map((t) => ({ id: H(e), type: \"fixed-service\", height: t.height, width: t.width, level: yt(e), version: Pn(e) ? 3 : 2 })) : [];\n}\nfunction jt(e) {\n  let t = [], r = e.length;\n  for (let n = 0; n < r; n++) {\n    let i = e[n];\n    if (!i) continue;\n    let a = Ol(i);\n    a.length && t.push(...a);\n    let s = kl(i);\n    s.length && t.push(...s);\n  }\n  return t;\n}\nfunction Ln(e) {\n  let t = e.service ? Array.isArray(e.service) ? e.service : [e.service] : [], r = t.length, n = [];\n  for (let i = 0; i < r; i++) Xe(t[i]) && n.push(t[i]);\n  return n;\n}\nfunction Pl(e, t = !0, r) {\n  let n = [], i = bt(e);\n  if (i === null) return n;\n  let a = e;\n  if (n.push(i), t && a && a.width && a.height) {\n    let s = [], l = Ln(a);\n    for (let d of l) {\n      let u = { id: H(d), width: a.width, height: a.height };\n      if (r.canLoadSync(u)) {\n        let c = r.loadServiceSync(u);\n        c && (c.height || (c.height = a.height), c.width || (c.width = a.width), s.push(...jt([c])));\n      }\n    }\n    if (s.length) return n.push(...s), n;\n  }\n  return a.service && n.push(...jt(a.service)), n;\n}\nfunction Ll({ x: e = 0, y: t = 0, w: r, h: n, full: i, square: a, percent: s }) {\n  if (i) return \"full\";\n  if (a) return \"square\";\n  if (typeof r > \"u\" || typeof n > \"u\") throw new Error(\"RegionParameter: invalid region\");\n  let l = `${e},${t},${r},${n}`;\n  return s ? `pct:${l}` : l;\n}\nfunction Fl({ max: e, percentScale: t, upscaled: r, confined: n, width: i, height: a, serialiseAsFull: s, version: l }) {\n  let d = [];\n  return r && d.push(\"^\"), e ? (d.push(s ? \"full\" : \"max\"), d.join(\"\")) : (n && d.push(\"!\"), t && d.push(`pct:${t}`), i && d.push(`${i}`), d.push(\",\"), a && l === 3 && d.push(`${a}`), d.join(\"\"));\n}\nfunction _l(e) {\n  return `${e.mirror ? \"!\" : \"\"}${(e.angle || 0) % 360}`;\n}\nfunction zl(e, t) {\n  let r = e.prefix.startsWith(\"/\") ? e.prefix.substr(1) : e.prefix, n = `${e.scheme}://${e.server}/${r ? `${r}/` : \"\"}${e.identifier}`;\n  if (e.type === \"base\") return n;\n  if (e.type === \"info\") return `${n}/info.json`;\n  let { size: i } = e, { region: a, rotation: s, format: l, quality: d } = e;\n  return [n, Ll(a), Fl(i), _l(s), `${d}.${l}`].filter(Boolean).join(\"/\");\n}\nfunction ot(e, t, r) {\n  let n = Il({ \"@context\": e.version === 3 ? \"http://iiif.io/api/image/3/context.json\" : \"http://iiif.io/api/image/2/context.json\", id: xe(H(e)), profile: e.level === null || typeof e.level > \"u\" ? \"level0\" : `level${e.level}`, type: e.version === 3 ? \"ImageService3\" : \"ImageService2\" });\n  if (n.type !== \"image\") throw new Error(\"Invalid service\");\n  return n.size.max = !1, n.size.width = t, n.size.height = r, { id: zl(n), type: \"fixed\", width: t, height: r || e.height / (e.width || 1) * t, unsafe: e.width > t };\n}\nfunction Ie(e) {\n  let t = e.replace(/(https?:\\/\\/)?(www.)?/i, \"\");\n  return t.indexOf(\"/\") !== -1 ? t.split(\"/\")[0] : t;\n}\nfunction Dl(e, t, r) {\n  let n = e.width ? e.width : e.maxWidth;\n  return r.height <= e.maxHeight && r.width <= e.maxWidth && r.height >= e.minHeight && r.width >= e.minWidth && (!t || Math.abs(r.width - n) < Math.abs(t.width - n));\n}\nfunction Bl(e, t) {\n  let r = [], n = Object.assign({ unsafeImageService: !1, atAnyCost: !0, fallback: !0, minHeight: 64, minWidth: 64, maxHeight: 1 / 0, maxWidth: 1 / 0, returnAllOptions: !1, preferFixedSize: !1, allowUnsafe: !1, explain: !1, height: 0, width: 0 }, e), i = (c, m = 0) => n.explain ? r.push(new Array(m).fill(0).map((p) => \"    \").join(\"\") + c().trim()) : void 0, a = [], s = [], l = null;\n  i(() => `Using configuration: ${JSON.stringify(n, null, 2)}`);\n  let d = (c, m) => {\n    if (i(() => \"Swapping choice\", 3), Dl(n, m, c)) {\n      if (n.preferFixedSize && c.unsafe) {\n        i(() => `We found an image that was marked as unsafe, but it was the best size. (${c.id})`, 4), s.push(c);\n        return;\n      }\n      n.returnAllOptions && m && s.push(m), i(() => `We found a new image that was the best size. (${c.id})`, 4), l = c;\n    } else n.returnAllOptions && s.push(c);\n  };\n  i(() => `The input shows we have ${t.length} list(s) of candidates to choose from.`);\n  let u = t.length;\n  for (let c = 0; c < u; c++) {\n    let m = t[c]();\n    i(() => `Candidate group ${c}: ${JSON.stringify(m, null, 2)}`, 1);\n    let p = m.length;\n    i(() => `Checking candidate list number ${c} and found ${p} potential ways of creating image(s)`, 1);\n    for (let f = 0; f < p; f++) {\n      let g = m[f];\n      if (i(() => `-> Checking candidate ${f}`, 1), g.type === \"unknown\" && n.atAnyCost && (i(() => `We've found an unknown image type, adding this to the \"last resort\" list`, 2), a.push(g)), g.type === \"fixed\" && (g.unsafe ? (i(() => `We've found an unsafe fixed image type, adding this to the \"last resort\" list`, 2), a.push(g)) : (i(() => \"We've found a fixed size image, checking if it matches the request\", 2), d(g, l))), g.type === \"fixed-service\") if (n.unsafeImageService) {\n        i(() => \"Checking for an image from the tile source, without calculating the right height and width (unsafeImageService)\", 2);\n        let h = ot(g, n.width, n.height);\n        d(h, l);\n      } else {\n        i(() => \"Checking for an image from the tile source 3\", 2);\n        let h = ot(g, g.width, g.height);\n        d(h, l);\n      }\n      if (g.type === \"variable\" && g.maxWidth) {\n        let h = ot({ id: g.id, type: \"fixed-service\", width: g.maxWidth, height: g.maxWidth, level: g.level, version: g.version }, g.maxWidth);\n        d(h, l);\n      }\n    }\n    if (l && !n.returnAllOptions) {\n      if (l.unsafe || n.allowUnsafe) continue;\n      i(() => `We found a match in choice list number ${c}, no searching any more`);\n      break;\n    }\n  }\n  return n.atAnyCost && s.length === 0 ? (i(() => l ? `We found an image! ${l.id} of type ${l.type}` : 'We found no images, but \"atAnyCost\" is set, so returning that'), { best: l || a[0] || null, fallback: a.slice(1), log: r }) : n.returnAllOptions ? (i(() => \"Returning all options that we have found\"), { best: (n.atAnyCost ? l || s[0] || a[0] : l || s[0]) || null, fallback: [...s, ...a], log: r }) : (i(() => \"Returning the best image that we found, and a fallback\"), { best: l || s[0] || null, fallback: l ? s : s.slice(1), log: r });\n}\nfunction Hl(e, t, r) {\n  let n = e > t ? e : t, i = r.length, a = [];\n  for (let s = 0; s < i; s++) {\n    let l = r[s];\n    if (!l || l.scaleFactors.length === 0) continue;\n    let d = l.scaleFactors[0];\n    if (!d) continue;\n    let u = n / d, c = [d];\n    for (; u >= l.width; ) d = d * 2, c.push(d), u = u / 2;\n    a.push({ ...l, scaleFactors: c });\n  }\n  return a;\n}\nfunction Wl(e, t) {\n  if (e.length !== t.length) return !1;\n  if (e.length === 0 && t.length === 0) return !0;\n  let r = e.length, n = !0;\n  for (let a = 0; a < r; a++) {\n    let s = e[a], l = t[a];\n    if (s.width !== l.width || s.height !== l.height) {\n      n = !1;\n      break;\n    }\n  }\n  if (n) return !0;\n  let i = 0;\n  for (let a = 0; a < r; a++) for (let s = 0; s < r; s++) if (e[a].width === t[s].width && e[a].height === t[s].height) {\n    i++;\n    break;\n  }\n  return i === r;\n}\nfunction Gt(e) {\n  return We(0, e);\n}\nvar Fn = class {\n  constructor(t = {}) {\n    De(this, \"config\", { verificationsRequired: 1, approximateServices: !1, enableFetching: !0, disableThrottling: !1 }), De(this, \"fetchingCount\", 0), De(this, \"imageServices\", {}), De(this, \"knownImageServers\", {}), this.config = Object.assign(this.config, t);\n  }\n  setConfig(t) {\n    Object.assign(this.config, t);\n  }\n  sample(t, r, n = !0) {\n    let i = Ie(H(t)), a = xe(H(t)), s = this.knownImageServers[i];\n    return this.imageServices[a] = Object.assign(t, { real: !0 }), !s && t.tiles && !Gt(t) ? (this.knownImageServers[i] = { verifications: 0, malformed: !1, root: i, preLoaded: n, sampledId: H(t), verified: !1, server: null, result: { context: t[\"@context\"] || [], sampledProfile: t.profile, resourceServiceRatio: r && t.height ? r.height / t.height : 1, sampledSizes: t.sizes || [], sizeRatios: Rl(t.width, t.height, t.sizes || []), sampledTiles: t.tiles || [] } }, !0) : this.verify(t);\n  }\n  preLoad(t, r = !0) {\n    this.knownImageServers[t.root] = t, r && (this.knownImageServers[t.root].malformed = !1, this.knownImageServers[t.root].verifications = this.config.verificationsRequired);\n  }\n  predict(t, r = !1, n = !1) {\n    let i = t == null ? void 0 : t.source, a = Ie(H(t)), s = this.knownImageServers[a], l = xe(H(t));\n    return this.imageServices[l] ? this.imageServices[l] || null : !this.config.approximateServices || !s || !s.result || !(i != null && i.height || t.height) || !(i != null && i.width || t.width) || !n && (s.malformed || s.verifications < this.config.verificationsRequired) || Gt(t.source) ? null : (this.imageServices[l] || (this.imageServices[l] = { \"@context\": s.result.context, \"@id\": H(t), id: H(t), protocol: \"http://iiif.io/api/image\", tiles: (i == null ? void 0 : i.tiles) || Hl(t.width, t.height, s.result.sampledTiles), sizes: (i == null ? void 0 : i.sizes) || Tl(Math.round(t.width / s.result.resourceServiceRatio), Math.round(t.height / s.result.resourceServiceRatio), s.result.sizeRatios), profile: (i == null ? void 0 : i.profile) || s.result.sampledProfile, height: (i == null ? void 0 : i.height) || t.height, width: (i == null ? void 0 : i.width) || t.width, real: !1 }), this.imageServices[l] || null);\n  }\n  async getThumbnailFromResource(t, r, n = !0, i = []) {\n    let a = t ? await this.getImageCandidates(t, n) : [];\n    return Bl(r, [() => i, () => a]);\n  }\n  async getImageCandidates(t, r = !0) {\n    let n = t;\n    if (r && n && n.height && n.width) {\n      let i = Ln(n);\n      for (let a of i) {\n        let s = { id: H(a), width: a.width ? a.width : n.width, height: a.height ? a.height : n.height, source: a };\n        await this.loadService(s);\n      }\n    }\n    return Pl(t, r, this);\n  }\n  async verify(t) {\n    let r = this.predict(t, !1, !0), n = await this.fetchService(H(t));\n    if (!r) return !1;\n    let i = r.height === n.height && r.width === n.width && r[\"@context\"] === n[\"@context\"] && Wl(r.sizes || [], n.sizes || []);\n    if (i) {\n      let a = Ie(H(t)), s = this.knownImageServers[a];\n      s && (s.verifications += 1, s.verifications >= this.config.verificationsRequired && (s.verified = !0));\n    }\n    return i;\n  }\n  canLoadSync(t) {\n    let r = typeof t == \"string\" ? t : H(t), n = xe(r);\n    if (this.imageServices[n]) return !0;\n    let i = this.knownImageServers[Ie(r)];\n    return !!(i && !i.malformed && i.verifications >= this.config.verificationsRequired);\n  }\n  async markAsMalformed(t) {\n    return this.knownImageServers[Ie(H(t))].malformed = !0, this.loadService(t, !0);\n  }\n  async fetchService(t, r = !1) {\n    let n = xe(t), i = this.imageServices[n];\n    if (i && (!r || i.real)) return i;\n    if (!this.config.enableFetching) throw new Error(\"Fetching is not enabled\");\n    let a = await this.fetch(n).then((s) => s.json());\n    return !a.id && a[\"@id\"] && (a.id = a[\"@id\"]), a.id !== t && (a.id = t, a[\"@id\"] && (a[\"@id\"] = t)), this.imageServices[n] = Object.assign(a, { real: !0 }), this.imageServices[n];\n  }\n  async fetch(t, r) {\n    return fetch(t, r);\n  }\n  async loadService(t, r = !1) {\n    if (!this.config.disableThrottling) {\n      let a = !0;\n      for (; a; ) if (this.fetchingCount >= this.config.verificationsRequired) await new Promise((s) => setTimeout(s, 500));\n      else {\n        a = !1;\n        break;\n      }\n    }\n    let n = this.knownImageServers[Ie(H(t))];\n    if (n && !n.malformed && !r) {\n      await n.result;\n      let a = this.loadServiceSync(t);\n      if (a) return a;\n    }\n    this.fetchingCount++;\n    let i = await this.fetchService(H(t), r);\n    return this.fetchingCount--, i.real && this.sample(i, t), i;\n  }\n  loadServiceSync(t) {\n    let r = xe(H(t));\n    return this.imageServices[r] ? this.imageServices[r] : this.config.approximateServices ? this.predict(t) : null;\n  }\n};\nnew Fn();\nvar Nl = new Fn(), Qt = /* @__PURE__ */ new Map();\nfunction Vl(e, {\n  vault: t = Mt,\n  dereference: r = !1,\n  ...n\n} = {}) {\n  let i = Qt.get(t);\n  return i || (i = Ul(t), Qt.set(t, i)), i.getBestThumbnailAtSize(e, n, r);\n}\nfunction Ul(e = Mt, t = {}) {\n  const r = t.imageServiceLoader || Nl;\n  async function n(i, a, s = !1, l = [], d) {\n    const u = () => r.getThumbnailFromResource(void 0, a, s, l);\n    if (!i)\n      return await r.getThumbnailFromResource(void 0, a, s, l);\n    if (typeof i == \"string\") {\n      const p = bt(i);\n      return p && l.push(p), await r.getThumbnailFromResource(void 0, a, s, l);\n    }\n    const c = e.get(i, { skipSelfReturn: !1 });\n    if (typeof c == \"string\")\n      return { best: bt(c), fallback: [], log: [] };\n    if (!c)\n      return await u();\n    switch (await (async (p) => {\n      if (p && p.thumbnail && p.thumbnail.length) {\n        const f = e.get(p.thumbnail[0]), g = await r.getImageCandidates(f, s);\n        g && g.length && l.push(...g);\n      }\n    })(c), c.type) {\n      case \"Annotation\": {\n        const p = Array.isArray(c.body) ? c.body : [c.body], f = e.get(p[0]);\n        return d && !f.width && (f.width = d.width, f.height = d.height), await r.getThumbnailFromResource(f, a, s, l);\n      }\n      case \"Canvas\": {\n        const p = c;\n        return n(p.items[0], a, s, l, {\n          width: p.width,\n          height: p.height\n        });\n      }\n      case \"AnnotationPage\":\n        return n(c.items[0], a, s, l, d);\n      case \"Choice\": {\n        const p = c;\n        return !p.items || p.items[0] ? await u() : n(p.items[0], a, s, l, d);\n      }\n      case \"Collection\": {\n        const f = c.items[0];\n        return f ? n(f, a, s, l, d) : await u();\n      }\n      case \"Manifest\": {\n        const f = c.items[0];\n        return f ? n(f, a, s, l, d) : await u();\n      }\n      case \"SpecificResource\":\n      case \"Image\":\n      case \"Dataset\":\n      case \"Sound\":\n      case \"Text\":\n      case \"TextualBody\":\n      case \"Video\":\n        return d && !c.width && (c.width = d.width, c.height = d.height), r.getThumbnailFromResource(c, a, s, l);\n    }\n    return await u();\n  }\n  return {\n    getBestThumbnailAtSize: n\n  };\n}\nconst ql = ({ type: e }) => {\n  switch (e) {\n    case \"Sound\":\n      return /* @__PURE__ */ o.createElement(j.Audio, null);\n    case \"Image\":\n      return /* @__PURE__ */ o.createElement(j.Image, null);\n    case \"Video\":\n      return /* @__PURE__ */ o.createElement(j.Video, null);\n    default:\n      return /* @__PURE__ */ o.createElement(j.Image, null);\n  }\n}, jl = ({\n  canvas: e,\n  canvasIndex: t,\n  isActive: r,\n  type: n,\n  handleChange: i\n}) => {\n  const [a, s] = P(!1), [l, d] = P(), u = z(), { vault: c } = u, m = 200, p = e != null && e.label ? Z(e == null ? void 0 : e.label) : String(t + 1);\n  T(() => {\n    a && (async () => {\n      var g, h;\n      try {\n        if (((g = e == null ? void 0 : e.thumbnail) == null ? void 0 : g.length) !== 0)\n          d((h = e == null ? void 0 : e.thumbnail[0]) == null ? void 0 : h.id);\n        else {\n          const { best: w } = await Vl(e, {\n            vault: c,\n            dereference: !0,\n            width: m,\n            height: m\n          });\n          d(w == null ? void 0 : w.id);\n        }\n      } catch (w) {\n        console.error(\"Error fetching thumbnail\", w);\n      }\n    })();\n  }, [e, a]);\n  const f = (g) => {\n    s(g);\n  };\n  return /* @__PURE__ */ o.createElement(\n    vt,\n    {\n      \"aria-checked\": r,\n      \"data-testid\": \"media-thumbnail\",\n      \"data-canvas\": t,\n      onClick: () => i(e.id),\n      value: e.id\n    },\n    /* @__PURE__ */ o.createElement(\"figure\", null, /* @__PURE__ */ o.createElement(He, null, /* @__PURE__ */ o.createElement(\n      tl,\n      {\n        isVisibleCallback: f,\n        attributes: {\n          className: \"media-thumbnail-lazyload\",\n          \"data-lazyload\": String(a),\n          \"data-testid\": \"media-thumbnail-lazyload\"\n        }\n      },\n      l && /* @__PURE__ */ o.createElement(\n        \"img\",\n        {\n          alt: p,\n          \"data-testid\": \"media-thumbnail-image\",\n          src: l\n        }\n      )\n    ), /* @__PURE__ */ o.createElement(Be, null), /* @__PURE__ */ o.createElement(sn, null, /* @__PURE__ */ o.createElement(Ve, { isIcon: !0, \"data-testid\": \"thumbnail-tag\" }, /* @__PURE__ */ o.createElement(Ns, null), /* @__PURE__ */ o.createElement(j, { \"aria-label\": n }, /* @__PURE__ */ o.createElement(ql, { type: n })), [\"Video\", \"Sound\"].includes(n) && /* @__PURE__ */ o.createElement(Vs, null, zr(e.duration))))), /* @__PURE__ */ o.createElement(\"figcaption\", { \"data-testid\": \"fig-caption\" }, e.label ? /* @__PURE__ */ o.createElement(ce, { label: e.label }) : (t + 1).toString()))\n  );\n}, Gl = (e) => e.body ? e.body.type : \"Image\", Ql = ({ items: e }) => {\n  const { t } = pe(), r = X(), n = z(), { activeCanvas: i, vault: a, sequence: s } = n, [l, d] = P(\"\"), [u, c] = P([]), [m, p] = P(0), f = o.useRef(null), g = \"painting\", h = (b) => {\n    i !== b && r({\n      type: \"updateActiveCanvas\",\n      canvasId: b\n    });\n  };\n  T(() => {\n    if (!u.length) {\n      const b = [\"Image\", \"Sound\", \"Video\"], E = e.map(\n        (y) => qr(a, y, g, b)\n      ).filter((y) => y.annotations.length > 0);\n      c(E);\n    }\n  }, [e, u.length, a]), T(() => {\n    u.forEach((b, E) => {\n      b != null && b.canvas && b.canvas.id === i && p(E);\n    });\n  }, [i, u]), T(() => {\n    const b = document.querySelector(\n      `[data-canvas=\"${m}\"]`\n    );\n    if (b instanceof HTMLElement && f.current) {\n      const E = b.offsetLeft - f.current.offsetWidth / 2 + b.offsetWidth / 2;\n      f.current.scrollTo({ left: E, behavior: \"smooth\" });\n    }\n  }, [m]);\n  const w = (b) => d(b), v = (b) => {\n    const E = s[1].findIndex(\n      (A) => A.includes(m)\n    ), y = E + b >= 0 ? E + b : s[1].length - 1;\n    if (!s[1][y]) return;\n    const S = s[1][y][0], C = s[0][S].id;\n    C && h(C);\n  };\n  return /* @__PURE__ */ o.createElement(o.Fragment, null, /* @__PURE__ */ o.createElement(\n    el,\n    {\n      handleFilter: w,\n      handleCanvasToggle: v,\n      activeIndex: m,\n      canvasLength: e.length\n    }\n  ), /* @__PURE__ */ o.createElement(\n    Us,\n    {\n      \"aria-label\": t(\"media.selectItem\"),\n      \"data-testid\": \"media\",\n      \"data-active-canvas\": e[m].id,\n      \"data-canvas-length\": e.length,\n      \"data-filter\": l,\n      ref: f\n    },\n    s[1].filter((b) => b.some((E) => {\n      var A;\n      const y = s[0][E].id, S = u.find((I) => {\n        var O;\n        return ((O = I == null ? void 0 : I.canvas) == null ? void 0 : O.id) === y;\n      });\n      if (!S) return !1;\n      const C = Z((A = S == null ? void 0 : S.canvas) == null ? void 0 : A.label) || \"\";\n      return !(l && !C.toLowerCase().includes(l.toLowerCase()));\n    })).map((b, E) => {\n      const y = b.map((S) => s[0][S].id).includes(i);\n      return /* @__PURE__ */ o.createElement(qs, { \"data-active\": y, key: E }, b.map((S) => {\n        var I, O;\n        const C = s[0][S].id, A = u.find(($) => {\n          var F;\n          return ((F = $ == null ? void 0 : $.canvas) == null ? void 0 : F.id) === C;\n        });\n        return A ? /* @__PURE__ */ o.createElement(\n          jl,\n          {\n            canvas: A.canvas,\n            canvasIndex: u.findIndex(($) => $ === A),\n            handleChange: h,\n            isActive: i === ((I = A == null ? void 0 : A.canvas) == null ? void 0 : I.id),\n            key: (O = A == null ? void 0 : A.canvas) == null ? void 0 : O.id,\n            type: Gl(A.annotations[0])\n          }\n        ) : null;\n      }));\n    })\n  ));\n}, _n = x(\"button\", {\n  position: \"absolute\",\n  background: \"none\",\n  border: \"none\",\n  cursor: \"zoom-in\",\n  margin: \"0\",\n  padding: \"0\",\n  width: \"100%\",\n  height: \"100%\",\n  transition: \"$all\",\n  opacity: 1,\n  display: \"flex\",\n  alignItems: \"center\",\n  justifyContent: \"center\",\n  img: {\n    width: \"100%\",\n    height: \"100%\",\n    objectFit: \"contain\",\n    color: \"transparent\",\n    aspectRatio: \"auto\"\n  },\n  \"&[data-paged=true]\": {\n    \"img:first-child \": {\n      objectPosition: \"100% 50%\"\n    },\n    \"img:last-child\": {\n      objectPosition: \"0 50%\"\n    }\n  },\n  \"&[data-active=false]\": {\n    opacity: 0,\n    objectPosition: \"50% 50%\"\n  },\n  variants: {\n    isMedia: {\n      true: {\n        cursor: \"pointer\"\n      }\n    }\n  }\n}), zn = x(\"button\", {\n  display: \"flex\",\n  height: \"2rem\",\n  width: \"2rem\",\n  borderRadius: \"2rem\",\n  padding: \"0\",\n  margin: \"0\",\n  fontFamily: \"inherit\",\n  background: \"none\",\n  backgroundColor: \"$primary\",\n  border: \"none\",\n  color: \"white\",\n  cursor: \"pointer\",\n  marginLeft: \"0.618rem\",\n  filter: \"drop-shadow(2px 2px 5px #0003)\",\n  transition: \"$all\",\n  boxSizing: \"content-box !important\",\n  \"&:first-child\": {\n    marginLeft: \"0\"\n  },\n  \"@xs\": {\n    marginBottom: \"0.618rem\",\n    marginLeft: \"0\",\n    \"&:last-child\": {\n      marginBottom: \"0\"\n    }\n  },\n  svg: {\n    height: \"60%\",\n    width: \"60%\",\n    padding: \"20%\",\n    fill: \"$secondary\",\n    stroke: \"$secondary\",\n    filter: \"drop-shadow(2px 2px 5px #0003)\",\n    transition: \"$all\",\n    boxSizing: \"inherit\"\n  },\n  \"&:hover, &:focus\": {\n    backgroundColor: \"$accent\"\n  },\n  \"&[data-button=rotate-right]\": {\n    \"&:hover, &:focus\": {\n      svg: {\n        rotate: \"45deg\"\n      }\n    }\n  },\n  \"&[data-button=rotate-left]\": {\n    transform: \"scaleX(-1)\",\n    \"&:hover, &:focus\": {\n      svg: {\n        rotate: \"45deg\"\n      }\n    }\n  },\n  \"&[data-button=reset]\": {\n    \"&:hover, &:focus\": {\n      svg: {\n        rotate: \"-15deg\"\n      }\n    }\n  }\n}), Dn = x(zn, {\n  position: \"absolute\",\n  width: \"2rem\",\n  top: \"1rem\",\n  right: \"1rem\",\n  zIndex: 100,\n  display: \"flex\",\n  alignItems: \"center\",\n  justifyContent: \"center\",\n  textAlign: \"center\",\n  transition: \"$all\",\n  borderRadius: \"50%\",\n  backgroundColor: \"$accent\",\n  cursor: \"pointer\",\n  \"&:hover, &:focus\": {\n    backgroundColor: \"$accent !important\"\n  },\n  variants: {\n    isInteractive: {\n      true: {\n        \"&:hover\": {\n          opacity: \"1\"\n        }\n      },\n      false: {}\n    },\n    isMedia: {\n      true: {\n        cursor: \"pointer !important\"\n      }\n    }\n  },\n  compoundVariants: [\n    {\n      isInteractive: !1,\n      isMedia: !0,\n      css: {\n        top: \"50%\",\n        right: \"50%\",\n        width: \"4rem\",\n        height: \"4rem\",\n        transform: \"translate(50%,-50%)\"\n      }\n    }\n  ]\n}), Jl = x(\"div\", {\n  position: \"relative\",\n  display: \"flex\",\n  flexDirection: \"column\",\n  flexGrow: \"1\",\n  flexShrink: \"1\",\n  gap: \"1rem\",\n  zIndex: \"0\",\n  overflow: \"hidden\",\n  \"&:hover\": {\n    [`${Dn}`]: {\n      backgroundColor: \"$accent\"\n    },\n    [`${_n}`]: {\n      backgroundColor: \"#6662\"\n    }\n  }\n}), Yl = x(\"div\", {\n  width: \"100%\",\n  height: \"100%\"\n}), Xl = x(\"svg\", {\n  height: \"19px\",\n  color: \"$accent\",\n  fill: \"$accent\",\n  stroke: \"$accent\",\n  display: \"flex\",\n  margin: \"0.25rem 0.85rem\"\n}), Zl = x(Pe.Trigger, {\n  fontSize: \"1.25rem\",\n  fontWeight: \"400\",\n  fontFamily: \"inherit\",\n  alignSelf: \"flex-start\",\n  flexGrow: \"1\",\n  cursor: \"pointer\",\n  transition: \"$all\",\n  border: \"1px solid #6663\",\n  boxShadow: \"2px 2px 5px #0001\",\n  borderRadius: \"3px\",\n  display: \"flex\",\n  alignItems: \"center\",\n  paddingLeft: \"0.5rem\",\n  width: \"100%\",\n  \"@sm\": {\n    fontSize: \"1rem\"\n  }\n}), Kl = x(Pe.Content, {\n  borderRadius: \"3px\",\n  boxShadow: \"3px 3px 8px #0003\",\n  backgroundColor: \"$secondary\",\n  marginTop: \"2.25rem\",\n  marginLeft: \"6px\",\n  paddingBottom: \"0.25rem\",\n  maxHeight: \"calc(61.8vh - 2.5rem) !important\",\n  borderTopLeftRadius: \"0\",\n  border: \"1px solid $secondaryMuted\",\n  maxWidth: \"90vw\"\n}), ec = x(Pe.Item, {\n  display: \"flex\",\n  alignItems: \"center\",\n  fontFamily: \"inherit\",\n  padding: \"0.25rem 0.5rem\",\n  color: \"$primary\",\n  fontWeight: \"400\",\n  fontSize: \"0.8333rem\",\n  cursor: \"pointer\",\n  backgroundColor: \"$secondary\",\n  width: \"calc(100% - 1rem)\",\n  \"> span\": {\n    whiteSpace: \"nowrap\",\n    textOverflow: \"ellipsis\",\n    overflow: \"hidden\"\n  },\n  '&[data-state=\"checked\"]': {\n    fontWeight: \"700\",\n    color: \"$primary !important\"\n  },\n  \"&:hover\": {\n    color: \"$accent\"\n  },\n  img: {\n    width: \"31px\",\n    height: \"31px\",\n    marginRight: \"0.5rem\",\n    borderRadius: \"3px\"\n  }\n}), tc = x(Pe.Label, {\n  color: \"$primaryMuted\",\n  fontFamily: \"inherit\",\n  fontSize: \"0.85rem\",\n  padding: \"0.5rem 1rem 0.5rem 0.5rem\",\n  display: \"flex\",\n  alignItems: \"center\",\n  marginBottom: \"0.25rem\",\n  borderRadius: \"3px\",\n  borderTopLeftRadius: \"0\",\n  borderBottomLeftRadius: \"0\",\n  borderBottomRightRadius: \"0\",\n  backgroundColor: \"$secondaryMuted\"\n}), Bn = x(Pe.Root, {\n  position: \"relative\",\n  zIndex: \"5\",\n  width: \"100%\"\n}), st = ({ direction: e, title: t }) => {\n  const r = () => /* @__PURE__ */ o.createElement(\"path\", { d: \"M414 321.94L274.22 158.82a24 24 0 00-36.44 0L98 321.94c-13.34 15.57-2.28 39.62 18.22 39.62h279.6c20.5 0 31.56-24.05 18.18-39.62z\" }), n = () => /* @__PURE__ */ o.createElement(\"path\", { d: \"M98 190.06l139.78 163.12a24 24 0 0036.44 0L414 190.06c13.34-15.57 2.28-39.62-18.22-39.62h-279.6c-20.5 0-31.56 24.05-18.18 39.62z\" });\n  return /* @__PURE__ */ o.createElement(\n    Xl,\n    {\n      xmlns: \"http://www.w3.org/2000/svg\",\n      focusable: \"false\",\n      viewBox: \"0 0 512 512\",\n      role: \"img\"\n    },\n    /* @__PURE__ */ o.createElement(\"title\", null, t),\n    e === \"up\" && /* @__PURE__ */ o.createElement(r, null),\n    e === \"down\" && /* @__PURE__ */ o.createElement(n, null)\n  );\n}, Hn = ({\n  children: e,\n  label: t,\n  maxHeight: r,\n  onValueChange: n,\n  value: i\n}) => /* @__PURE__ */ o.createElement(Bn, { onValueChange: n, value: i }, /* @__PURE__ */ o.createElement(Zl, { \"data-testid\": \"select-button\" }, /* @__PURE__ */ o.createElement(Ti, { \"data-testid\": \"select-button-value\" }), /* @__PURE__ */ o.createElement($i, null, /* @__PURE__ */ o.createElement(st, { direction: \"down\", title: \"select\" }))), /* @__PURE__ */ o.createElement(ki, null, /* @__PURE__ */ o.createElement(\n  Kl,\n  {\n    css: { maxHeight: `${r} !important` },\n    \"data-testid\": \"select-content\"\n  },\n  /* @__PURE__ */ o.createElement(Mi, null, /* @__PURE__ */ o.createElement(st, { direction: \"up\", title: \"scroll up for more\" })),\n  /* @__PURE__ */ o.createElement(Oi, null, /* @__PURE__ */ o.createElement(Pi, null, t && /* @__PURE__ */ o.createElement(tc, null, /* @__PURE__ */ o.createElement(ce, { \"data-testid\": \"select-label\", label: t })), e)),\n  /* @__PURE__ */ o.createElement(Li, null, /* @__PURE__ */ o.createElement(st, { direction: \"down\", title: \"scroll down for more\" }))\n))), Wn = (e) => /* @__PURE__ */ o.createElement(ec, { ...e }, e.thumbnail && /* @__PURE__ */ o.createElement(nn, { thumbnail: e.thumbnail }), /* @__PURE__ */ o.createElement(Fi, null, /* @__PURE__ */ o.createElement(ce, { label: e.label })), /* @__PURE__ */ o.createElement(_i, null));\nlet Se = window.OpenSeadragon;\nif (!Se && (Se = ke, !Se))\n  throw new Error(\"OpenSeadragon is missing.\");\nconst Jt = \"http://www.w3.org/2000/svg\";\nSe.Viewer && (Se.Viewer.prototype.svgOverlay = function() {\n  return this._svgOverlayInfo ? this._svgOverlayInfo : (this._svgOverlayInfo = new Nn(this), this._svgOverlayInfo);\n});\nconst Nn = function(e) {\n  const t = this;\n  this._viewer = e, this._containerWidth = 0, this._containerHeight = 0, this._svg = document.createElementNS(Jt, \"svg\"), this._svg.style.position = \"absolute\", this._svg.style.left = 0, this._svg.style.top = 0, this._svg.style.width = \"100%\", this._svg.style.height = \"100%\", this._viewer.canvas.appendChild(this._svg), this._node = document.createElementNS(Jt, \"g\"), this._svg.appendChild(this._node), this._viewer.addHandler(\"animation\", function() {\n    t.resize();\n  }), this._viewer.addHandler(\"open\", function() {\n    t.resize();\n  }), this._viewer.addHandler(\"rotate\", function() {\n    t.resize();\n  }), this._viewer.addHandler(\"flip\", function() {\n    t.resize();\n  }), this._viewer.addHandler(\"resize\", function() {\n    t.resize();\n  }), this.resize();\n};\nNn.prototype = {\n  // ----------\n  node: function() {\n    return this._node;\n  },\n  // ----------\n  resize: function() {\n    this._containerWidth !== this._viewer.container.clientWidth && (this._containerWidth = this._viewer.container.clientWidth, this._svg.setAttribute(\"width\", this._containerWidth)), this._containerHeight !== this._viewer.container.clientHeight && (this._containerHeight = this._viewer.container.clientHeight, this._svg.setAttribute(\"height\", this._containerHeight));\n    const e = this._viewer.viewport.pixelFromPoint(new Se.Point(0, 0), !0), t = this._viewer.viewport.getZoom(!0), r = this._viewer.viewport.getRotation(), n = this._viewer.viewport.getFlip(), i = this._viewer.viewport._containerInnerSize.x;\n    let a = i * t;\n    const s = a;\n    n && (a = -a, e.x = -e.x + i), this._node.setAttribute(\n      \"transform\",\n      \"translate(\" + e.x + \",\" + e.y + \") scale(\" + a + \",\" + s + \") rotate(\" + r + \")\"\n    );\n  },\n  // ----------\n  onClick: function(e, t) {\n    new Se.MouseTracker({\n      element: e,\n      clickHandler: t\n    }).setTracking(!0);\n  }\n};\nvar rc = \"http://library.stanford.edu/iiif/image-api/compliance.html#level0\", nc = \"http://library.stanford.edu/iiif/image-api/compliance.html#level1\", Vn = \"http://library.stanford.edu/iiif/image-api/compliance.html#level2\", ic = \"http://library.stanford.edu/iiif/image-api/conformance.html#level0\", ac = \"http://library.stanford.edu/iiif/image-api/conformance.html#level1\", Un = \"http://library.stanford.edu/iiif/image-api/conformance.html#level2\", oc = \"http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0\", sc = \"http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level1\", qn = \"http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2\", lc = \"http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level0\", cc = \"http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level1\", jn = \"http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level2\", dc = \"http://iiif.io/api/image/1/level0.json\", uc = \"http://iiif.io/api/image/1/profiles/level0.json\", mc = \"http://iiif.io/api/image/1/level1.json\", fc = \"http://iiif.io/api/image/1/profiles/level1.json\", Gn = \"http://iiif.io/api/image/1/level2.json\", Qn = \"http://iiif.io/api/image/1/profiles/level2.json\", hc = \"http://iiif.io/api/image/2/level0.json\", pc = \"http://iiif.io/api/image/2/profiles/level0.json\", gc = \"http://iiif.io/api/image/2/level1.json\", vc = \"http://iiif.io/api/image/2/profiles/level1.json\", Jn = \"http://iiif.io/api/image/2/level2.json\", Yn = \"http://iiif.io/api/image/2/profiles/level2.json\", yc = \"level0\", bc = \"level1\", Xn = \"level2\", wc = \"http://iiif.io/api/image/2/level0\", xc = \"http://iiif.io/api/image/2/level1\", Zn = \"http://iiif.io/api/image/2/level2\", Ec = [Zn, Vn, Un, qn, jn, Gn, Qn, Jn, Yn, Xn], Sc = [wc, xc, Zn, rc, nc, Vn, ic, ac, Un, oc, sc, qn, lc, cc, jn, dc, uc, mc, fc, Gn, Qn, hc, pc, gc, vc, Jn, Yn, yc, bc, Xn], Cc = Sc;\nfunction ae(e) {\n  for (let t in e) (typeof e[t] > \"u\" || e[t] === null) && delete e[t];\n  return e;\n}\nfunction Ac(e) {\n  return Array.isArray(e) ? e : e ? [e] : [];\n}\nvar Ic = Object.defineProperty, Rc = (e, t, r) => t in e ? Ic(e, t, { enumerable: !0, configurable: !0, writable: !0, value: r }) : e[t] = r, Yt = (e, t, r) => (Rc(e, typeof t != \"symbol\" ? t + \"\" : t, r), r), Xt = [\"sc:Collection\", \"sc:Manifest\", \"sc:Canvas\", \"sc:AnnotationList\", \"oa:Annotation\", \"sc:Range\", \"sc:Layer\", \"sc:Sequence\", \"oa:Choice\", \"Service\", \"ContentResource\"];\nfunction Tc(e) {\n  if (typeof e > \"u\" || e === null) throw new Error(\"Null or undefined is not a valid entity.\");\n  if (Array.isArray(e)) throw new Error(\"Array is not a valid entity\");\n  if (typeof e != \"object\") throw new Error(`${typeof e} is not a valid entity`);\n  if (typeof e[\"@type\"] == \"string\") {\n    let t = Xt.indexOf(e[\"@type\"]);\n    if (t !== -1) return Xt[t];\n  }\n  if (e.profile) return \"Service\";\n  if (e.format || e[\"@type\"]) return \"ContentResource\";\n  throw new Error(\"Resource type is not known\");\n}\nvar $c = class Kn {\n  constructor(t, r = {}) {\n    Yt(this, \"traversals\"), Yt(this, \"options\"), this.traversals = { collection: [], manifest: [], canvas: [], annotationList: [], sequence: [], annotation: [], contentResource: [], choice: [], range: [], service: [], layer: [], ...t }, this.options = { convertPropsToArray: !0, mergeMemberProperties: !0, allowUndefinedReturn: !1, ...r };\n  }\n  static all(t) {\n    return new Kn({ collection: [t], manifest: [t], canvas: [t], annotationList: [t], sequence: [t], annotation: [t], contentResource: [t], choice: [t], range: [t], service: [t], layer: [t] });\n  }\n  traverseCollection(t) {\n    return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseCollectionItems(t))), this.traversals.collection);\n  }\n  traverseCollectionItems(t) {\n    if (this.options.mergeMemberProperties) {\n      let r = [...(t.manifests || []).map((n) => typeof n == \"string\" ? { \"@id\": n, \"@type\": \"sc:Manifest\" } : n), ...(t.collections || []).map((n) => typeof n == \"string\" ? { \"@id\": n, \"@type\": \"sc:Collection\" } : n), ...t.members || []];\n      delete t.collections, delete t.manifests, t.members = r;\n    }\n    return t.manifests && (t.manifests = t.manifests.map((r) => this.traverseManifest(typeof r == \"string\" ? { \"@id\": r, \"@type\": \"sc:Manifest\" } : r))), t.collections && (t.collections = t.collections.map((r) => this.traverseCollection(typeof r == \"string\" ? { \"@id\": r, \"@type\": \"sc:Collection\" } : r))), t.members && (t.members = t.members.map((r) => typeof r == \"string\" ? r : this.traverseUnknown(r))), t;\n  }\n  traverseManifest(t) {\n    return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseManifestItems(t))), this.traversals.manifest);\n  }\n  traverseManifestItems(t) {\n    return t.sequences && (t.sequences = t.sequences.map((r) => this.traverseSequence(r))), t.structures && (t.structures = t.structures.map((r) => this.traverseRange(r))), t;\n  }\n  traverseSequence(t) {\n    return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseSequenceItems(t))), this.traversals.sequence);\n  }\n  traverseSequenceItems(t) {\n    return t.canvases && (t.canvases = t.canvases.map((r) => this.traverseCanvas(r))), t;\n  }\n  traverseCanvas(t) {\n    return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseCanvasItems(t))), this.traversals.canvas);\n  }\n  traverseCanvasItems(t) {\n    return t.images && (t.images = t.images.map((r) => this.traverseAnnotation(r))), t.otherContent && (t.otherContent = t.otherContent.map((r) => this.traverseAnnotationList(r))), t;\n  }\n  traverseRange(t) {\n    return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseRangeItems(t))), this.traversals.range);\n  }\n  traverseRangeItems(t) {\n    if (this.options.mergeMemberProperties) {\n      let r = [...(t.ranges || []).map((n) => typeof n == \"string\" ? { \"@id\": n, \"@type\": \"sc:Range\" } : n), ...(t.canvases || []).map((n) => typeof n == \"string\" ? { \"@id\": n, \"@type\": \"sc:Canvas\" } : n), ...t.members || []];\n      delete t.ranges, delete t.canvases, t.members = r.length ? r.map((n) => this.traverseUnknown(n)) : void 0;\n    }\n    return t;\n  }\n  traverseAnnotationList(t) {\n    let r = typeof t == \"string\" ? { \"@id\": t, \"@type\": \"sc:AnnotationList\" } : t;\n    return this.traverseType(this.traverseDescriptive(this.traverseAnnotationListItems(r)), this.traversals.annotationList);\n  }\n  traverseAnnotationListItems(t) {\n    return t.resources && (t.resources = t.resources.map((r) => this.traverseAnnotation(r))), t;\n  }\n  traverseAnnotation(t) {\n    return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseAnnotationItems(t))), this.traversals.annotation);\n  }\n  traverseAnnotationItems(t) {\n    return t.resource && (Array.isArray(t.resource) ? t.resource = t.resource.map((r) => this.traverseContentResource(r)) : t.resource = this.traverseContentResource(t.resource)), t.on, t;\n  }\n  traverseLayer(t) {\n    return this.traverseType(this.traverseLinking(this.traverseLayerItems(t)), this.traversals.layer);\n  }\n  traverseLayerItems(t) {\n    return t.otherContent && (t.otherContent = t.otherContent.map((r) => this.traverseAnnotationList(r))), t;\n  }\n  traverseChoice(t) {\n    return this.traverseType(this.traverseChoiceItems(t), this.traversals.choice);\n  }\n  traverseChoiceItems(t) {\n    return t.default && t.default !== \"rdf:nil\" && (t.default = this.traverseContentResource(t.default)), t.item && t.item !== \"rdf:nil\" && (t.item = t.item.map((r) => this.traverseContentResource(r))), t;\n  }\n  traverseService(t) {\n    return this.traverseType(this.traverseLinking(t), this.traversals.service);\n  }\n  traverseContentResource(t) {\n    return t[\"@type\"] === \"oa:Choice\" ? this.traverseChoice(t) : this.traverseType(this.traverseDescriptive(this.traverseLinking(t)), this.traversals.contentResource);\n  }\n  traverseUnknown(t) {\n    if (!t[\"@type\"] || typeof t == \"string\") return t;\n    switch (Tc(t)) {\n      case \"sc:Collection\":\n        return this.traverseCollection(t);\n      case \"sc:Manifest\":\n        return this.traverseManifest(t);\n      case \"sc:Canvas\":\n        return this.traverseCanvas(t);\n      case \"sc:Sequence\":\n        return this.traverseSequence(t);\n      case \"sc:Range\":\n        return this.traverseRange(t);\n      case \"oa:Annotation\":\n        return this.traverseAnnotation(t);\n      case \"sc:AnnotationList\":\n        return this.traverseAnnotationList(t);\n      case \"sc:Layer\":\n        return this.traverseLayer(t);\n      case \"Service\":\n        return this.traverseService(t);\n      case \"oa:Choice\":\n        return this.traverseChoice(t);\n      case \"ContentResource\":\n        return this.traverseContentResource(t);\n    }\n    return t.profile ? this.traverseService(t) : t;\n  }\n  traverseImageResource(t) {\n    let r = Array.isArray(t), n = Array.isArray(t) ? t : [t], i = [];\n    for (let a of n) typeof a == \"string\" ? i.push(this.traverseContentResource({ \"@id\": a, \"@type\": \"dctypes:Image\" })) : i.push(this.traverseContentResource(a));\n    return !r && !this.options.convertPropsToArray ? i[0] : i;\n  }\n  traverseDescriptive(t) {\n    return t.thumbnail && (t.thumbnail = this.traverseImageResource(t.thumbnail)), t.logo && (t.logo = this.traverseImageResource(t.logo)), t;\n  }\n  traverseOneOrMoreServices(t) {\n    let r = Array.isArray(t), n = Array.isArray(t) ? t : [t], i = [];\n    for (let a of n) i.push(this.traverseService(a));\n    return !r && !this.options.convertPropsToArray ? i[0] : i;\n  }\n  traverseLinking(t) {\n    return t.related && (t.related = this.traverseOneOrManyType(t.related, this.traversals.contentResource)), t.rendering && (t.rendering = this.traverseOneOrManyType(t.rendering, this.traversals.contentResource)), t.service && (t.service = this.traverseOneOrMoreServices(t.service)), t.seeAlso && (t.seeAlso = this.traverseOneOrManyType(t.seeAlso, this.traversals.contentResource)), t.within && (typeof t.within == \"string\" || (t.within = this.traverseOneOrManyType(t.within, this.traversals.contentResource))), t.startCanvas && (typeof t.startCanvas == \"string\" ? t.startCanvas = this.traverseType({ \"@id\": t.startCanvas, \"@type\": \"sc:Canvas\" }, this.traversals.canvas) : t.startCanvas && this.traverseType(t.startCanvas, this.traversals.canvas)), t.contentLayer && (typeof t.contentLayer == \"string\" ? t.contentLayer = this.traverseLayer({ \"@id\": t.contentLayer, \"@type\": \"sc:Layer\" }) : t.contentLayer = this.traverseLayer(t.contentLayer)), t;\n  }\n  traverseOneOrManyType(t, r) {\n    if (!Array.isArray(t)) if (this.options.convertPropsToArray) t = [t];\n    else return this.traverseType(t, r);\n    return t.map((n) => this.traverseType(n, r));\n  }\n  traverseType(t, r) {\n    return r.reduce((n, i) => {\n      let a = i(n);\n      return typeof a > \"u\" && !this.options.allowUndefinedReturn ? n : a;\n    }, t);\n  }\n}, kc = \"http://library.stanford.edu/iiif/image-api/compliance.html#level1\", Mc = \"http://library.stanford.edu/iiif/image-api/compliance.html#level2\", Oc = \"http://library.stanford.edu/iiif/image-api/conformance.html#level1\", Pc = \"http://library.stanford.edu/iiif/image-api/conformance.html#level2\", Lc = \"http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level1\", Fc = \"http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2\", _c = \"http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level1\", zc = \"http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level2\", Dc = \"http://iiif.io/api/image/1/level1.json\", Bc = \"http://iiif.io/api/image/1/profiles/level1.json\", Hc = \"http://iiif.io/api/image/1/level2.json\", Wc = \"http://iiif.io/api/image/1/profiles/level2.json\", Nc = \"http://iiif.io/api/image/2/level1.json\", Vc = \"http://iiif.io/api/image/2/profiles/level1.json\", Uc = \"http://iiif.io/api/image/2/level2.json\", qc = \"http://iiif.io/api/image/2/profiles/level2.json\", jc = \"level1\", Gc = \"level2\", Qc = \"http://iiif.io/api/image/2/level1\", Jc = \"http://iiif.io/api/image/2/level2\", Yc = [Qc, Jc, kc, Mc, Oc, Pc, Lc, Fc, _c, zc, Dc, Bc, Hc, Wc, Nc, Vc, Uc, qc, jc, Gc], wt = { attributionLabel: \"Attribution\", lang: \"none\", providerId: \"http://example.org/provider\", providerName: \"Unknown\" };\nfunction Xc(e) {\n  if (typeof e == \"string\") return [e];\n  if (!e) return [];\n  let t = Array.isArray(e) ? e : [e], r = [];\n  for (let n of t) {\n    if (typeof n == \"string\") {\n      r.push(n);\n      continue;\n    }\n    r.push({ \"@language\": n[\"@language\"] || n.language, \"@value\": n[\"@value\"] || n.value });\n  }\n  return r;\n}\nfunction Ee(e, t = \"none\") {\n  if (!e) return {};\n  let r = Xc(e), n = {};\n  for (let i of r) {\n    if (typeof i == \"string\") {\n      n[t] = n[t] ? n[t] : [], n[t].push(i || \"\");\n      continue;\n    }\n    if (!i[\"@language\"]) {\n      n[t] = n[t] ? n[t] : [], n[t].push(i[\"@value\"] || \"\");\n      continue;\n    }\n    let a = i[\"@language\"];\n    n[a] = n[a] ? n[a] : [], n[a].push(i[\"@value\"] || \"\");\n  }\n  return n;\n}\nfunction ei(e) {\n  if (Array.isArray(e)) return ei(e.find((t) => typeof t == \"string\"));\n  if (Ec.indexOf(e) !== -1) return \"level2\";\n  if (Yc.indexOf(e) !== -1) return \"level1\";\n  if (Cc.indexOf(e) !== -1) return \"level0\";\n  if (typeof e == \"string\") return e;\n}\nfunction Zc(e) {\n  let t = Array.isArray(e) ? e : [e];\n  for (let r of t) switch (r) {\n    case \"http://iiif.io/api/image/2/context.json\":\n    case \"http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2\":\n      return \"ImageService2\";\n    case \"http://iiif.io/api/image/1/context.json\":\n    case \"http://library.stanford.edu/iiif/image-api/1.1/context.json\":\n      return \"ImageService1\";\n    case \"http://iiif.io/api/annex/openannotation/context.json\":\n      return \"ImageApiSelector\";\n  }\n}\nfunction Kc(e) {\n  switch (e) {\n    case \"http://iiif.io/api/image/2/level0.json\":\n    case \"http://iiif.io/api/image/2/level1.json\":\n    case \"http://iiif.io/api/image/2/level2.json\":\n      return \"ImageService2\";\n    case \"http://iiif.io/api/auth/1/kiosk\":\n    case \"http://iiif.io/api/auth/1/login\":\n    case \"http://iiif.io/api/auth/1/clickthrough\":\n    case \"http://iiif.io/api/auth/1/external\":\n    case \"http://iiif.io/api/auth/0/kiosk\":\n    case \"http://iiif.io/api/auth/0/login\":\n    case \"http://iiif.io/api/auth/0/clickthrough\":\n    case \"http://iiif.io/api/auth/0/external\":\n      return \"AuthCookieService1\";\n    case \"http://iiif.io/api/auth/1/token\":\n    case \"http://iiif.io/api/auth/0/token\":\n      return \"AuthTokenService1\";\n    case \"http://iiif.io/api/auth/1/logout\":\n    case \"http://iiif.io/api/auth/0/logout\":\n      return \"AuthLogoutService1\";\n    case \"http://iiif.io/api/search/1/search\":\n    case \"http://iiif.io/api/search/0/search\":\n      return \"SearchService1\";\n    case \"http://iiif.io/api/search/1/autocomplete\":\n    case \"http://iiif.io/api/search/0/autocomplete\":\n      return \"AutoCompleteService1\";\n  }\n}\nfunction Zt(e) {\n  for (let t of [\"sc\", \"oa\", \"dcterms\", \"dctypes\", \"iiif\"]) if (e.startsWith(`${t}:`)) return e.slice(t.length + 1);\n  return e;\n}\nvar ed = [\"Collection\", \"Manifest\", \"Annotation\", \"AnnotationPage\", \"Range\", \"Service\"];\nfunction Ot(e) {\n  let t = e[\"@id\"] || e.id, r = e[\"@type\"] || e.type, n = e.profile || void 0, i = e[\"@context\"] || void 0;\n  if (n) {\n    let a = Kc(n);\n    if (a) return a;\n  }\n  if (i) {\n    let a = Zc(i);\n    if (a) return a;\n  }\n  if (r) {\n    if (Array.isArray(r)) {\n      if (r.indexOf(\"oa:CssStylesheet\") !== -1) return \"CssStylesheet\";\n      if (r.indexOf(\"cnt:ContentAsText\") !== -1) return \"TextualBody\";\n      r = r[0];\n    }\n    for (let a of [\"sc\", \"oa\", \"dcterms\", \"dctypes\", \"iiif\"]) if (r.startsWith(`${a}:`)) {\n      r = r.slice(a.length + 1);\n      break;\n    }\n    switch (r) {\n      case \"Layer\":\n        return \"AnnotationCollection\";\n      case \"AnnotationList\":\n        return \"AnnotationPage\";\n      case \"cnt:ContentAsText\":\n        return \"TextualBody\";\n    }\n  }\n  if (r && ed.indexOf(r) !== -1) return r;\n  if (e.format) {\n    if (e.format.startsWith(\"image/\")) return \"Image\";\n    if (e.format.startsWith(\"text/\") || e.format === \"application/pdf\") return \"Text\";\n    if (e.format.startsWith(\"application/\")) return \"Dataset\";\n  }\n  return t && (t.endsWith(\".jpg\") || t.endsWith(\".png\") || t.endsWith(\".jpeg\")) ? \"Image\" : r || \"unknown\";\n}\nvar td = /http(s)?:\\/\\/(creativecommons.org|rightsstatements.org)[^\"'\\\\<\\n]+/gm;\nfunction rd(e) {\n  let t = e.match(td);\n  return t ? t[0] : e;\n}\nfunction nd(e, t = \"Rights/License\", r = \"none\") {\n  let n = null, i = [], a = Array.isArray(e) ? e : [e];\n  for (let s of a) {\n    let l = s ? rd(s) : void 0;\n    if (l && (l.indexOf(\"creativecommons.org\") !== -1 || l.indexOf(\"rightsstatements.org\") !== -1)) {\n      l.startsWith(\"https://\") ? n = `http://${l.slice(8)}` : n = l;\n      continue;\n    }\n    l && i.push({ label: { [r]: [t] }, value: { [r]: [l] } });\n  }\n  return [n, i];\n}\nvar id = [\"http://iiif.io/api/presentation/2/context.json\", \"http://iiif.io/api/image/2/context.json\", \"http://iiif.io/api/image/1/context.json\", \"http://library.stanford.edu/iiif/image-api/1.1/context.json\", \"http://iiif.io/api/search/1/context.json\", \"http://iiif.io/api/search/0/context.json\", \"http://iiif.io/api/auth/1/context.json\", \"http://iiif.io/api/auth/0/context.json\", \"http://iiif.io/api/annex/openannotation/context.json\"];\nfunction ad(e) {\n  if (e) {\n    let t = Array.isArray(e) ? e : [e], r = [];\n    for (let n of t) n === \"http://iiif.io/api/presentation/2/context.json\" && r.push(\"http://iiif.io/api/presentation/3/context.json\"), id.indexOf(n) === -1 && r.push(n);\n    if (t.length) return r.length === 1 ? r[0] : r;\n  }\n}\nfunction od(e) {\n  return e ? e.map((t) => ({ label: Ee(t.label), value: Ee(t.value) })) : [];\n}\nvar Kt = 0;\nfunction ti(e, t) {\n  let r = encodeURI(e.id || e[\"@id\"] || \"\").trim();\n  return r && t ? `${r}/${t}` : r || (Kt++, `http://example.org/${e[\"@type\"]}${t ? `/${t}` : \"\"}/${Kt}`);\n}\nfunction de(e) {\n  let t = [...e.behavior || []];\n  e.viewingHint && t.push(e.viewingHint);\n  let r;\n  return Array.isArray(e.motivation) ? r = e.motivation.map(Zt) : e.motivation && (r = Zt(e.motivation)), { \"@context\": e[\"@context\"] ? ad(e[\"@context\"]) : void 0, id: (e[\"@id\"] || ti(e)).trim(), type: Ot(e), behavior: t.length ? t : void 0, height: e.height ? e.height : void 0, width: e.width ? e.width : void 0, motivation: r, viewingDirection: e.viewingDirection, profile: e.profile, format: e.format ? e.format : void 0, duration: void 0, timeMode: void 0 };\n}\nfunction ue(e) {\n  let [t, r] = nd(e.license), n = [...e.metadata ? od(e.metadata) : [], ...r];\n  return { rights: t, metadata: n.length ? n : void 0, label: e.label ? Ee(e.label) : void 0, requiredStatement: e.attribution ? { label: Ee(wt.attributionLabel), value: Ee(e.attribution) } : void 0, navDate: e.navDate, summary: e.description ? Ee(e.description) : void 0, thumbnail: sd(e.thumbnail) };\n}\nfunction sd(e) {\n  return e && (Array.isArray(e) ? e : [e]).map((t) => typeof t == \"string\" ? { id: t, type: \"Image\" } : (t.type === \"unknown\" && (t.type = \"Image\"), t));\n}\nfunction ld(e) {\n  if (!e.within) return;\n  let t = Array.isArray(e.within) ? e.within : [e.within], r = [];\n  for (let n of t) if (typeof n == \"string\") {\n    if (n) switch (e[\"@type\"]) {\n      case \"sc:Manifest\":\n        r.push({ id: n, type: \"Collection\" });\n        break;\n    }\n  } else n[\"@id\"] && r.push({ id: n[\"@id\"], type: Ot(n) });\n  return r.length ? r : void 0;\n}\nfunction ge(e) {\n  let t = e.related ? Array.isArray(e.related) ? e.related : [e.related] : [], r = e.contentLayer;\n  return { provider: e.logo || t.length ? [{ id: wt.providerId, type: \"Agent\", homepage: t.length ? [t[0]] : void 0, logo: e.logo ? Array.isArray(e.logo) ? e.logo : [e.logo] : void 0, label: Ee(wt.providerName) }] : void 0, partOf: ld(e), rendering: e.rendering, seeAlso: e.seeAlso, start: e.startCanvas, service: e.service ? Ac(e.service) : void 0, supplementary: r ? [r] : void 0 };\n}\nfunction cd(e) {\n  return { chars: e.chars, format: e.format ? e.format : void 0, language: e.language };\n}\nfunction dd(e) {\n  return ae({ ...de(e), ...ue(e), ...ge(e), items: e.members });\n}\nfunction ud(e) {\n  let t = [], r = [], n;\n  for (let a of e.sequences || []) a.canvases.length && t.push(...a.canvases), a.behavior && r.push(...a.behavior), a.startCanvas && (n = a.startCanvas);\n  let i = de(e);\n  return r.length && (i.behavior ? i.behavior.push(...r) : i.behavior = r), ae({ ...i, ...ue(e), ...ge(e), start: n, items: t, structures: md(e.structures) });\n}\nfunction md(e) {\n  if (!e) return e;\n  let t = /* @__PURE__ */ new Map();\n  for (let n of e) t.set(n.id, n);\n  let r = [];\n  for (let n of e) if (n.items) {\n    let i = n.items.map((a) => typeof a == \"string\" ? (r.push(a), t.get(a) || a) : a && a.id ? (r.push(a.id), t.get(a.id) || a) : a);\n    n.items = i;\n  }\n  return e.filter((n) => r.indexOf(n.id) === -1);\n}\nfunction fd(e) {\n  return ae({ ...de(e), ...ue(e), ...ge(e), annotations: e.otherContent && e.otherContent.length ? e.otherContent : void 0, items: e.images && e.images.length ? [{ id: ti(e, \"annotation-page\"), type: \"AnnotationPage\", items: e.images }] : void 0 });\n}\nfunction hd(e) {\n  return ae({ ...de(e), ...ue(e), ...ge(e), items: e.resources && e.resources.length ? e.resources : void 0 });\n}\nfunction pd(e) {\n  return !e.canvases || e.canvases.length === 0 ? { canvases: [], behavior: [] } : { canvases: e.canvases, behavior: e.viewingHint ? [e.viewingHint] : [], startCanvas: e.startCanvas };\n}\nfunction gd(e) {\n  function t(r) {\n    if (Array.isArray(r)) {\n      if (r.length > 1) return { type: \"List\", items: r.map(t) };\n      r = r[0];\n    }\n    if (typeof r == \"string\") return encodeURI(r).trim();\n    if (\"@type\" in r) {\n      let n;\n      if (typeof r.full == \"string\") n = r.full;\n      else if (r.full[\"@type\"] === \"dctypes:Image\") n = { id: r.full[\"@id\"], type: \"Image\" };\n      else if (r.full[\"@type\"] === \"sc:Canvas\") n = { id: r.full[\"@id\"], type: \"Canvas\" };\n      else throw new Error(`Unsupported source type on annotation: ${r.full[\"@type\"]}`);\n      return { type: \"SpecificResource\", source: n, selector: xt(r.selector) };\n    } else return encodeURI(r[\"@id\"]).trim();\n  }\n  return ae({ ...de(e), ...ue(e), ...ge(e), target: t(e.on), body: Array.isArray(e.resource) ? e.resource.map(er) : er(e.resource) });\n}\nfunction er(e) {\n  return e.type === \"Choice\" ? e : ri(e);\n}\nfunction ri(e) {\n  let t = e;\n  return ae({ ...de(t), ...ue(t), ...ge(t), ...cd(t) });\n}\nfunction vd(e) {\n  let t = [];\n  return e.default && e.default !== \"rdf:nil\" && t.push(e.default), e.item && e.item !== \"rdf:nil\" && t.push(...e.item), ae({ ...de(e), ...ue(e), items: t });\n}\nfunction yd(e) {\n  return ae({ ...de(e), ...ue(e), ...ge(e), items: e.members });\n}\nfunction bd(e) {\n  let { \"@id\": t, \"@type\": r, \"@context\": n, profile: i, ...a } = e, s = {};\n  return t && (s[\"@id\"] = t), s[\"@type\"] = Ot(e), s[\"@type\"] === \"unknown\" && (n && n.length && (s[\"@context\"] = n), s[\"@type\"] = \"Service\"), i && (s.profile = ei(i)), ae({ ...s, ...a });\n}\nfunction wd(e) {\n  return ae({ ...de(e), ...ue(e), ...ge(e) });\n}\nvar xd = new $c({ collection: [dd], manifest: [ud], canvas: [fd], annotationList: [hd], sequence: [pd], annotation: [gd], contentResource: [ri], choice: [vd], range: [yd], service: [bd], layer: [wd] });\nfunction Ed(e) {\n  return e && e[\"@context\"] && (e[\"@context\"] === \"http://iiif.io/api/presentation/2/context.json\" || e[\"@context\"].indexOf(\"http://iiif.io/api/presentation/2/context.json\") !== -1 || e[\"@context\"] === \"http://www.shared-canvas.org/ns/context.json\") || e[\"@context\"] === \"http://iiif.io/api/image/2/context.json\" ? xd.traverseUnknown(e) : e;\n}\nfunction xt(e) {\n  if ((Array.isArray(e[\"@type\"]) && e[\"@type\"].includes(\"oa:SvgSelector\") || e[\"@type\"] == \"oa:SvgSelector\") && (\"chars\" in e || \"value\" in e)) return { type: \"SvgSelector\", value: \"chars\" in e ? e.chars : e.value };\n  if (e[\"@type\"] === \"oa:FragmentSelector\") return { type: \"FragmentSelector\", value: e.value };\n  if (e[\"@type\"] === \"oa:Choice\") return [xt(e.default), ...(Array.isArray(e.item) ? e.item : [e.item]).map(xt)];\n  if (e[\"@type\"] == \"iiif:ImageApiSelector\") return { type: \"ImageApiSelector\", region: \"region\" in e ? e.region : void 0, rotation: \"rotation\" in e ? e.rotation : void 0 };\n  throw new Error(`Unsupported selector type: ${e[\"@type\"]}`);\n}\nconst Sd = (e) => (Array.isArray(e[\"@context\"]) ? e[\"@context\"] : [e[\"@context\"]]).map((r) => r == null ? void 0 : r.replace(\"http://\", \"https://\")), Cd = (e) => fetch(`${e.replace(/\\/$/, \"\")}/info.json`).then((t) => t.json()).then((t) => t).catch((t) => {\n  console.error(\n    `The IIIF tilesource ${e.replace(\n      /\\/$/,\n      \"\"\n    )}/info.json failed to load: ${t}`\n  );\n}), Ad = (e) => {\n  let t, r;\n  if (Array.isArray(e) && (t = e[0], t)) {\n    let n;\n    \"@id\" in t ? n = t[\"@id\"] : n = t.id, r = n;\n  }\n  return r;\n}, ni = (e) => {\n  var n, i, a, s, l, d, u, c, m, p, f, g, h, w, v;\n  let t, r = {};\n  switch (e == null ? void 0 : e.type) {\n    case \"SpecificResource\":\n      t = (a = (i = (n = e == null ? void 0 : e.target) == null ? void 0 : n.partOf) == null ? void 0 : i[0]) == null ? void 0 : a.id, r = {\n        manifest: t,\n        canvas: (s = e == null ? void 0 : e.target) == null ? void 0 : s.id\n      }, e != null && e.selector && (r.selector = e.selector);\n      break;\n    case \"Range\":\n    case \"Annotation\":\n      const b = ((l = e == null ? void 0 : e.target) == null ? void 0 : l.source) || (e == null ? void 0 : e.target), E = (d = e == null ? void 0 : e.target) == null ? void 0 : d.selector;\n      r = {\n        manifest: (c = (u = b == null ? void 0 : b.partOf) == null ? void 0 : u[0]) == null ? void 0 : c.id,\n        canvas: b == null ? void 0 : b.id\n      }, (((m = e == null ? void 0 : e.target) == null ? void 0 : m.type) === \"SpecificResource\" || (p = e == null ? void 0 : e.target) != null && p.selector) && (r.selector = E);\n      break;\n    case \"Canvas\":\n      if (t = (g = (f = e == null ? void 0 : e.partOf) == null ? void 0 : f[0]) == null ? void 0 : g.id, r = {\n        manifest: t,\n        canvas: e == null ? void 0 : e.id\n      }, (h = e == null ? void 0 : e.id) != null && h.includes(\"#xywh=\")) {\n        const [y, S] = e.id.split(\"#xywh=\");\n        r.canvas = y, r.selector = {\n          type: \"FragmentSelector\",\n          value: `xywh=${S}`\n        };\n      }\n      break;\n    case \"Manifest\":\n      t = e == null ? void 0 : e.id, r = {\n        collection: (v = (w = e == null ? void 0 : e.partOf) == null ? void 0 : w[0]) == null ? void 0 : v.id,\n        manifest: e == null ? void 0 : e.id\n      };\n      break;\n    case \"Collection\":\n      t = e == null ? void 0 : e.id, r = {\n        collection: t\n      };\n      break;\n  }\n  return { resourceId: t, active: r };\n}, Id = (e) => {\n  const t = [\n    \"https://iiif.io/api/presentation/2/context.json\",\n    \"https://iiif.io/api/presentation/3/context.json\"\n  ], r = new TypeError(\n    `The IIIF content may not be a valid IIIF resource: ${t.join(\", \")}`\n  );\n  e[\"@context\"] || console.warn(r);\n  const n = Sd(e);\n  try {\n    if (n.includes(t[0])) {\n      const i = Ed(e);\n      if (!i || !i.id || !i.type)\n        throw r;\n      return i;\n    } else {\n      if (n.includes(t[1]))\n        return e;\n      throw r;\n    }\n  } catch (i) {\n    console.warn(i);\n  }\n}, Rd = (e) => {\n  if (typeof e == \"string\" && Md(e))\n    return { resourceId: e };\n  if (typeof e == \"object\") {\n    const t = Id(e);\n    return {\n      resourceId: t == null ? void 0 : t.id,\n      resourceObject: t\n    };\n  } else {\n    const t = JSON.parse(bi(e)), { active: r } = ni(t);\n    return { active: r, resourceId: t == null ? void 0 : t.resourceId, resourceObject: t };\n  }\n}, Td = (e) => {\n  const { resourceId: t, resourceObject: r } = Rd(e);\n  return r || t;\n}, $d = (e) => e.items.map((r) => r.id)[0], kd = (e) => {\n  const t = e.items.filter((r) => r.type === \"Manifest\").map((r) => r.id);\n  return t.length == 0 ? null : t[0];\n}, Md = (e) => {\n  try {\n    new URL(e);\n  } catch {\n    return !1;\n  }\n  return !0;\n};\nvar ee = /* @__PURE__ */ ((e) => (e.TiledImage = \"tiledImage\", e.SimpleImage = \"simpleImage\", e))(ee || {});\nconst Od = (e) => {\n  const t = Array.isArray(e == null ? void 0 : e.service) && (e == null ? void 0 : e.service.length) > 0, r = t ? Ad(e == null ? void 0 : e.service) : e == null ? void 0 : e.id, n = t ? ee.TiledImage : ee.SimpleImage;\n  return {\n    uri: r,\n    imageType: n\n  };\n}, Pd = (e, t) => {\n  const r = t ? ee.TiledImage : ee.SimpleImage;\n  return {\n    uri: e,\n    imageType: r\n  };\n}, Et = x(\"div\", {\n  position: \"absolute !important\",\n  zIndex: \"1\",\n  top: \"1rem\",\n  left: \"1rem\",\n  width: \"161.8px\",\n  height: \"100px\",\n  backgroundColor: \"#000D\",\n  boxShadow: \"5px 5px 5px #0002\",\n  borderRadius: \"3px\",\n  \".displayregion\": {\n    border: \" 3px solid $accent !important\",\n    boxShadow: \"0 0 3px #0006\"\n  },\n  \"@sm\": {\n    width: \"123px\",\n    height: \"76px\"\n  },\n  \"@xs\": {\n    width: \"100px\",\n    height: \"61.8px\"\n  }\n}), Ld = x(\"div\", {\n  position: \"relative\",\n  width: \"100%\",\n  height: \"100%\",\n  zIndex: \"0\",\n  \".clover-iiif-image-openseadragon-annotation\": {\n    position: \"relative\",\n    backgroundColor: \"transparent\",\n    border: \"2px solid #0003\",\n    boxSizing: \"content-box\",\n    borderRadius: \"3px\",\n    boxShadow: \"0 0 38vw 38vw transparent\",\n    transition: \"box-shadow 100ms ease-in-out\",\n    zIndex: \"0\",\n    label: {\n      opacity: 0,\n      position: \"absolute\",\n      lineHeight: \"1.47rem\",\n      pointerEvents: \"none\",\n      textAlign: \"center\",\n      minWidth: \"300px\",\n      maxWidth: \"20vw\",\n      padding: \"0.5rem\",\n      borderRadius: \"3px\",\n      top: \"calc(100% + 0.5rem)\",\n      left: \"50%\",\n      transform: \"translate(-50%, 0)\",\n      backgroundColor: \"$primary\",\n      color: \"$secondary\",\n      transition: \"opacity 100ms ease-in-out\"\n    },\n    \"&[data-active=true]\": {\n      border: \"2px solid $accent !important\",\n      boxShadow: \"0 0 38vw 38vw #0003\",\n      zIndex: \"99999999\",\n      label: {\n        opacity: 1\n      }\n    }\n  }\n}), Fd = x(\"div\", {\n  width: \"100%\",\n  height: \"100%\",\n  maxHeight: \"100vh\",\n  background: \"transparent\",\n  backgroundSize: \"contain\",\n  color: \"white\",\n  position: \"relative\",\n  zIndex: \"0\",\n  overflow: \"hidden\",\n  variants: {\n    hasNavigator: {\n      true: {\n        [`${Et}`]: {\n          display: \"block\"\n        }\n      },\n      false: {\n        [`${Et}`]: {\n          display: \"none\"\n        }\n      }\n    }\n  }\n}), Re = ({ className: e, id: t, label: r, children: n }) => {\n  const i = r.toLowerCase().replace(/\\s/g, \"-\");\n  return /* @__PURE__ */ o.createElement(\n    zn,\n    {\n      id: t,\n      className: e,\n      \"data-testid\": \"openseadragon-button\",\n      \"data-button\": i\n    },\n    /* @__PURE__ */ o.createElement(\n      \"svg\",\n      {\n        xmlns: \"http://www.w3.org/2000/svg\",\n        \"aria-labelledby\": `${t}-svg-title`,\n        \"data-testid\": \"openseadragon-button-svg\",\n        focusable: \"false\",\n        viewBox: \"0 0 512 512\",\n        role: \"img\"\n      },\n      /* @__PURE__ */ o.createElement(\"title\", { id: `${t}-svg-title` }, r),\n      n\n    )\n  );\n}, _d = x(\"div\", {\n  position: \"absolute\",\n  zIndex: \"1\",\n  top: \"1rem\",\n  right: \"1rem\",\n  display: \"flex\",\n  \"@xs\": {\n    flexDirection: \"column\",\n    zIndex: \"2\"\n  },\n  variants: {\n    hasPlaceholder: {\n      true: {\n        right: \"3.618rem\",\n        \"@xs\": {\n          top: \"3.618rem\",\n          right: \"1rem\"\n        }\n      },\n      false: {\n        right: \"1rem\",\n        \"@xs\": {\n          top: \"1rem\",\n          right: \"1rem\"\n        }\n      }\n    }\n  }\n}), zd = () => /* @__PURE__ */ o.createElement(\n  \"path\",\n  {\n    strokeLinecap: \"round\",\n    strokeMiterlimit: \"10\",\n    strokeWidth: \"45\",\n    d: \"M256 112v288M400 256H112\"\n  }\n), Dd = () => /* @__PURE__ */ o.createElement(\n  \"path\",\n  {\n    strokeLinecap: \"round\",\n    strokeMiterlimit: \"10\",\n    strokeWidth: \"45\",\n    d: \"M400 256H112\"\n  }\n), Bd = () => /* @__PURE__ */ o.createElement(\n  \"path\",\n  {\n    fill: \"none\",\n    stroke: \"currentColor\",\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    strokeWidth: \"32\",\n    d: \"M432 320v112H320M421.8 421.77L304 304M80 192V80h112M90.2 90.23L208 208M320 80h112v112M421.77 90.2L304 208M192 432H80V320M90.23 421.8L208 304\"\n  }\n), Hd = () => /* @__PURE__ */ o.createElement(\"path\", { d: \"M448 440a16 16 0 01-12.61-6.15c-22.86-29.27-44.07-51.86-73.32-67C335 352.88 301 345.59 256 344.23V424a16 16 0 01-27 11.57l-176-168a16 16 0 010-23.14l176-168A16 16 0 01256 88v80.36c74.14 3.41 129.38 30.91 164.35 81.87C449.32 292.44 464 350.9 464 424a16 16 0 01-16 16z\" }), tr = () => /* @__PURE__ */ o.createElement(o.Fragment, null, /* @__PURE__ */ o.createElement(\n  \"path\",\n  {\n    fill: \"none\",\n    strokeLinecap: \"round\",\n    strokeMiterlimit: \"10\",\n    strokeWidth: \"45\",\n    d: \"M400 148l-21.12-24.57A191.43 191.43 0 00240 64C134 64 48 150 48 256s86 192 192 192a192.09 192.09 0 00181.07-128\"\n  }\n), /* @__PURE__ */ o.createElement(\"path\", { d: \"M464 97.42V208a16 16 0 01-16 16H337.42c-14.26 0-21.4-17.23-11.32-27.31L436.69 86.1C446.77 76 464 83.16 464 97.42z\" })), Wd = ({\n  _cloverViewerHasPlaceholder: e,\n  config: t\n}) => {\n  const r = z(), { activeCanvas: n, plugins: i, vault: a, openSeadragonViewer: s } = r, l = a.get({\n    id: n,\n    type: \"Canvas\"\n  });\n  function d() {\n    return i.filter((u) => {\n      var c;\n      return (c = u.imageViewer) == null ? void 0 : c.controls;\n    }).map((u, c) => {\n      var p, f, g, h;\n      const m = (f = (p = u.imageViewer) == null ? void 0 : p.controls) == null ? void 0 : f.component;\n      return /* @__PURE__ */ o.createElement(\n        m,\n        {\n          key: c,\n          ...(h = (g = u == null ? void 0 : u.imageViewer) == null ? void 0 : g.controls) == null ? void 0 : h.componentProps,\n          canvas: l,\n          useViewerDispatch: X,\n          useViewerState: z\n        }\n      );\n    });\n  }\n  return T(() => {\n    if (!s) return;\n    const u = s.viewport.getRotation();\n    s.addHandler(\"home\", () => {\n      s.viewport.setRotation(u);\n    });\n  }, [s]), /* @__PURE__ */ o.createElement(\n    _d,\n    {\n      \"data-testid\": \"clover-iiif-image-openseadragon-controls\",\n      hasPlaceholder: e\n    },\n    t.showZoomControl && /* @__PURE__ */ o.createElement(o.Fragment, null, /* @__PURE__ */ o.createElement(Re, { id: t.zoomInButton, label: \"zoom in\" }, /* @__PURE__ */ o.createElement(zd, null)), /* @__PURE__ */ o.createElement(Re, { id: t.zoomOutButton, label: \"zoom out\" }, /* @__PURE__ */ o.createElement(Dd, null))),\n    t.showFullPageControl && /* @__PURE__ */ o.createElement(Re, { id: t.fullPageButton, label: \"full page\" }, /* @__PURE__ */ o.createElement(Bd, null)),\n    t.showRotationControl && /* @__PURE__ */ o.createElement(o.Fragment, null, /* @__PURE__ */ o.createElement(Re, { id: t.rotateRightButton, label: \"rotate right\" }, /* @__PURE__ */ o.createElement(tr, null)), /* @__PURE__ */ o.createElement(Re, { id: t.rotateLeftButton, label: \"rotate left\" }, /* @__PURE__ */ o.createElement(tr, null))),\n    t.showHomeControl && /* @__PURE__ */ o.createElement(Re, { id: t.homeButton, label: \"reset\" }, /* @__PURE__ */ o.createElement(Hd, null)),\n    d()\n  );\n};\nasync function ii(e, t = 3, r = 500) {\n  try {\n    return await e();\n  } catch (n) {\n    if (t <= 0) throw n;\n    return await new Promise((i) => setTimeout(i, r)), ii(e, t - 1, r);\n  }\n}\nconst Nd = (e) => new Promise((t) => setTimeout(t, e)), rr = async (e, t, r = 3, n = 300) => {\n  for (let i = 0; i < r; i++) {\n    const a = t ? t - 1 : 0, s = e.getItemAt(a);\n    if (s) return s;\n    await Nd(n);\n  }\n  throw new Error(\"No base item found at index 0 after retries\");\n}, Vd = ({\n  annotations: e,\n  ariaLabel: t,\n  config: r,\n  uri: n,\n  _cloverViewerHasPlaceholder: i,\n  imageType: a,\n  openSeadragonCallback: s\n}) => {\n  const [l, d] = P([]), [u, c] = P([]), [m, p] = P(), [f, g] = P([]), h = X(), w = Ue(!1), v = \"clover-iiif-image-openseadragon-annotation\";\n  T(() => (w.current || (w.current = !0, m || p(ke(r))), () => m == null ? void 0 : m.destroy()), []), T(() => {\n    b();\n  }, [m, s]), T(() => {\n    m && JSON.stringify(n) !== JSON.stringify(u) && (m.forceRedraw(), c(n));\n  }, [m, u, n]), T(() => {\n    if (!u.length || !m) return;\n    m.close(), (async () => {\n      switch (a) {\n        case \"simpleImage\":\n          let y = 1, S = 0;\n          for (let C = 0; C < u.length; C++) {\n            const A = u[C];\n            if (e) {\n              const I = new Image();\n              I.src = A, await I.decode(), g((O) => [\n                ...O,\n                {\n                  width: I == null ? void 0 : I.width,\n                  height: I == null ? void 0 : I.height\n                }\n              ]);\n            }\n            try {\n              if (C !== 0) {\n                const O = (await rr(\n                  m.world,\n                  C\n                )).getBounds();\n                S = O.x + O.width, y = O.height;\n              }\n              m.addSimpleImage({\n                url: A,\n                x: S,\n                y: 0,\n                height: y,\n                success: () => {\n                  d((I) => [...I, A]), typeof h == \"function\" && h({\n                    type: \"updateOSDImageLoaded\",\n                    OSDImageLoaded: !0\n                  });\n                }\n              });\n            } catch (I) {\n              console.error(`Failed to load image at ${A}:`, I);\n            }\n          }\n          break;\n        case \"tiledImage\": {\n          let C = 1, A = 0;\n          for (let I = 0; I < u.length; I++) {\n            const O = u[I];\n            try {\n              const $ = await ii(\n                () => Cd(O),\n                3,\n                1e3\n              );\n              if (!$) throw new Error(`No tile source for ${O}`);\n              if (I !== 0) {\n                const V = (await rr(\n                  m.world,\n                  I\n                )).getBounds();\n                A = V.x + V.width, C = V.height;\n              }\n              m.addTiledImage({\n                tileSource: $,\n                x: A,\n                y: 0,\n                height: C,\n                success: () => {\n                  d((F) => [...F, O]), typeof h == \"function\" && h({\n                    type: \"updateOSDImageLoaded\",\n                    OSDImageLoaded: !0\n                  });\n                }\n              });\n            } catch ($) {\n              console.error(`Failed to load tile at ${O}:`, $);\n            }\n          }\n          break;\n        }\n        default:\n          console.warn(`Unsupported imageType: \"${a}\"`);\n          break;\n      }\n    })().catch((y) => console.error(\"Error drawing tiles\", y));\n  }, [u, a, m]), T(() => {\n    if (l) {\n      let y = 0;\n      const S = () => {\n        if (y < 3) {\n          const C = m == null ? void 0 : m.world.getHomeBounds();\n          C && (m == null || m.viewport.fitBounds(C, !0)), y++, setTimeout(S, 50);\n        }\n      };\n      S(), m == null || m.addHandler(\"canvas-click\", (C) => {\n        const A = m == null ? void 0 : m.getOverlayById(\n          C.originalTarget.id\n        );\n        if (A) {\n          const I = A == null ? void 0 : A.getBounds(m.viewport);\n          return I.x -= 0.1, I.y -= 0.1, I.width += 0.2, I.height += 0.2, m == null || m.viewport.fitBounds(I, !1), C.preventDefaultAction = !0;\n        }\n      });\n    }\n  }, [l]), T(() => {\n    function E(y, S, C) {\n      let A = y * C;\n      if (S === 0) return A;\n      for (; S > 0; ) {\n        const I = m == null ? void 0 : m.world.getItemAt(S - 1);\n        if (I) {\n          const O = I.getBounds().width;\n          A += O, S--;\n        } else\n          break;\n      }\n      return A;\n    }\n    e && (m == null || m.clearOverlays(), e.forEach((y) => {\n      var V, te, L, J;\n      const { annotation: S, targetIndex: C } = y, A = ((te = (V = m == null ? void 0 : m.viewport) == null ? void 0 : V.getBounds()) == null ? void 0 : te.width) || 1, I = m == null ? void 0 : m.world.getItemAt(C), O = I ? (I == null ? void 0 : I.getBounds().width) / (I == null ? void 0 : I.getContentSize().x) : ((L = f[C]) == null ? void 0 : L.width) / A, $ = Lo(\n        S == null ? void 0 : S.target\n      ), F = S != null && S.body ? (J = S == null ? void 0 : S.body[0]) == null ? void 0 : J.value : void 0;\n      if ($ != null && $.rect) {\n        const { x: K, y: G, w: oe, h: ve } = $ == null ? void 0 : $.rect, _ = E(K, C, O), B = new ke.Rect(\n          _,\n          G * O,\n          oe * O,\n          ve * O\n        ), k = document.createElement(\"button\");\n        if (k.classList.add(v), k.id = S.id, k.setAttribute(\"tabindex\", \"0\"), k.setAttribute(\"role\", \"button\"), k.setAttribute(\"data-active\", \"true\"), k.setAttribute(\"tabindex\", \"0\"), k.setAttribute(\"role\", \"button\"), k.setAttribute(\"data-active\", \"false\"), F) {\n          k.setAttribute(\"aria-label\", F);\n          const D = document.createElement(\"label\");\n          D.innerHTML = F, k.appendChild(D);\n        }\n        k.addEventListener(\"mousedown\", (D) => {\n          D.stopPropagation(), D.preventDefault();\n        }), k.addEventListener(\"touchstart\", (D) => {\n          D.stopPropagation(), D.preventDefault();\n        }), k.addEventListener(\"click\", (D) => {\n          D.stopPropagation(), D.preventDefault();\n        }), k.addEventListener(\"keydown\", (D) => {\n          if (D.key === \"Enter\") {\n            D.stopPropagation(), D.preventDefault();\n            const M = new ke.Rect(\n              B.x - 0.1,\n              B.y - 0.1,\n              B.width + 0.2,\n              B.height + 0.2\n            );\n            m == null || m.viewport.fitBounds(M, !1);\n          }\n        }), k.addEventListener(\"focus\", () => {\n          k.setAttribute(\"data-active\", \"true\");\n        }), k.addEventListener(\"mouseover\", () => {\n          k.setAttribute(\"data-active\", \"true\");\n        }), k.addEventListener(\"mouseout\", () => {\n          k.removeAttribute(\"data-active\");\n        }), k.addEventListener(\"blur\", () => {\n          k.removeAttribute(\"data-active\");\n        }), m == null || m.addOverlay(k, B, ke.Placement.CENTER);\n      }\n    }), b());\n  }, [l, e]);\n  function b() {\n    m && (s == null || s(m));\n  }\n  return /* @__PURE__ */ o.createElement(\n    Fd,\n    {\n      className: \"clover-iiif-image-openseadragon\",\n      \"data-testid\": \"clover-iiif-image-openseadragon\",\n      \"data-openseadragon-instance\": r.id,\n      hasNavigator: r.showNavigator\n    },\n    /* @__PURE__ */ o.createElement(\n      Wd,\n      {\n        _cloverViewerHasPlaceholder: i,\n        config: r\n      }\n    ),\n    r.showNavigator && /* @__PURE__ */ o.createElement(\n      Et,\n      {\n        id: r.navigatorId,\n        \"data-testid\": \"clover-iiif-image-openseadragon-navigator\"\n      }\n    ),\n    /* @__PURE__ */ o.createElement(\n      Ld,\n      {\n        id: r.id,\n        \"data-testid\": \"clover-iiif-image-openseadragon-viewport\",\n        role: \"img\",\n        ...t && { \"aria-label\": t }\n      }\n    )\n  );\n};\nfunction Ud(e) {\n  return {\n    id: `openseadragon-${e}`,\n    navigatorId: `openseadragon-navigator-${e}`,\n    loadTilesWithAjax: !0,\n    fullPageButton: `fullPage-${e}`,\n    homeButton: `reset-${e}`,\n    rotateLeftButton: `rotateLeft-${e}`,\n    rotateRightButton: `rotateRight-${e}`,\n    zoomInButton: `zoomIn-${e}`,\n    zoomOutButton: `zoomOut-${e}`,\n    showNavigator: !0,\n    showFullPageControl: !0,\n    showHomeControl: !0,\n    showRotationControl: !0,\n    showZoomControl: !0,\n    navigatorBorderColor: \"transparent\",\n    gestureSettingsMouse: {\n      clickToZoom: !0,\n      dblClickToZoom: !0,\n      pinchToZoom: !0,\n      scrollToZoom: !1\n    }\n  };\n}\nconst qd = ({\n  _cloverViewerHasPlaceholder: e = !1,\n  annotations: t,\n  body: r,\n  instanceId: n,\n  isTiledImage: i = !1,\n  label: a,\n  src: s = \"\",\n  openSeadragonCallback: l,\n  openSeadragonConfig: d = {}\n}) => {\n  const u = n ?? Me(), c = typeof a == \"string\" ? a : Z(a), m = {\n    ...Ud(u),\n    ...d\n  }, p = Array.isArray(r) ? r : r ? [r] : [], f = Array.isArray(s) ? s : s ? [s] : [];\n  let g = [], h = ee.SimpleImage;\n  if (p.length) {\n    const v = p.map(Od);\n    g = v.map((b) => b.uri).filter(Boolean), h = v.some(\n      (b) => b.imageType === ee.TiledImage\n    ) ? ee.TiledImage : ee.SimpleImage;\n  } else if (f.length) {\n    const v = f.map((b) => Pd(b, i));\n    g = v.map((b) => b.uri).filter(Boolean), h = v.some(\n      (b) => b.imageType === ee.TiledImage\n    ) ? ee.TiledImage : ee.SimpleImage;\n  }\n  if (!g.length) return null;\n  const w = (v) => {\n    l == null || l(v);\n  };\n  return /* @__PURE__ */ o.createElement(St, { FallbackComponent: It }, /* @__PURE__ */ o.createElement(\n    Vd,\n    {\n      _cloverViewerHasPlaceholder: e,\n      annotations: t,\n      ariaLabel: c,\n      config: m,\n      imageType: h,\n      key: u,\n      uri: g,\n      openSeadragonCallback: w\n    }\n  ));\n}, jd = ({\n  isActive: e,\n  isMedia: t,\n  items: r,\n  setIsInteractive: n\n}) => {\n  const { vault: i } = z(), [a, s] = P([]), l = a.length > 1;\n  if (T(() => {\n    s([]);\n    const c = r.map((m) => {\n      const p = he(i, m.id);\n      if (!p) return null;\n      const { id: f, width: g, height: h } = p[0];\n      return f ? {\n        src: f,\n        width: g || 640,\n        height: h || 640,\n        alt: m.label ? At(m.label) : \"placeholder image\"\n      } : null;\n    }).filter((m) => m !== null);\n    c.length && s(c);\n  }, [r, l]), !e || !a.length) return null;\n  const d = a.map((c) => c.width / c.height * 1), u = d.reduce((c, m) => c + m, 0);\n  return /* @__PURE__ */ o.createElement(\n    _n,\n    {\n      onClick: () => n(!0),\n      isMedia: t,\n      className: \"clover-viewer-placeholder\",\n      \"data-active\": e,\n      \"data-paged\": l\n    },\n    a.map((c, m) => {\n      const p = d[m] / u * 100;\n      return /* @__PURE__ */ o.createElement(\n        \"img\",\n        {\n          ...c,\n          key: m,\n          alt: c.alt,\n          style: {\n            width: `${p}%`\n          }\n        }\n      );\n    })\n  );\n}, Gd = x(\"canvas\", {\n  position: \"absolute\",\n  width: \"100%\",\n  height: \"100%\",\n  zIndex: \"0\"\n}), Qd = o.forwardRef(\n  (e, t) => {\n    const r = o.useRef(null), n = qe(() => {\n      var f, g;\n      if ((f = t.current) != null && f.currentTime && ((g = t.current) == null ? void 0 : g.currentTime) > 0) return;\n      const a = t.current;\n      if (!a) return;\n      const s = new AudioContext(), l = s.createMediaElementSource(a), d = s.createAnalyser(), u = r.current;\n      if (!u) return;\n      u.width = a.offsetWidth, u.height = a.offsetHeight;\n      const c = u.getContext(\"2d\");\n      l.connect(d), d.connect(s.destination), d.fftSize = 256;\n      const m = d.frequencyBinCount, p = new Uint8Array(m);\n      setInterval(function() {\n        i(\n          d,\n          c,\n          m,\n          p,\n          u.width,\n          u.height\n        );\n      }, 20);\n    }, [t]);\n    o.useEffect(() => {\n      !t || !t.current || (t.current.onplay = n);\n    }, [n, t]);\n    function i(a, s, l, d, u, c) {\n      const m = u / l * 2.6;\n      let p, f = 0;\n      a.getByteFrequencyData(d), s.fillStyle = \"#000000\", s.fillRect(0, 0, u, c);\n      for (let g = 0; g < l; g++)\n        p = d[g] * 2, s.fillStyle = \"rgba(78, 42, 132, 1)\", s.fillRect(f, c - p, m, p), f += m + 6;\n    }\n    return /* @__PURE__ */ o.createElement(Gd, { ref: r, role: \"presentation\" });\n  }\n), Jd = x(\"div\", {\n  position: \"relative\",\n  backgroundColor: \"$primaryAlt\",\n  display: \"flex\",\n  flexGrow: \"0\",\n  flexShrink: \"1\",\n  height: \"100%\",\n  zIndex: \"1\",\n  video: {\n    backgroundColor: \"transparent\",\n    objectFit: \"contain\",\n    width: \"100%\",\n    height: \"100%\",\n    position: \"relative\",\n    zIndex: \"1\"\n  }\n}), Yd = ({ resource: e, ignoreCaptionLabels: t }) => {\n  const r = At(e.label, \"en\");\n  return Array.isArray(r) && r.some((i) => t.includes(i)) ? null : /* @__PURE__ */ o.createElement(\n    \"track\",\n    {\n      key: e.id,\n      src: e.id,\n      label: Array.isArray(r) ? r[0] : r,\n      srcLang: \"en\",\n      \"data-testid\": \"player-track\"\n    }\n  );\n}, Xd = [\n  // Apple santioned\n  \"application/vnd.apple.mpegurl\",\n  \"vnd.apple.mpegurl\",\n  // Apple sanctioned for backwards compatibility\n  \"audio/mpegurl\",\n  // Very common\n  \"audio/x-mpegurl\",\n  // Very common\n  \"application/x-mpegurl\",\n  // Included for completeness\n  \"video/x-mpegurl\",\n  \"video/mpegurl\",\n  \"application/mpegurl\"\n], Zd = ({\n  allSources: e,\n  annotationResources: t,\n  painting: r\n}) => {\n  const [n, i] = o.useState(0), [a, s] = o.useState(), l = o.useRef(null), d = (r == null ? void 0 : r.type) === \"Sound\", u = X(), c = z(), { activeCanvas: m, configOptions: p, contentStateAnnotation: f, vault: g } = c;\n  return T(() => {\n    if (!r.id || !l.current) return;\n    if (l != null && l.current) {\n      const v = l.current;\n      u({\n        type: \"updateActivePlayer\",\n        player: v\n      }), v.src = r.id, v.load();\n    }\n    if (r.id.split(\".\").pop() !== \"m3u8\" && r.format && !Xd.includes(r.format))\n      return;\n    const h = {\n      // eslint-disable-next-line @typescript-eslint/no-unused-vars\n      xhrSetup: function(v, b) {\n        v.withCredentials = !!p.withCredentials;\n      }\n    }, w = new ne(h);\n    return w.attachMedia(l.current), w.on(ne.Events.MEDIA_ATTACHED, function() {\n      w.loadSource(r.id);\n    }), w.on(ne.Events.ERROR, function(v, b) {\n      if (b.fatal)\n        switch (b.type) {\n          case ne.ErrorTypes.NETWORK_ERROR:\n            console.error(\n              `fatal ${v} network error encountered, try to recover`\n            ), w.startLoad();\n            break;\n          case ne.ErrorTypes.MEDIA_ERROR:\n            console.error(\n              `fatal ${v} media error encountered, try to recover`\n            ), w.recoverMediaError();\n            break;\n          default:\n            w.destroy();\n            break;\n        }\n    }), () => {\n      if (w && l.current) {\n        const v = l.current;\n        w.detachMedia(), w.destroy(), v.currentTime = 0;\n      }\n    };\n  }, [\n    p.withCredentials,\n    r.id,\n    r.format,\n    u\n  ]), T(() => {\n    var E, y, S, C;\n    const h = g.get(m), w = (E = h.accompanyingCanvas) != null && E.id ? he(g, (y = h.accompanyingCanvas) == null ? void 0 : y.id) : null, v = (S = h.placeholderCanvas) != null && S.id ? he(g, (C = h.placeholderCanvas) == null ? void 0 : C.id) : null;\n    !!(w && v) ? s(n === 0 ? v[0].id : w[0].id) : (w && s(w[0].id), v && s(v[0].id));\n  }, [m, n, g]), T(() => {\n    const h = l == null ? void 0 : l.current;\n    if (!h) return;\n    let w = null, v = !1;\n    const b = () => {\n      v || (v = !0, w = setInterval(() => {\n        h && !h.paused && !h.ended && (i(h.currentTime), u({\n          type: \"updateActiveSelector\",\n          selector: {\n            type: \"PointSelector\",\n            t: Math.round(h.currentTime)\n          }\n        }));\n      }, 500)), h && h.paused && (i(h.currentTime), u({\n        type: \"updateActiveSelector\",\n        selector: {\n          type: \"PointSelector\",\n          t: Math.round(h.currentTime)\n        }\n      }));\n    };\n    return h.addEventListener(\"timeupdate\", b), () => {\n      h == null || h.removeEventListener(\"timeupdate\", b), w && clearInterval(w);\n    };\n  }, [r.id, m]), T(() => {\n    var h, w;\n    if (f) {\n      const v = l == null ? void 0 : l.current;\n      if (!v) return;\n      const b = (h = f == null ? void 0 : f.target) == null ? void 0 : h.selector, { type: E, t: y, value: S } = b || {};\n      if (// @ts-ignore\n      (((w = f == null ? void 0 : f.target) == null ? void 0 : w.source) || (f == null ? void 0 : f.target)).id !== m) return;\n      if (y && E === \"PointSelector\" && (i(y), v.currentTime = y), E === \"FragmentSelector\" && S) {\n        const A = S.split(\"=\")[1];\n        if (!A) return;\n        const I = A.split(\",\")[0];\n        i(I), v.currentTime = I;\n      }\n    }\n  }, [l, f]), /* @__PURE__ */ o.createElement(\n    Jd,\n    {\n      css: {\n        backgroundColor: p.canvasBackgroundColor,\n        maxHeight: p.canvasHeight,\n        position: \"relative\"\n      },\n      \"data-testid\": \"player-wrapper\",\n      className: \"clover-viewer-player-wrapper\"\n    },\n    /* @__PURE__ */ o.createElement(\n      \"video\",\n      {\n        id: \"clover-iiif-video\",\n        key: r.id,\n        ref: l,\n        \"data-src\": r.id,\n        controls: !0,\n        height: r.height,\n        width: r.width,\n        crossOrigin: p.crossOrigin,\n        poster: a,\n        style: {\n          maxHeight: p.canvasHeight,\n          position: \"relative\",\n          zIndex: \"1\"\n        }\n      },\n      e.map((h) => /* @__PURE__ */ o.createElement(\"source\", { src: h.id, type: h.format, key: h.id })),\n      (t == null ? void 0 : t.length) > 0 && t.map((h) => {\n        const w = [];\n        return h.items.forEach((v) => {\n          g.get(\n            v.id\n          ).body.forEach((E) => {\n            const y = g.get(\n              E.id\n            );\n            w.push(y);\n          });\n        }), w.map((v) => /* @__PURE__ */ o.createElement(\n          Yd,\n          {\n            resource: v,\n            ignoreCaptionLabels: p.ignoreCaptionLabels || [],\n            key: v.id\n          }\n        ));\n      }),\n      \"Sorry, your browser doesn't support embedded videos.\"\n    ),\n    d && /* @__PURE__ */ o.createElement(Qd, { ref: l })\n  );\n}, Kd = () => /* @__PURE__ */ o.createElement(\n  \"svg\",\n  {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"aria-labelledby\": \"close-svg-title\",\n    focusable: \"false\",\n    viewBox: \"0 0 512 512\",\n    role: \"img\"\n  },\n  /* @__PURE__ */ o.createElement(\"title\", { id: \"close-svg-title\" }, \"close\"),\n  /* @__PURE__ */ o.createElement(\"path\", { d: \"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z\" })\n), eu = ({ isMedia: e }) => /* @__PURE__ */ o.createElement(\n  \"svg\",\n  {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"aria-labelledby\": \"open-svg-title\",\n    focusable: \"false\",\n    viewBox: \"0 0 512 512\",\n    role: \"img\"\n  },\n  /* @__PURE__ */ o.createElement(\"title\", { id: \"open-svg-title\" }, \"open\"),\n  e ? /* @__PURE__ */ o.createElement(\"path\", { d: \"M133 440a35.37 35.37 0 01-17.5-4.67c-12-6.8-19.46-20-19.46-34.33V111c0-14.37 7.46-27.53 19.46-34.33a35.13 35.13 0 0135.77.45l247.85 148.36a36 36 0 010 61l-247.89 148.4A35.5 35.5 0 01133 440z\" }) : /* @__PURE__ */ o.createElement(o.Fragment, null, /* @__PURE__ */ o.createElement(\"path\", { d: \"m456.69,421.39l-94.09-94.09c22.65-30.16,34.88-66.86,34.84-104.58,0-96.34-78.38-174.72-174.72-174.72S48,126.38,48,222.72s78.38,174.72,174.72,174.72c37.72.04,74.42-12.19,104.58-34.84l94.09,94.09c10.29,9.2,26.1,8.32,35.3-1.98,8.48-9.49,8.48-23.83,0-33.32Zm-233.97-73.87c-68.89-.08-124.72-55.91-124.8-124.8h0c0-68.93,55.87-124.8,124.8-124.8s124.8,55.87,124.8,124.8-55.87,124.8-124.8,124.8Z\" }), /* @__PURE__ */ o.createElement(\"path\", { d: \"m279.5,197.76h-3.35s-28.47,0-28.47,0v-31.82c-.77-13.79-12.57-24.33-26.36-23.56-12.71.71-22.85,10.86-23.56,23.56v3.35h0v28.47h-31.82c-13.79.77-24.33,12.57-23.56,26.36.71,12.71,10.86,22.85,23.56,23.56h3.35s28.47,0,28.47,0v31.82c.77,13.79,12.57,24.33,26.36,23.56,12.71-.71,22.85-10.86,23.56-23.56v-3.35h0v-28.47h31.82c13.79-.77,24.33-12.57,23.56-26.36-.71-12.71-10.86-22.85-23.56-23.56Z\" }))\n), tu = ({\n  handleToggle: e,\n  isInteractive: t,\n  isMedia: r\n}) => /* @__PURE__ */ o.createElement(\n  Dn,\n  {\n    onClick: e,\n    isInteractive: t,\n    isMedia: r,\n    \"data-testid\": \"placeholder-toggle\"\n  },\n  t ? /* @__PURE__ */ o.createElement(Kd, null) : /* @__PURE__ */ o.createElement(eu, { isMedia: r })\n), ru = ({\n  activeCanvas: e,\n  annotationResources: t,\n  contentSearchResource: r,\n  isMedia: n,\n  painting: i\n}) => {\n  var _, B, k, D;\n  const [a, s] = o.useState(0), [l, d] = o.useState(!1), [u, c] = o.useState([]), [m, p] = o.useState([]), [f, g] = o.useState(0), {\n    configOptions: h,\n    customDisplays: w,\n    contentStateAnnotation: v,\n    informationPanelResource: b,\n    openSeadragonViewer: E,\n    vault: y,\n    viewerId: S,\n    visibleCanvases: C\n  } = z(), [A, I] = o.useState([]), O = !!v && e === ((B = (_ = v == null ? void 0 : v.target) == null ? void 0 : _.source) == null ? void 0 : B.id), $ = X(), F = y.get(e), V = m.length && !l && !n, te = (i == null ? void 0 : i.length) > 1, L = `${S}-${Br(e + a + JSON.stringify(C) + f)}`, J = () => {\n    d(!l), g((M) => M + 1);\n  }, K = (M) => {\n    const q = i.findIndex((Y) => Y.id === M);\n    s(q);\n  }, G = w.find((M) => {\n    var W;\n    let q = !1;\n    const { canvasId: Y, paintingFormat: re } = M.target;\n    if (Array.isArray(Y) && Y.length > 0 && (q = Y.includes(e)), Array.isArray(re) && re.length > 0) {\n      const U = ((W = i[a]) == null ? void 0 : W.format) || \"\";\n      q = !!(U && re.includes(U));\n    }\n    return q;\n  });\n  T(() => {\n    O && V && f === 0 && J();\n  }, [O, V]), T(() => {\n    V && ($({\n      type: \"updateOpenSeadragonViewer\",\n      openSeadragonViewer: void 0\n    }), $({\n      type: \"updateActiveSelector\",\n      selector: void 0\n    }));\n  }, [V]), T(() => {\n    var q, Y, re;\n    const M = [];\n    if (b === \"manifest-annotations\" && (t == null || t.forEach((W, U) => {\n      var se;\n      (se = W == null ? void 0 : W.items) == null || se.forEach((le) => {\n        const Ae = y.get(le.id);\n        Ae && M.push({\n          annotation: {\n            ...Ae,\n            body: Ae.body.map((Pt) => {\n              const Lt = y.get(Pt.id);\n              return Lt || Pt;\n            })\n          },\n          targetIndex: U\n        });\n      });\n    }), v)) {\n      const W = (\n        // @ts-ignore\n        ((q = v == null ? void 0 : v.target) == null ? void 0 : q.source) || (v == null ? void 0 : v.target)\n      );\n      M.push({\n        // @ts-ignore\n        annotation: {\n          ...v,\n          body: (Y = v == null ? void 0 : v.body) == null ? void 0 : Y.map((U) => {\n            const se = y.get(U.id);\n            return se || U;\n          })\n        },\n        targetIndex: C.findIndex(\n          (U) => U.id === W.id\n        )\n      });\n    }\n    b === \"manifest-content-search\" && ((re = r == null ? void 0 : r.items) == null || re.forEach((W) => {\n      const U = y.get(W.id);\n      if (U) {\n        const se = C.findIndex(\n          (le) => le.id === U.target.source.id\n        );\n        typeof se == \"number\" && M.push({\n          annotation: {\n            ...U,\n            body: U.body.map((le) => {\n              const Ae = y.get(le.id);\n              return Ae || le;\n            })\n          },\n          targetIndex: se\n        });\n      }\n    })), I(M);\n  }, [\n    t,\n    r,\n    v,\n    b,\n    C\n  ]), T(() => {\n    if (!n) {\n      const M = C.map((Y) => {\n        const re = Y.id, W = he(y, re);\n        return W ? W[a] : void 0;\n      }).filter(Boolean), q = C.map((Y) => {\n        var le;\n        const re = Y.id, W = y.get(re), U = (le = W == null ? void 0 : W.placeholderCanvas) == null ? void 0 : le.id;\n        return !!!U || !U ? null : {\n          id: U,\n          label: W == null ? void 0 : W.label\n        };\n      }).filter((Y) => Y !== null);\n      c(M), p(q);\n    }\n  }, [\n    a,\n    e,\n    C,\n    n,\n    F\n  ]), T(() => {\n    s(0);\n  }, [C]);\n  const oe = (M) => {\n    M && !V && // @ts-ignore\n    (E == null ? void 0 : E.id) !== `openseadragon-${L}` && $({\n      type: \"updateOpenSeadragonViewer\",\n      openSeadragonViewer: M\n    });\n  }, ve = (k = G == null ? void 0 : G.display) == null ? void 0 : k.component;\n  return /* @__PURE__ */ o.createElement(Jl, { className: \"clover-viewer-painting\" }, /* @__PURE__ */ o.createElement(\n    Yl,\n    {\n      style: {\n        backgroundColor: h.canvasBackgroundColor,\n        height: h.canvasHeight === \"auto\" ? \"100%\" : h.canvasHeight\n      }\n    },\n    !!m.length && !n && /* @__PURE__ */ o.createElement(\n      tu,\n      {\n        handleToggle: J,\n        isInteractive: l,\n        isMedia: n\n      }\n    ),\n    !!(m != null && m.length) && !n && /* @__PURE__ */ o.createElement(\n      jd,\n      {\n        isActive: !!V,\n        isMedia: n,\n        items: m,\n        setIsInteractive: d\n      }\n    ),\n    !V && !G && (n ? /* @__PURE__ */ o.createElement(\n      Zd,\n      {\n        allSources: i,\n        painting: i[a],\n        annotationResources: t\n      }\n    ) : i && /* @__PURE__ */ o.createElement(\n      qd,\n      {\n        _cloverViewerHasPlaceholder: !!(m != null && m.length),\n        annotations: A,\n        body: u,\n        instanceId: L,\n        key: L,\n        openSeadragonCallback: oe,\n        openSeadragonConfig: h.openSeadragon\n      }\n    )),\n    !V && ve && /* @__PURE__ */ o.createElement(\n      ve,\n      {\n        id: e,\n        annotationBody: i[a],\n        hooks: { useViewerDispatch: X, useViewerState: z },\n        ...G == null ? void 0 : G.display.componentProps\n      }\n    )\n  ), te && /* @__PURE__ */ o.createElement(\n    Hn,\n    {\n      value: (D = i[a]) == null ? void 0 : D.id,\n      onValueChange: K,\n      maxHeight: \"200px\"\n    },\n    i == null ? void 0 : i.map((M) => /* @__PURE__ */ o.createElement(\n      Wn,\n      {\n        value: M == null ? void 0 : M.id,\n        key: M == null ? void 0 : M.id,\n        label: M == null ? void 0 : M.label\n      }\n    ))\n  ));\n}, nu = ({\n  activeCanvas: e,\n  annotationResources: t,\n  searchServiceUrl: r,\n  setContentSearchResource: n,\n  contentSearchResource: i,\n  isAudioVideo: a,\n  items: s,\n  painting: l\n}) => {\n  var E, y;\n  const {\n    contentStateAnnotation: d,\n    isInformationOpen: u,\n    configOptions: c,\n    sequence: m,\n    visibleCanvases: p\n  } = z(), { informationPanel: f } = c, g = p.map((S) => S.id), w = (t.length > 0 || // @ts-ignore\n  g.includes((y = (E = d == null ? void 0 : d.target) == null ? void 0 : E.source) == null ? void 0 : y.id)) && (f == null ? void 0 : f.renderAnnotation), v = (f == null ? void 0 : f.renderAbout) && u || w, b = f == null ? void 0 : f.renderToggle;\n  return /* @__PURE__ */ o.createElement(\n    Qr,\n    {\n      className: \"clover-viewer-content\",\n      \"data-testid\": \"clover-viewer-content\"\n    },\n    /* @__PURE__ */ o.createElement(Jr, { \"data-aside-active\": v, \"data-aside-toggle\": b }, /* @__PURE__ */ o.createElement(\n      ru,\n      {\n        activeCanvas: e,\n        annotationResources: t,\n        contentSearchResource: i,\n        isMedia: a,\n        painting: l\n      }\n    ), m[1].length > 1 && /* @__PURE__ */ o.createElement(po, { className: \"clover-viewer-media-wrapper\" }, /* @__PURE__ */ o.createElement(Ql, { items: s, activeItem: 0 }))),\n    v && /* @__PURE__ */ o.createElement(go, { \"data-aside-active\": v, \"data-aside-toggle\": b }, /* @__PURE__ */ o.createElement(\n      Is,\n      {\n        activeCanvas: e,\n        annotationResources: t,\n        searchServiceUrl: r,\n        setContentSearchResource: n,\n        contentSearchResource: i\n      }\n    ))\n  );\n}, iu = x(Ce.Trigger, {\n  width: \"30px\",\n  padding: \"5px\"\n}), ai = x(Ce.Content, {\n  display: \"flex\",\n  flexDirection: \"column\",\n  fontSize: \"0.8333rem\",\n  border: \"none\",\n  boxShadow: \"2px 2px 5px #0003\",\n  zIndex: \"2\",\n  button: {\n    display: \"flex\",\n    textDecoration: \"none\",\n    marginBottom: \"0.5em\",\n    color: \"$accentAlt\",\n    cursor: \"pointer\",\n    background: \"$secondary\",\n    border: \"none\",\n    \"&:last-child\": {\n      marginBottom: \"0\"\n    }\n  }\n}), au = x(\"span\", {\n  fontSize: \"1.33rem\",\n  alignSelf: \"flex-start\",\n  flexGrow: \"0\",\n  flexShrink: \"1\",\n  padding: \"1rem\",\n  \"@sm\": {\n    fontSize: \"1rem\"\n  },\n  \"&.visually-hidden\": {\n    position: \"absolute\",\n    width: \"1px\",\n    height: \"1px\",\n    padding: \"0\",\n    margin: \"-1px\",\n    overflow: \"hidden\",\n    clip: \"rect(0, 0, 0, 0)\",\n    whiteSpace: \"nowrap\",\n    border: \"0\"\n  }\n}), ou = x(\"header\", {\n  display: \"flex\",\n  backgroundColor: \"transparent !important\",\n  justifyContent: \"space-between\",\n  alignItems: \"flex-start\",\n  width: \"100%\",\n  [`> ${Bn}`]: {\n    flexGrow: \"1\",\n    flexShrink: \"0\"\n  },\n  form: {\n    flexGrow: \"0\",\n    flexShrink: \"1\"\n  }\n}), su = x(\"div\", {\n  display: \"flex\",\n  alignItems: \"flex-end\",\n  justifyContent: \"flex-end\",\n  padding: \"1rem\",\n  flexShrink: \"0\",\n  flexGrow: \"1\"\n}), lu = () => {\n  var d;\n  const e = X(), t = z(), { activeManifest: r, collection: n, configOptions: i, vault: a } = t, s = i == null ? void 0 : i.canvasHeight, l = (u) => {\n    e({\n      type: \"updateActiveCanvas\",\n      canvasId: void 0\n    }), e({\n      type: \"updateActiveManifest\",\n      manifestId: u\n    }), e({\n      type: \"updateViewerId\",\n      viewerId: Me()\n    });\n  };\n  return /* @__PURE__ */ o.createElement(\"div\", { style: { margin: \"0.75rem\" } }, /* @__PURE__ */ o.createElement(\n    Hn,\n    {\n      label: n.label,\n      maxHeight: s,\n      value: r,\n      onValueChange: l\n    },\n    (d = n == null ? void 0 : n.items) == null ? void 0 : d.map((u) => /* @__PURE__ */ o.createElement(\n      Wn,\n      {\n        value: u.id,\n        key: u.id,\n        thumbnail: u != null && u.thumbnail ? a.get(u == null ? void 0 : u.thumbnail) : void 0,\n        label: u.label\n      }\n    ))\n  ));\n}, cu = (e, t = 2500) => {\n  const { t: r } = pe(), [n, i] = P(\"\"), a = qe(() => {\n    navigator.clipboard.writeText(e).then(\n      () => i(r(\"copySuccess\")),\n      () => i(r(\"copyFailure\"))\n    );\n  }, [e]);\n  return T(() => {\n    if (!n) return;\n    const s = setTimeout(() => i(\"\"), t);\n    return () => clearTimeout(s);\n  }, [n]), [n, a];\n}, du = x(\"span\", {\n  display: \"flex\",\n  alignContent: \"center\",\n  alignItems: \"center\",\n  padding: \"0.125rem 0.25rem 0\",\n  marginTop: \"-0.125rem\",\n  marginLeft: \"0.5rem\",\n  backgroundColor: \"$accent\",\n  color: \"$secondary\",\n  borderRadius: \"3px\",\n  lineHeight: \"1em\"\n}), uu = ({ status: e }) => e ? /* @__PURE__ */ o.createElement(du, { \"data-copy-status\": e }, e) : null, nr = ({\n  textPrompt: e,\n  textToCopy: t\n}) => {\n  const [r, n] = cu(t);\n  return /* @__PURE__ */ o.createElement(\"button\", { onClick: n }, e, \" \", /* @__PURE__ */ o.createElement(uu, { status: r }));\n}, mu = ({ title: e }) => {\n  const t = \"#ed1d33\", r = \"#2873ab\";\n  return /* @__PURE__ */ o.createElement(\"svg\", { viewBox: \"0 0 493.35999 441.33334\", id: \"iiif-logo\", version: \"1.1\" }, /* @__PURE__ */ o.createElement(\"title\", null, e), /* @__PURE__ */ o.createElement(\"g\", { transform: \"matrix(1.3333333,0,0,-1.3333333,0,441.33333)\" }, /* @__PURE__ */ o.createElement(\"g\", { transform: \"scale(0.1)\" }, /* @__PURE__ */ o.createElement(\n    \"path\",\n    {\n      style: { fill: r },\n      d: \"M 65.2422,2178.75 775.242,1915 773.992,15 65.2422,276.25 v 1902.5\"\n    }\n  ), /* @__PURE__ */ o.createElement(\n    \"path\",\n    {\n      style: { fill: r },\n      d: \"m 804.145,2640.09 c 81.441,-240.91 -26.473,-436.2 -241.04,-436.2 -214.558,0 -454.511,195.29 -535.9527,436.2 -81.4335,240.89 26.4805,436.18 241.0387,436.18 214.567,0 454.512,-195.29 535.954,-436.18\"\n    }\n  ), /* @__PURE__ */ o.createElement(\n    \"path\",\n    {\n      style: { fill: t },\n      d: \"M 1678.58,2178.75 968.578,1915 969.828,15 1678.58,276.25 v 1902.5\"\n    }\n  ), /* @__PURE__ */ o.createElement(\n    \"path\",\n    {\n      style: { fill: t },\n      d: \"m 935.082,2640.09 c -81.437,-240.91 26.477,-436.2 241.038,-436.2 214.56,0 454.51,195.29 535.96,436.2 81.43,240.89 -26.48,436.18 -241.04,436.18 -214.57,0 -454.52,-195.29 -535.958,-436.18\"\n    }\n  ), /* @__PURE__ */ o.createElement(\n    \"path\",\n    {\n      style: { fill: r },\n      d: \"m 1860.24,2178.75 710,-263.75 -1.25,-1900 -708.75,261.25 v 1902.5\"\n    }\n  ), /* @__PURE__ */ o.createElement(\n    \"path\",\n    {\n      style: { fill: r },\n      d: \"m 2603.74,2640.09 c 81.45,-240.91 -26.47,-436.2 -241.03,-436.2 -214.58,0 -454.52,195.29 -535.96,436.2 -81.44,240.89 26.48,436.18 241.03,436.18 214.57,0 454.51,-195.29 535.96,-436.18\"\n    }\n  ), /* @__PURE__ */ o.createElement(\n    \"path\",\n    {\n      style: { fill: t },\n      d: \"m 3700.24,3310 v -652.5 c 0,0 -230,90 -257.5,-142.5 -2.5,-247.5 0,-336.25 0,-336.25 l 257.5,83.75 V 1690 l -258.61,-92.5 V 262.5 L 2735.24,0 v 2360 c 0,0 -15,850 965,950\"\n    }\n  ))));\n}, fu = x(fr.Root, {\n  all: \"unset\",\n  height: \"2rem\",\n  width: \"3.236rem\",\n  backgroundColor: \"#6663\",\n  borderRadius: \"9999px\",\n  position: \"relative\",\n  WebkitTapHighlightColor: \"transparent\",\n  cursor: \"pointer\",\n  \"&:focus\": {\n    boxShadow: \"0 0 0 2px $secondaryAlt\"\n  },\n  '&[data-state=\"checked\"]': {\n    backgroundColor: \"$accent\",\n    boxShadow: \"inset 2px 2px 5px #0003\"\n  }\n}), hu = x(fr.Thumb, {\n  display: \"block\",\n  height: \"calc(2rem - 12px)\",\n  width: \"calc(2rem - 12px)\",\n  backgroundColor: \"$secondary\",\n  borderRadius: \"100%\",\n  boxShadow: \"2px 2px 5px #0001\",\n  transition: \"$all\",\n  transform: \"translateX(6px)\",\n  willChange: \"transform\",\n  span: {\n    fontFamily: \"monospace\",\n    fontSize: \"0.8333rem\",\n    fontWeight: \"700\",\n    display: \"flex\",\n    height: \"100%\",\n    width: \"100%\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    color: \"$primary\",\n    opacity: \"0.382\",\n    userSelect: \"none\",\n    pointerEvents: \"none\"\n  },\n  '&[data-state=\"checked\"]': {\n    transform: \"translateX(calc(1.236rem + 6px))\",\n    span: {\n      opacity: \"1\",\n      color: \"$accent\"\n    }\n  }\n});\nx(\"label\", {\n  fontSize: \"0.8333rem\",\n  fontWeight: \"400\",\n  lineHeight: \"1em\",\n  userSelect: \"none\",\n  cursor: \"pointer\",\n  paddingRight: \"0.618rem\"\n});\nconst pu = x(\"form\", {\n  display: \"flex\",\n  flexShrink: \"0\",\n  flexGrow: \"1\",\n  alignItems: \"center\",\n  marginLeft: \"1.618rem\"\n}), gu = () => {\n  const { isInformationOpen: e } = z(), t = X(), { t: r } = pe(), n = (i) => {\n    t({\n      type: \"updateInformationOpen\",\n      isInformationOpen: i\n    });\n  };\n  return /* @__PURE__ */ o.createElement(pu, null, /* @__PURE__ */ o.createElement(\n    fu,\n    {\n      checked: e,\n      onCheckedChange: n,\n      id: \"information-toggle\",\n      \"aria-label\": r(\"informationPanelToggle\"),\n      name: \"toggled?\"\n    },\n    /* @__PURE__ */ o.createElement(hu, null, /* @__PURE__ */ o.createElement(\"span\", null, \"i\"))\n  ));\n}, vu = o.memo(gu), yu = x(Ce.Trigger, {\n  width: \"30px\",\n  padding: \"5px\",\n  marginBottom: \"auto\"\n}), bu = x(ai, {\n  h3: {\n    color: \"$primaryAlt\",\n    fontSize: \"$2\",\n    fontWeight: \"700\",\n    margin: \"$2 0\"\n  },\n  button: {},\n  \"& ul li\": {\n    marginBottom: \"$1\"\n  }\n});\nfunction wu(e) {\n  const { vault: t } = z();\n  try {\n    const r = e && t.get(e);\n    if (!r) throw new Error(`Vault entity ${e} not found.`);\n    return (r == null ? void 0 : r[\"@id\"]) || (r == null ? void 0 : r.id);\n  } catch (r) {\n    return console.error(r), e;\n  }\n}\nfunction ir(e, t) {\n  const r = [];\n  if (!e) return r;\n  for (const n of e)\n    if (n.id) {\n      const i = t.get(n.id);\n      i && r.push(i);\n    }\n  return r;\n}\nfunction xu() {\n  const { activeCanvas: e, activeManifest: t, vault: r } = z(), [n, i] = P({\n    root: [],\n    canvas: []\n  });\n  return T(() => {\n    const a = r.get(t), s = r.get(e), l = a == null ? void 0 : a.rendering, d = s == null ? void 0 : s.rendering, u = ir(l, r), c = ir(d, r);\n    i({\n      root: u,\n      canvas: c\n    });\n  }, [e, t, r]), { ...n };\n}\nfunction ar(e, t) {\n  return e.map(({ format: r, id: n, label: i }) => {\n    const a = wu(n);\n    return {\n      format: r,\n      id: a,\n      label: Z(i) || t\n    };\n  });\n}\nfunction Eu() {\n  const e = xu(), t = ar(\n    (e == null ? void 0 : e.root) || [],\n    \"Root Rendering Label\"\n  ), r = ar(\n    (e == null ? void 0 : e.canvas) || [],\n    \"Canvas Rendering Label\"\n  );\n  return {\n    allPages: t,\n    individualPages: r\n  };\n}\nconst Su = () => {\n  const { allPages: e, individualPages: t } = Eu(), r = e.length > 0 || t.length > 0, n = (i) => {\n    window.open(i, \"_blank\");\n  };\n  return r ? /* @__PURE__ */ o.createElement(Ce, null, /* @__PURE__ */ o.createElement(yu, { \"data-testid\": \"download-button\" }, /* @__PURE__ */ o.createElement(j, null, /* @__PURE__ */ o.createElement(j.Download, null))), /* @__PURE__ */ o.createElement(bu, { \"data-testid\": \"download-content\" }, t.length > 0 && /* @__PURE__ */ o.createElement(o.Fragment, null, /* @__PURE__ */ o.createElement(\"h3\", null, \"Individual Pages\"), /* @__PURE__ */ o.createElement(\"ul\", null, t.map(({ format: i, id: a, label: s }) => /* @__PURE__ */ o.createElement(\"li\", { key: s }, /* @__PURE__ */ o.createElement(\"button\", { onClick: () => n(a) }, s, \" (\", i, \")\"))))), e.length > 0 && /* @__PURE__ */ o.createElement(o.Fragment, null, /* @__PURE__ */ o.createElement(\"h3\", null, \"All Pages\"), /* @__PURE__ */ o.createElement(\"ul\", null, e.map(({ format: i, id: a, label: s }) => /* @__PURE__ */ o.createElement(\"li\", { key: s }, /* @__PURE__ */ o.createElement(\"button\", { onClick: () => n(a) }, s, \" (\", i, \")\"))))))) : null;\n}, Cu = ({ manifestId: e, manifestLabel: t }) => {\n  const r = z(), { collection: n, configOptions: i } = r, { informationPanel: a, showDownload: s, showIIIFBadge: l, showTitle: d } = i, u = s || l || (a == null ? void 0 : a.renderToggle), { t: c } = pe();\n  return /* @__PURE__ */ o.createElement(ou, { className: \"clover-viewer-header\" }, n != null && n.items ? /* @__PURE__ */ o.createElement(lu, null) : /* @__PURE__ */ o.createElement(au, { className: d ? \"\" : \"visually-hidden\" }, d && /* @__PURE__ */ o.createElement(ce, { label: t, className: \"label\" })), u && /* @__PURE__ */ o.createElement(su, null, s && /* @__PURE__ */ o.createElement(Su, null), l && /* @__PURE__ */ o.createElement(Ce, null, /* @__PURE__ */ o.createElement(iu, null, /* @__PURE__ */ o.createElement(mu, { title: c(\"commonShare\") })), /* @__PURE__ */ o.createElement(ai, null, (n == null ? void 0 : n.items) && /* @__PURE__ */ o.createElement(\n    \"button\",\n    {\n      onClick: (m) => {\n        m.preventDefault(), window.open(n.id, \"_blank\");\n      }\n    },\n    c(\"shareCollectionJson\")\n  ), /* @__PURE__ */ o.createElement(\n    \"button\",\n    {\n      onClick: (m) => {\n        m.preventDefault(), window.open(e, \"_blank\");\n      }\n    },\n    c(\"shareManifestJson\")\n  ), \" \", (n == null ? void 0 : n.items) && /* @__PURE__ */ o.createElement(\n    nr,\n    {\n      textPrompt: c(\"shareCollectionCopy\"),\n      textToCopy: n.id\n    }\n  ), /* @__PURE__ */ o.createElement(\n    nr,\n    {\n      textPrompt: c(\"shareManifestCopy\"),\n      textToCopy: e\n    }\n  ))), (a == null ? void 0 : a.renderToggle) && /* @__PURE__ */ o.createElement(vu, null)));\n}, Au = (e) => {\n  const t = () => window.matchMedia ? window.matchMedia(e).matches : !1, [r, n] = P(t);\n  return T(() => {\n    const i = () => n(t);\n    return window.addEventListener(\"resize\", i), () => window.removeEventListener(\"resize\", i);\n  }), r;\n}, Iu = ({\n  manifest: e,\n  theme: t,\n  iiifContentSearchQuery: r\n}) => {\n  var O;\n  const n = z(), i = X(), {\n    activeCanvas: a,\n    isInformationOpen: s,\n    vault: l,\n    configOptions: d,\n    visibleCanvases: u\n  } = n, c = [\"100%\", \"auto\"], m = (d == null ? void 0 : d.canvasHeight) && c.includes(d == null ? void 0 : d.canvasHeight), [p, f] = P(!1), [g, h] = P([]), [w, v] = P([]), [b, E] = P(), y = Au(jr.sm), [S, C] = P(), A = qe(\n    ($) => {\n      i({\n        type: \"updateInformationOpen\",\n        isInformationOpen: $\n      });\n    },\n    [i]\n  );\n  T(() => {\n    var $;\n    ($ = d == null ? void 0 : d.informationPanel) != null && $.open && A(!y);\n  }, [y, (O = d == null ? void 0 : d.informationPanel) == null ? void 0 : O.open]), T(() => {\n  }, [y]), T(() => {\n    const $ = he(l, a);\n    $ && (f(\n      [\"Sound\", \"Video\"].indexOf(\n        $[0].type\n      ) > -1\n    ), h($));\n    const F = wi(\n      l,\n      // @ts-ignore\n      e,\n      a\n    );\n    i({\n      type: \"updateVisibleCanvases\",\n      visibleCanvases: F\n    });\n  }, [a, y, e, l, i]), T(() => {\n    (async () => {\n      const $ = await Promise.all(\n        u.map(\n          (F) => co(l, F.id)\n        )\n      );\n      v($.flat());\n    })();\n  }, [u]);\n  const I = e.service.some(\n    ($) => [\"SearchService1\", \"SearchService2\"].includes(\n      $.type || $[\"@type\"]\n    )\n  );\n  return T(() => {\n    if (I) {\n      const $ = e.service.find(\n        (F) => [\"SearchService1\", \"SearchService2\"].includes(\n          F.type || F[\"@type\"]\n        )\n      );\n      $ && C($.id || $[\"@id\"]);\n    }\n  }, [e, I]), T(() => {\n    var $;\n    S && (($ = d.informationPanel) == null ? void 0 : $.renderContentSearch) !== !1 && Ur(\n      l,\n      S,\n      r\n    ).then((F) => E(F));\n  }, [S]), /* @__PURE__ */ o.createElement(St, { FallbackComponent: It }, /* @__PURE__ */ o.createElement(\n    vo,\n    {\n      className: `${t} clover-viewer`,\n      css: { background: d == null ? void 0 : d.background },\n      \"data-absolute-position\": m,\n      \"data-information-panel-open\": s\n    },\n    /* @__PURE__ */ o.createElement(\n      Si.Root,\n      {\n        open: s,\n        onOpenChange: A\n      },\n      /* @__PURE__ */ o.createElement(\n        Cu,\n        {\n          manifestLabel: e.label,\n          manifestId: e.id\n        }\n      ),\n      /* @__PURE__ */ o.createElement(\n        nu,\n        {\n          activeCanvas: a,\n          painting: g,\n          annotationResources: w,\n          searchServiceUrl: S,\n          setContentSearchResource: E,\n          contentSearchResource: b,\n          items: e.items,\n          isAudioVideo: p\n        }\n      )\n    )\n  ));\n}, or = {\n  ignoreCache: !1,\n  headers: {\n    Accept: \"application/json, text/javascript, text/plain\"\n  },\n  timeout: 5e3,\n  withCredentials: !1\n};\nfunction Ru(e) {\n  return {\n    ok: e.status >= 200 && e.status < 300,\n    status: e.status,\n    statusText: e.statusText,\n    headers: e.getAllResponseHeaders(),\n    data: e.responseText,\n    json: () => JSON.parse(e.responseText)\n  };\n}\nfunction sr(e, t = null) {\n  return {\n    ok: !1,\n    status: e.status,\n    statusText: e.statusText,\n    headers: e.getAllResponseHeaders(),\n    data: t || e.statusText,\n    json: () => JSON.parse(t || e.statusText)\n  };\n}\nfunction Tu(e, t = or) {\n  const r = t.headers || or.headers;\n  return new Promise((n, i) => {\n    const a = new XMLHttpRequest();\n    a.open(\"get\", e), a.withCredentials = t.withCredentials, r && Object.keys(r).forEach(\n      (s) => a.setRequestHeader(s, r[s])\n    ), a.onload = () => {\n      n(Ru(a));\n    }, a.onerror = () => {\n      i(sr(a, \"Failed to make request.\"));\n    }, a.ontimeout = () => {\n      i(sr(a, \"Request took longer than expected.\"));\n    }, a.send();\n  });\n}\nconst lr = {\n  \"@context\": \"http://iiif.io/api/presentation/3/context.json\",\n  id: \"https://example.org/iiif/content-state/specific-resource\",\n  type: \"Annotation\",\n  motivation: [\"contentState\"],\n  target: {\n    type: \"SpecificResource\",\n    source: {\n      id: \"https://example.org/iiif/manifest/canvas/0\",\n      type: \"Canvas\",\n      partOf: [\n        {\n          id: \"https://example.org/iiif/manifest\",\n          type: \"Manifest\"\n        }\n      ]\n    }\n  },\n  body: []\n}, Qu = ({\n  canvasIdCallback: e,\n  contentStateCallback: t,\n  customDisplays: r = [],\n  plugins: n = [],\n  customTheme: i,\n  iiifContent: a,\n  id: s,\n  manifestId: l,\n  options: d,\n  iiifContentSearchQuery: u\n}) => {\n  var p, f, g;\n  let c = a;\n  s && (c = s), l && (c = l);\n  const m = Wr(\n    (f = (p = d == null ? void 0 : d.informationPanel) == null ? void 0 : p.vtt) == null ? void 0 : f.autoScroll\n  );\n  return /* @__PURE__ */ o.createElement(\n    lo,\n    {\n      initialState: {\n        ...Qe,\n        customDisplays: r,\n        plugins: n,\n        isAutoScrollEnabled: m.enabled,\n        isInformationOpen: !!((g = d == null ? void 0 : d.informationPanel) != null && g.open),\n        vault: new _r({\n          customFetcher: (h) => Tu(h, {\n            withCredentials: d == null ? void 0 : d.withCredentials,\n            headers: d == null ? void 0 : d.requestHeaders\n          }).then((w) => JSON.parse(w.data))\n        })\n      }\n    },\n    /* @__PURE__ */ o.createElement(\n      $u,\n      {\n        iiifContent: c,\n        canvasIdCallback: e,\n        contentStateCallback: t,\n        customTheme: i,\n        options: d,\n        iiifContentSearchQuery: u\n      }\n    )\n  );\n}, $u = ({\n  canvasIdCallback: e,\n  contentStateCallback: t,\n  customTheme: r,\n  iiifContent: n,\n  options: i,\n  iiifContentSearchQuery: a\n}) => {\n  const s = X(), l = z(), {\n    activeCanvas: d,\n    activeManifest: u,\n    activeSelector: c,\n    isLoaded: m,\n    vault: p,\n    visibleCanvases: f\n  } = l, [g, h] = P(), [w, v] = P();\n  let b = {};\n  if (r && (b = Ai(\"custom\", r)), T(() => {\n    s({\n      type: \"updateActiveSelector\",\n      selector: void 0\n    });\n  }, [d, u]), T(() => {\n    var E;\n    if (e && e(d), t && u && d) {\n      const y = ((E = f[0]) == null ? void 0 : E.id) || d, S = `${u}/state/${Br(y + JSON.stringify(c))}`, C = {\n        ...lr,\n        id: S,\n        target: {\n          type: \"SpecificResource\",\n          source: {\n            id: y,\n            type: \"Canvas\",\n            partOf: [\n              {\n                id: u,\n                type: \"Manifest\"\n              }\n            ]\n          },\n          selector: c\n        }\n      };\n      t({\n        json: C,\n        encoded: xi(JSON.stringify(C))\n      });\n    }\n  }, [\n    d,\n    u,\n    c,\n    e,\n    t,\n    f\n  ]), T(() => {\n    u && p.load(u).then((E) => {\n      if (!E) return;\n      v(E);\n      const y = Ei(p, E), S = d || $d(E);\n      s({\n        type: \"updateActiveCanvas\",\n        canvasId: S\n      }), s({\n        type: \"updateManifestSequence\",\n        sequence: y\n      });\n    }).catch((E) => {\n      console.error(`Manifest failed to load: ${E}`);\n    }).finally(() => {\n      s({\n        type: \"updateIsLoaded\",\n        isLoaded: !0\n      });\n    });\n  }, [n, u, s, p]), T(() => {\n    s({\n      type: \"updateConfigOptions\",\n      configOptions: i\n    }), (async () => {\n      var S;\n      if (!n) return;\n      const y = Td(n);\n      try {\n        const C = typeof y == \"object\" && (y != null && y.id) ? await p.loadSync(y == null ? void 0 : y.id, y) : await p.load(y);\n        h(C);\n      } catch (C) {\n        if ((!y || !y.id) && console.error(`Failed to load resource: ${C}`), y != null && y.id && (y == null ? void 0 : y.type) === \"Annotation\" && ((S = y == null ? void 0 : y.motivation) != null && S.includes(\"contentState\"))) {\n          const A = await p.loadSync(\n            y.id,\n            y\n          );\n          A && h(A);\n        } else y != null && y.id && [\"Canvas\", \"Manifest\"].includes(y == null ? void 0 : y.type) && await p.loadSync(y.id, y) && h({\n          ...lr,\n          target: y\n        });\n      }\n    })();\n  }, [s, n, i, p]), T(() => {\n    if (g)\n      switch (g.type) {\n        case \"Annotation\":\n          if (g != null && g.motivation && (Array.isArray(g == null ? void 0 : g.motivation) ? g != null && g.motivation.includes(\"contentState\") : (g == null ? void 0 : g.motivation) === \"content-state\")) {\n            const { active: y } = ni(g);\n            s({\n              type: \"updateActiveManifest\",\n              manifestId: y.manifest\n            }), s({\n              type: \"updateActiveCanvas\",\n              canvasId: y.canvas\n            }), s({\n              type: \"updateContentStateAnnotation\",\n              contentStateAnnotation: g\n            });\n          }\n          break;\n        case \"Collection\":\n          const E = kd(\n            g\n          );\n          s({\n            type: \"updateCollection\",\n            collection: g\n          }), E && s({\n            type: \"updateActiveManifest\",\n            manifestId: E\n          });\n          break;\n        case \"Manifest\":\n          s({\n            type: \"updateActiveManifest\",\n            manifestId: g.id\n          });\n          break;\n      }\n  }, [s, n, g]), !m)\n    if (i != null && i.customLoadingComponent) {\n      const E = i.customLoadingComponent;\n      return /* @__PURE__ */ o.createElement(E, null);\n    } else\n      return /* @__PURE__ */ o.createElement(o.Fragment, null, \"Loading\");\n  return !w || !w.items ? (console.log(`The IIIF manifest ${n} failed to load.`), /* @__PURE__ */ o.createElement(o.Fragment, null)) : w.items.length === 0 ? (console.log(`The IIIF manifest ${n} does not contain canvases.`), /* @__PURE__ */ o.createElement(o.Fragment, null)) : /* @__PURE__ */ o.createElement(\n    Iu,\n    {\n      manifest: w,\n      theme: b,\n      key: w.id,\n      iiifContentSearchQuery: a\n    }\n  );\n};\nexport {\n  Qu as default\n};\n//# sourceMappingURL=index.mjs.map\n"],"names":["la","en","commonClose","commonNext","commonPrevious","commonSearch","commonSearchPlaceholder","commonShare","commonViewAll","copyFailure","copySuccess","contentSearchLoading","contentSearchPlaceholder","contentSearchResultsNone","contentSearchResultsMore","informationPanelTabs","informationPanelTabsClose","informationPanelTabsAbout","informationPanelTabsAnnotations","informationPanelTabsSearch","informationPanelToggle","shareCollectionJson","shareCollectionCopy","shareManifestJson","shareManifestCopy","pt","ct","ca","Object","fromEntries","entries","map","e","t","use","init","defaultNS","fallbackLng","ns","resources","N","r","type","getType","toString","n","i","payload","meta","hr","pr","gr","vr","dt","yr","br","wr","ut","xr","Er","da","ua","ma","fa","ha","pa","ga","va","ya","ba","importEntities","modifyEntityField","reorderEntityField","addReference","removeReference","updateReference","addMetadata","removeMetadata","updateMetadata","reorderMetadata","Sr","Cr","wa","xa","mt","Ar","ft","Ir","Rr","Tr","$r","Sa","ht","Ca","Aa","Ct","Ft","Number","isNaN","Ta","_t","Array","isArray","length","Ke","iiif","requests","mapping","entities","resourceUri","a","s","find","l","id","zt","waitTimeout","getStore","getState","loadingState","u","c","m","Promise","race","p","f","subscribe","g","h","setTimeout","dispatch","d","resource","message","push","requestId","actualId","Ra","actions","then","$a","ka","BASE_URL","DEV","MODE","PROD","SSR","Dt","Set","is","assign","forEach","setState","getInitialState","add","delete","destroy","console","warn","clear","Mr","Or","Pr","Bt","setMetaValue","setMetaValueDynamic","unsetMetaValue","et","_a","dispatchFromDevtools","gt","Map","Fe","get","stores","Ba","enabled","anonymousActionType","store","window","__REDUX_DEVTOOLS_EXTENSION__","connection","connect","name","set","za","w","v","b","E","send","error","tt","state","keys","JSON","stringify","nextLiftedState","computedStates","slice","parse","Wa","equalityFn","fireImmediately","rt","Va","indexOf","R","nt","Lr","Qa","Collection","Manifest","Canvas","AnnotationPage","AnnotationCollection","Annotation","ContentResource","Range","Service","Selector","Agent","key","value","from","splice","startIndex","endIndex","index","reference","findIndex","metadata","beforeIndex","label","atIndex","requestUri","uriMismatch","updateValue","Ja","Ya","enableDevtools","iiifStoreName","defaultState","customReducers","reduce","Ga","Ma","Xa","defineProperty","me","enumerable","configurable","writable","Za","Q","Te","be","parent","this","has","we","ye","Fr","Symbol","for","Ht","reactive","refresh","unreactive","unwrap","includes","Error","toPresentation3","toPresentation2","valueOf","toJSON","items","annotations","structures","seeAlso","service","services","rendering","partOf","start","supplementary","homepage","thumbnail","placeholderCanvas","accompanyingCanvas","provider","eo","create","Wt","_r","constructor","fetch","json","options","reducers","customFetcher","defaultFetcher","emitter","all","on","off","emit","Ka","remoteFetcher","staticFetcher","batch","isBatching","batchQueue","asyncBatch","action","serialize","hydrate","skipSelfReturn","preserveSpecificResources","source","skipPartOfCheck","select","deep","size","loadManifest","load","loadCollection","resolve","loadSync","loadManifestSync","loadCollectionSync","areInputsEqual","ensureLoaded","requestStatus","getResourceMeta","getObject","loadObject","loadManifestObject","loadCollectionObject","wrapObject","isWrapped","to","zr","split","Math","ceil","parseInt","no","padStart","ro","Date","toISOString","substr","Dr","Br","charCodeAt","Hr","hasOwn","String","fe","annotationOverlays","backgroundColor","borderColor","borderType","borderWidth","opacity","renderOverlays","zoomLevel","background","canvasBackgroundColor","canvasHeight","contentSearch","searchResultsLimit","overlays","crossOrigin","ignoreCaptionLabels","informationPanel","vtt","autoScroll","settings","behavior","block","open","renderAbout","renderSupplementing","renderToggle","renderAnnotation","renderContentSearch","openSeadragon","requestHeaders","showDownload","showIIIFBadge","showTitle","withCredentials","Wr","TypeError","join","ao","cr","dr","oo","ur","Qe","activeCanvas","activeManifest","activePlayer","activeSelector","OSDImageLoaded","collection","configOptions","customDisplays","plugins","isAutoScrollEnabled","isAutoScrolling","isInformationOpen","isLoaded","isUserScrolling","sequence","vault","openSeadragonViewer","viewerId","visibleCanvases","visibleAnnotations","Nr","Vr","so","canvasId","manifestId","player","contentStateAnnotation","informationPanelResource","selector","lo","initialState","children","addHandler","viewport","getBounds","viewportToImageRectangle","round","x","y","width","height","removeAllHandlers","Provider","z","X","Ur","async","q","trim","URL","searchParams","qr","canvas","annotationPage","body","motivation","target","filter","At","getOwnPropertyNames","he","uo","colors","primary","primaryMuted","primaryAlt","accent","accentMuted","accentAlt","secondary","secondaryMuted","secondaryAlt","fontSizes","lineHeights","sizes","space","radii","pill","transitions","zIndices","max","jr","xxs","xs","sm","md","lg","xl","styled","css","qu","keyframes","Gr","createTheme","ju","theme","media","mo","display","flexDirection","alignItems","fo","fontWeight","fontSize","ho","It","role","po","position","zIndex","Qr","flexGrow","overflow","Jr","flexShrink","go","maxHeight","vo","fontSmooth","webkitFontSmoothing","justifyContent","padding","yo","maskImage","marginTop","boxShadow","bo","margin","borderBottom","$e","fontFamily","border","lineHeight","whiteSpace","cursor","transition","content","bottom","left","_e","top","xo","handleScroll","className","onScroll","overflowY","Yr","color","borderRadius","Je","textAlign","Rt","header","em","fontStyle","paddingBottom","marginBottom","Ye","gap","Eo","So","handleClick","onClick","dangerouslySetInnerHTML","__html","Co","caption","imageUri","src","alt","Ao","html","Nt","isContentSearch","Ro","Xr","marginLeft","strong","ko","text","end","addEventListener","currentTime","document","removeEventListener","current","HTMLElement","getComputedStyle","scrollHeight","clientHeight","parentNode","$o","S","C","getBoundingClientRect","offsetTop","offsetHeight","floor","scrollTo","ref","pause","play","Mo","listStyle","paddingLeft","Zr","identifier","Oo","inlineCues","vttUri","createNestedCues","orderCuesByTime","parseVttData","addIdentifiersToParsedCues","pop","isChild","some","sort","Parser","StringDecoder","oncue","convertCueToDOMTree","innerHTML","textContent","startTime","endTime","align","onflush","onparsingerror","flush","Io","headers","Accept","catch","Tt","annotation","targetResource","isContentState","te","L","J","K","G","oe","ve","_","B","D","format","language","chars","none","A","I","Po","toLocaleLowerCase","O","styles","$","getOverlayById","element","focus","k","fitBounds","F","M","preventDefault","stopPropagation","setInterval","container","clearInterval","dir","style","backgroundImage","backgroundSize","backgroundPosition","match","input","V","Kr","Z","ie","_o","allowedAttributes","img","allowedSchemes","allowedTags","zo","ce","as","lang","Vt","objectFit","Bo","contentResource","altAsLabel","region","duration","attachMedia","MEDIA_ATTACHED","loadSource","ERROR","fatal","NETWORK_ERROR","startLoad","MEDIA_ERROR","recoverMediaError","detachMedia","autoplay","Do","disablePictureInPicture","loop","muted","onPause","Ho","Wo","href","No","delimiter","$t","kt","Vo","Uo","Ut","markup","Fo","tn","qo","jo","Go","customValueContent","rn","item","replace","toLowerCase","Jo","Yo","matchingLabel","Content","Qo","Xo","Zo","Ko","es","ts","requiredStatement","rs","summary","nn","os","ss","form","marginRight","ls","boxSizing","svg","fill","stroke","cs","searchServiceUrl","setContentSearchResource","setLoading","onSubmit","onChange","placeholder","asChild","xmlns","viewBox","ds","us","maxWidth","video","dl","dd","li","ms","fs","hs","htmlLabel","ps","gs","vs","ys","rights","bs","ws","Es","Cs","Is","annotationResources","contentSearchResource","pluginsWithInfoPanel","component","Ss","defaultTab","defaultValue","onValueChange","orientation","clearTimeout","FallbackComponent","componentProps","useViewerDispatch","useViewerState","an","variants","isLarge","true","isMedium","isSmall","j","Title","Add","strokeLinecap","strokeLinejoin","strokeWidth","Audio","Close","Download","Image","Video","Ls","transform","Fs","_s","right","zs","minWidth","animationDuration","animationTimingFunction","animationName","Ds","Bs","Ce","Trigger","sideOffset","collisionPadding","Ve","textTransform","isIcon","Be","sn","Ns","Vs","He","objectPosition","borderBottomLeftRadius","borderTopRightRadius","vt","figure","figcaption","MozBoxOrient","WebkitBoxOrient","WebkitLineClamp","Us","overflowX","qs","borderRight","borderLeft","borderTopLeftRadius","borderBottomRightRadius","ln","js","at","Gs","Qs","isToggle","paddingTop","Ys","title","strokeMiterlimit","Xs","Zs","Ks","el","handleCanvasToggle","handleFilter","activeIndex","canvasLength","Js","autoFocus","disabled","tl","rootMargin","attributes","isVisibleCallback","IntersectionObserver","isIntersecting","disconnect","observe","ze","Mt","rl","De","nl","xe","endsWith","cn","dn","un","mn","fn","hn","pn","gn","vn","yn","bn","wn","xn","En","Sn","Cn","An","In","Rn","Tn","$n","kn","Mn","On","pl","gl","extraFormats","extraQualities","extraFeatures","vl","yl","bl","full","square","startsWith","parseFloat","percent","El","upscaled","confined","serialiseAsFull","percentScale","version","Sl","angle","mirror","Al","path","scheme","server","prefix","substring","Cl","reverse","Boolean","originalPath","rotation","quality","Il","profile","formats","qualities","supports","maxArea","wl","Rl","Tl","H","Xe","We","yt","Pn","kl","$l","minHeight","level","tiles","qt","bt","Ml","unsafe","Ol","jt","Ln","Ll","Fl","_l","zl","ot","Ie","Bl","unsafeImageService","atAnyCost","fallback","returnAllOptions","preferFixedSize","allowUnsafe","explain","abs","Dl","best","log","Hl","scaleFactors","Gt","Fn","verificationsRequired","approximateServices","enableFetching","disableThrottling","config","setConfig","sample","knownImageServers","imageServices","real","verify","verifications","malformed","root","preLoaded","sampledId","verified","result","context","sampledProfile","resourceServiceRatio","sampledSizes","sizeRatios","sampledTiles","preLoad","predict","protocol","getThumbnailFromResource","getImageCandidates","loadService","canLoadSync","loadServiceSync","Pl","fetchService","Wl","markAsMalformed","fetchingCount","Nl","Qt","Vl","dereference","imageServiceLoader","getBestThumbnailAtSize","Ul","ql","jl","canvasIndex","isActive","handleChange","Gl","Ql","querySelector","offsetLeft","offsetWidth","_n","aspectRatio","isMedia","zn","rotate","Dn","isInteractive","false","compoundVariants","Jl","Yl","Xl","Zl","alignSelf","Kl","ec","textOverflow","tc","Bn","st","direction","focusable","Hn","Wn","Se","OpenSeadragon","Jt","Viewer","prototype","svgOverlay","_svgOverlayInfo","Nn","_viewer","_containerWidth","_containerHeight","_svg","createElementNS","appendChild","_node","resize","node","clientWidth","setAttribute","pixelFromPoint","Point","getZoom","getRotation","getFlip","_containerInnerSize","MouseTracker","clickHandler","setTracking","Vn","Un","qn","jn","Gn","Qn","Jn","Yn","Xn","Zn","Ec","Cc","ae","Ac","Ic","Yt","Rc","Xt","Yc","wt","Ee","Xc","ei","Zt","ed","Ot","Kc","Zc","td","rd","ad","od","Kt","ti","encodeURI","de","viewingHint","viewingDirection","timeMode","ue","nd","license","attribution","navDate","description","sd","ld","within","ge","related","contentLayer","logo","startCanvas","cd","er","ri","xd","Kn","traversals","manifest","annotationList","choice","range","layer","convertPropsToArray","mergeMemberProperties","allowUndefinedReturn","traverseCollection","traverseType","traverseDescriptive","traverseLinking","traverseCollectionItems","manifests","collections","members","traverseManifest","traverseUnknown","traverseManifestItems","sequences","traverseSequence","traverseRange","traverseSequenceItems","canvases","traverseCanvas","traverseCanvasItems","images","traverseAnnotation","otherContent","traverseAnnotationList","traverseRangeItems","ranges","traverseAnnotationListItems","traverseAnnotationItems","traverseContentResource","traverseLayer","traverseLayerItems","traverseChoice","traverseChoiceItems","default","traverseService","Tc","traverseImageResource","traverseOneOrMoreServices","traverseOneOrManyType","xt","Cd","ni","resourceId","active","Id","Sd","Ed","Td","resourceObject","Md","Rd","ee","TiledImage","SimpleImage","Od","Ad","uri","imageType","Et","Ld","pointerEvents","Fd","hasNavigator","Re","_d","hasPlaceholder","zd","Dd","Bd","Hd","tr","Wd","_cloverViewerHasPlaceholder","setRotation","showZoomControl","zoomInButton","zoomOutButton","showFullPageControl","fullPageButton","showRotationControl","rotateRightButton","rotateLeftButton","showHomeControl","homeButton","imageViewer","controls","ii","Nd","rr","getItemAt","Vd","ariaLabel","openSeadragonCallback","forceRedraw","close","decode","world","addSimpleImage","url","success","addTiledImage","tileSource","getHomeBounds","originalTarget","preventDefaultAction","clearOverlays","targetIndex","getContentSize","rect","point","Lo","createElement","classList","removeAttribute","addOverlay","CENTER","showNavigator","navigatorId","Ud","loadTilesWithAjax","navigatorBorderColor","gestureSettingsMouse","clickToZoom","dblClickToZoom","pinchToZoom","scrollToZoom","qd","instanceId","isTiledImage","openSeadragonConfig","Pd","jd","setIsInteractive","Gd","Qd","AudioContext","createMediaElementSource","createAnalyser","getContext","destination","fftSize","frequencyBinCount","Uint8Array","getByteFrequencyData","fillStyle","fillRect","onplay","Jd","Yd","srcLang","Xd","Zd","allSources","painting","xhrSetup","paused","ended","poster","Kd","eu","tu","handleToggle","ru","W","Y","paintingFormat","re","U","se","le","Ae","Pt","annotationBody","hooks","nu","isAudioVideo","activeItem","iu","ai","button","textDecoration","au","clip","ou","su","lu","du","alignContent","uu","status","nr","textPrompt","textToCopy","navigator","clipboard","writeText","cu","mu","fu","WebkitTapHighlightColor","hu","willChange","span","userSelect","paddingRight","pu","vu","checked","onCheckedChange","yu","bu","h3","ir","ar","wu","Eu","xu","allPages","individualPages","Su","Cu","manifestLabel","Iu","iiifContentSearchQuery","matchMedia","matches","Au","co","flat","onOpenChange","or","ignoreCache","timeout","sr","ok","statusText","getAllResponseHeaders","data","Tu","XMLHttpRequest","setRequestHeader","onload","responseText","Ru","onerror","ontimeout","lr","Qu","canvasIdCallback","contentStateCallback","customTheme","iiifContent","$u","encoded","$d","finally","kd","customLoadingComponent"],"sourceRoot":""}