{"componentChunkName":"component---src-templates-blog-page-js","path":"/blog/going-static-jekyll-and-collections/","result":{"data":{"markdownRemark":{"html":"<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 74%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAADHUlEQVQ4y3WU3WtcVRTFD02MiUZrsbVILEVBKEqL75VKlPqRaJCRNn0RxDcD+lBa+uqLf0HQMjFN1MTWqoj4IoI+xBRSQpI6ITTpRKeTZNLJTGbmfszH/TozPzk7M0NA3LDY9xzWXWfts7hX1RsNIl0n1HW8UFMLNH6kMfumisUiq6urbG5uSk+n06RSKekbGxusr68LKpWK8FXZi1hMl7idKvJ3vsz9QoVUviIHmHJdl7W1NcrlMmEYCjzPa6NWq1GtVtFa7wkWKgG/ruzw41KGe1mXtayL44W0quWwUCiQz+cFvu/TaDTkMMdx5NmU6aoaaO7ny6SzZTasqoyNbqDrew4TiQTxeJxkMsny8jIrKytyiBnRtm2y2Sz1JlccUq+TKVp8+FeCZ2dm+SCR4E4uT1D1hGBGdMuujGxEzHgtZ6a3YFmWOFfmhf5bc6iffuHEzJ+8f2eJm5kM+CFmECNiAtja2pJgWshkMmxvb0swxmUulxOuyvs+Pb/9zqnZW3yWvEdsYYEfHjwQd2YQc2qhsNt24DVDMGG0AgmCQMY2UObFRdtmYH6eK3fvcm5xiU+T6yKoaeB5PtlcXkIpWRZBsBeYSTXSWrpvBJvBqCAMQdeZsywWLItSGDJfKhF5vhDS/yS5MTnGtfFrfD05yVcTE3w+OsoXo6PEr17ly3ic8bEx2bs9N4eKogjLckS0mT1R1cOxXVn+/P0N+no7OPrkYQ71PopSiuN9T3Pq5IvyvB+fjIygjO2S5bBbsqn6IWGkCaOIKIxEcHpqSsg9HR0cUIojTxxk+HyM4eEYL518gU6leLy7WzhXLl0yI0fkSo5gp2DjuGU8r4Zxbur69HRbsEspwYXz5xgZ+Yhnjh6W9SOdncK5fPEiyjjKFmx2ig7buxY5y0XXG+1P6frUN0Lu7eriIaV4/vgxBt98nbcH36DvqSMi+Nh+hyadmvkphBrz1Zifw37Bb7+7iTrwcPueDvZ089orpznx3LH/3OHH5g75n9LNkP6YmaU/doH+l0/z1tmzDA0M8N7QO9IN3h0cJDY0xKtnzjAxPs6/kYu/9QZc2m4AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/ce025a7f92817c1648620c55a36a9f1f/f1512/Screen-Shot-2018-10-22-at-23.10.04.webp 200w,\n/static/ce025a7f92817c1648620c55a36a9f1f/f59aa/Screen-Shot-2018-10-22-at-23.10.04.webp 400w,\n/static/ce025a7f92817c1648620c55a36a9f1f/47a22/Screen-Shot-2018-10-22-at-23.10.04.webp 800w,\n/static/ce025a7f92817c1648620c55a36a9f1f/5bb53/Screen-Shot-2018-10-22-at-23.10.04.webp 1200w,\n/static/ce025a7f92817c1648620c55a36a9f1f/485a2/Screen-Shot-2018-10-22-at-23.10.04.webp 1600w,\n/static/ce025a7f92817c1648620c55a36a9f1f/68a52/Screen-Shot-2018-10-22-at-23.10.04.webp 1858w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/ce025a7f92817c1648620c55a36a9f1f/f8f3a/Screen-Shot-2018-10-22-at-23.10.04.png 200w,\n/static/ce025a7f92817c1648620c55a36a9f1f/6a8a8/Screen-Shot-2018-10-22-at-23.10.04.png 400w,\n/static/ce025a7f92817c1648620c55a36a9f1f/7842b/Screen-Shot-2018-10-22-at-23.10.04.png 800w,\n/static/ce025a7f92817c1648620c55a36a9f1f/5ece7/Screen-Shot-2018-10-22-at-23.10.04.png 1200w,\n/static/ce025a7f92817c1648620c55a36a9f1f/0d4f8/Screen-Shot-2018-10-22-at-23.10.04.png 1600w,\n/static/ce025a7f92817c1648620c55a36a9f1f/ca6ca/Screen-Shot-2018-10-22-at-23.10.04.png 1858w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/ce025a7f92817c1648620c55a36a9f1f/7842b/Screen-Shot-2018-10-22-at-23.10.04.png\"\n            alt=\"3D instructional website screenshot\"\n            title=\"3D instructional website screenshot\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">3D instructional website screenshot</figcaption>\n  </figure></p>\n<p>At the Fitzwilliam Museum, we have a large amount of old websites that were built over the last decade. Many of these are now presenting security risks as they are on old WordPress installations, or they are just plain hand coded HTML. To alleviate the burden for supporting these sites, I have been transferring as much as possible to <a href=\"https://jekyllrb.com/\">Jekyll</a> powered Github Pages instances (although I am also looking at <a href=\"https://gatsbyjs.com\">Gatsby</a>).</p>\n<p>I'm attracted to Jekyll, due to the powerful conversion of very simple<strong>markdown</strong> files. Lightweight, easy to edit, hard to break and easy to run through version control. I'm hoping that we can use this format to stay away from heavily customising content management systems for our research sections at the Fitz. The sheer amount of sites that we have now got makes administering them all a gigantic task. Going this way, with simple text files might make it easier, or it might be a red herring.</p>\n<h3>How to generate? Is it hard?</h3>\n<p>Generating a Jekyll site is pretty straightforward, and this post outlines how I built the <a href=\"https://github.com/UniversityofCambridgeMuseums/festivalOfIdeas\">University of Cambridge Museums tutorial site</a> for the Festival of Ideas event I ran on Photogrammetry. Having an example to build towards, makes the process easier!</p>\n<p><strong>Remember though, this is a bare bones example.</strong></p>\n<h3>Installing Jekyll</h3>\n<p>I am assuming in this instance, you, the reader will be on OSX and have homebrew installed, RVM and the lastest Ruby and can use terminal. If you have all of those set up, you will now need to install the Jekyll gem. So go to terminal and issue this command:</p>\n<pre><code class=\"language-bash\">gem install bundler jekyll\n</code></pre>\n<p>Once that has completed (if your permissions are all set correctly) you should have Jekyll ready to go.</p>\n<h3>Generating the site skeleton</h3>\n<p>You're now ready to create the basic outline for the site. In terminal again run the following command, replacing {sitename} with the folder you want to create:</p>\n<pre><code class=\"language-bash\">jekyll new {sitename}\n</code></pre>\n<p>This creates a new folder with the base skeleton for a Jekyll app. Change directory to this:</p>\n<pre><code class=\"language-bash\">cd {sitename}\n</code></pre>\n<p>You will find the following structure after the ‘Running bundle install in ‘ response has finished running.</p>\n<pre><code class=\"language-bash\">404.html\nGemfile\nGemfile.lock\n_config.yml\n_posts\nabout.md\nindex.md\n</code></pre>\n<p>For the site I built, I was not interested in having the default post format that you will find in the majority of examples. If you change directory into _posts:</p>\n<pre><code class=\"language-bash\">cd _posts\n</code></pre>\n<p>You will find a file with the name in this format below:</p>\n<pre><code class=\"language-bash\">2018-10-22-welcome-to-jekyll.markdown\n</code></pre>\n<p>We are going to generate a site with custom page structure and to do this we're going to use collections and delete the posts structure. To do this, we'll edit the _config.yml file and set up some extra folder structure; in this case we want a folder called tutorials.</p>\n<p>Remove _posts, make folder and then edit the _config file:</p>\n<pre><code class=\"language-bash\">rm -R _posts\nmkdir _tutorials\nnano _config.yml\n</code></pre>\n<p>Now upon entering the edit screen you will need to edit the config file to have an entry for collections. Look for the line below which starts collections and how this is output.</p>\n<pre><code class=\"language-markdown\"># Welcome to Jekyll!\n# You can create any custom variable you would like, and they will be accessible# in the templates via {{ site.myvariable }}.\ntitle: Cambridge Festival of Ideas Photogrammetry workshop\nemail: dejp3@cam.ac.uk\ndescription: >- # This site will provide training material for the Museum of Classical Archaeology's workshop on photogrammetry.\nbaseurl: \"/festivalOfIdeas\" \nurl: \"https://UniversityofCambridgeMuseums.github.io/\" \ntwitter_username: dejpett\ngithub_username:  portableant\nlogo: images/festivalLogo.jpg\n# Build settings\nmarkdown: kramdown\ntheme: jekyll-theme-minimal&#x3C;br />\nplugins:  \n    - jekyll-feed\n    - jekyll-sitemap\n    - jekyll-seo-tag\n    - jemoji  \n    - jekyll-mentions\n# Custom structure\ncollections:  \n    tutorials:   \n        output: true\n</code></pre>\n<p>This config file also has:</p>\n<ul>\n<li>some extra plugins</li>\n<li>a specified theme style</li>\n<li>the base url</li>\n<li>the url I intend to serve from</li>\n<li>the markdown type</li>\n<li>the plugins I want to use on gh-pages</li>\n</ul>\n<p>If you look at the plugins section, you will see I have asked for feed, sitemap, seo, emoji and git hub mentions to also be included. Now create a page inside the _tutorials folder:</p>\n<pre><code class=\"language-bash\">touch _tutorials/introduction.md\n</code></pre>\n<p>Now edit this file and add the following at the top:</p>\n<pre><code class=\"language-bash\">--- \nauthor: your name \nurl: tutorials/introduction\n---\n</code></pre>\n<p>Save the file and then you can test to see if this has worked:</p>\n<pre><code class=\"language-bash\">jekyll serve\n</code></pre>\n<p>Go to</p>\n<pre><code class=\"language-bash\">http://127.0.0.1:4000/tutorials/introduction\n</code></pre>\n<p>and you will see a page with the title of the file and your name. Jekyll parses the markdown file name to give the page a title by default. How clever is that? When you run the serve command, a static file is compiled into the _site folder.</p>\n<p>Now you can create the page files that you need. Edit the index.md file, 404.html and about.md file as much as you want. You can find more examples of logic for rendering page lists and ordering of these in the repo referred to above.</p>\n<p>So that is the basics of getting a Jekyll site running with custom page structure. You now probably want to know how to deploy to Github.</p>\n<h3>Github pages</h3>\n<p>Git scares people, Github is the friendlier face. Still scary for most. So how do you get your Jekyll site running off there. Follow these steps (assuming you have a Github profile):</p>\n<ol>\n<li>Create a new empty repository</li>\n<li>Look for the instructions on how to add data</li>\n<li>Go back to your local folder in which you have been developing and run the following</li>\n</ol>\n<pre><code class=\"language-bash\">git init\necho \"# teachmephotogrammetry\" >> README.md\ngit add \ngit commit -m \"Added the base layout\"\ngit remote add origin path/to/gitrepo\ngit push -u origin master\n</code></pre>\n<p>You now should have your jekyll code on github if all went well. Now you need to create the branch that will auto-render on <a href=\"https://pages.github.com/\">gh-pages</a>. Follow these steps:</p>\n<ol>\n<li>Go to the github repository</li>\n<li>click on the branches button</li>\n<li>click add new branch and type gh-pages</li>\n</ol>\n<p>If you wait for a few minutes and then go to:</p>\n<pre><code class=\"language-bash\">https://yourusername.github.io/repositoryname\n</code></pre>\n<p>You should see a jekyll powered website.</p>","id":"2cff2821-190c-5a2d-923d-be02fc3d3200","frontmatter":{"slug":"/blog/going-static-jekyll-and-collections/","date":"October 22, 2018","title":"Going static: Jekyll and collections","section":"blog","tags":["jekyll","ruby","tutorial"]}}},"pageContext":{"slug":"/blog/going-static-jekyll-and-collections/","id":"2cff2821-190c-5a2d-923d-be02fc3d3200"}},"staticQueryHashes":["2641704444"]}