{"version":3,"file":"883d7235-251070a23dc80861a614.js","mappings":"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","sources":["webpack://museologi.st/./node_modules/@samvera/clover-iiif/dist/viewer/index.mjs"],"sourcesContent":["import ai from \"i18next-browser-languagedetector\";\nimport oi from \"i18next\";\nimport { initReactI18next as si, useTranslation as pe } from \"react-i18next\";\nimport o, { useReducer as li, useEffect as k, useState as L, useRef as Ue, useCallback as qe, createContext as ci, useContext as ui, cloneElement as di, Fragment as mi } from \"react\";\nimport { HAS_PART as We, PART_OF as st, frameResource as dr, normalize as fi, serialize as hi, serializeConfigPresentation2 as pi, serializeConfigPresentation3 as gi, isSpecificResource as vi } from \"@iiif/parser\";\nimport { v4 as Me } from \"uuid\";\nimport { decodeContentState as yi, getVisibleCanvasesFromCanvasId as bi, encodeContentState as wi, getManifestSequence as xi } from \"@iiif/helpers\";\nimport * as Ei from \"@radix-ui/react-collapsible\";\nimport { ErrorBoundary as Et } from \"react-error-boundary\";\nimport { createStitches as Si, createTheme as Ci } from \"@stitches/react\";\nimport * as je from \"@radix-ui/react-tabs\";\nimport Ai from \"@nulib/use-markdown\";\nimport * as Ii from \"node-webvtt\";\nimport * as Ge from \"@radix-ui/react-radio-group\";\nimport Ti from \"sanitize-html\";\nimport ne from \"hls.js\";\nimport * as Pe from \"@radix-ui/react-form\";\nimport * as Oe from \"@radix-ui/react-popover\";\nimport * as Le from \"@radix-ui/react-select\";\nimport { SelectValue as Ri, SelectIcon as ki, SelectPortal as $i, SelectScrollUpButton as Mi, SelectViewport as Oi, SelectGroup as Li, SelectScrollDownButton as Pi, SelectItemText as Fi, SelectItemIndicator as _i } from \"@radix-ui/react-select\";\nimport $e from \"openseadragon\";\nimport * as mr from \"@radix-ui/react-switch\";\nconst zi = \"Close\", Di = \"Next\", Bi = \"Previous\", Hi = \"Search\", Ni = \"Search...\", Wi = \"Share\", Vi = \"View All\", Ui = \"Failed\", qi = \"Copied\", ji = \"Loading...\", Gi = \"Search\", Qi = \"No Results\", Ji = \"More Results\", Yi = \"Select\", Zi = \"Viewer\", Xi = \"About\", Ki = \"Annotations\", ea = \"Search\", ta = \"More Information\", ra = \"View Collection\", na = \"Copy Collection URL\", ia = \"View Manifest\", aa = \"Copy Manifest URL\", oa = {\n  commonClose: zi,\n  commonNext: Di,\n  commonPrevious: Bi,\n  commonSearch: Hi,\n  commonSearchPlaceholder: Ni,\n  commonShare: Wi,\n  commonViewAll: Vi,\n  copyFailure: Ui,\n  copySuccess: qi,\n  contentSearchLoading: ji,\n  contentSearchPlaceholder: Gi,\n  contentSearchResultsNone: Qi,\n  contentSearchResultsMore: Ji,\n  informationPanelTabs: Yi,\n  informationPanelTabsClose: Zi,\n  informationPanelTabsAbout: Xi,\n  informationPanelTabsAnnotations: Ki,\n  informationPanelTabsSearch: ea,\n  informationPanelToggle: ta,\n  shareCollectionJson: ra,\n  shareCollectionCopy: na,\n  shareManifestJson: ia,\n  shareManifestCopy: aa\n}, sa = {}, la = {\n  en: oa,\n  pt: sa\n}, lt = \"clover\", ca = Object.fromEntries(\n  Object.entries(la).map(([e, t]) => [\n    e,\n    { [`${lt}`]: t }\n  ])\n);\noi.use(ai).use(si).init({\n  defaultNS: lt,\n  fallbackLng: \"en\",\n  ns: [lt],\n  resources: { ...ca }\n});\nvar N = function(t) {\n  return function() {\n    const r = { type: t, getType: () => t, toString: () => t };\n    return (n, i) => ({\n      ...r,\n      ...n !== void 0 && { payload: n },\n      ...i !== void 0 && { meta: i }\n    });\n  };\n}, fr = \"@iiif/IMPORT_ENTITIES\", hr = \"@iiif/MODIFY_ENTITY_FIELD\", pr = \"@iiif/REORDER_ENTITY_FIELD\", gr = \"@iiif/ADD_REFERENCE\", ct = \"@iiif/UPDATE_REFERENCE\", vr = \"@iiif/REMOVE_REFERENCE\", yr = \"@iiif/ADD_METADATA\", br = \"@iiif/REMOVE_METADATA\", ut = \"@iiif/UPDATE_METADATA\", wr = \"@iiif/REORDER_METADATA\", xr = N(fr)(), ua = N(hr)(), da = N(pr)(), ma = N(gr)(), fa = N(vr)(), ha = N(ct)(), pa = N(yr)(), ga = N(ut)(), va = N(br)(), ya = N(wr)(), ba = {\n  importEntities: xr,\n  modifyEntityField: ua,\n  reorderEntityField: da,\n  addReference: ma,\n  removeReference: fa,\n  updateReference: ha,\n  addMetadata: pa,\n  removeMetadata: va,\n  updateMetadata: ga,\n  reorderMetadata: ya\n}, Er = \"@iiif/ADD_MAPPING\", Sr = \"@iiif/ADD_MAPPINGS\", wa = N(Er)(), xa = N(Sr)(), dt = \"RESOURCE_ERROR\", Cr = \"RESOURCE_LOADING\", mt = \"RESOURCE_READY\", Ar = \"@iiif/REQUEST_RESOURCE\", Ir = \"@iiif/REQUEST_ERROR\", Tr = \"@iiif/REQUEST_MISMATCH\", Rr = \"@iiif/REQUEST_COMPLETE\", Ea = \"@iiif/REQUEST_OFFLINE_RESOURCE\", Sa = N(Ar)(), ft = N(Ir)(), Ca = N(Tr)(), Aa = N(Rr)(), St = \"@iiif/BATCH\", Ia = \"@iiif/BATCH_IMPORT\", ht = N(St)(), Ta = (e, t) => {\n  const { entities: r, resource: n, mapping: i } = fi(t);\n  if (n.id === void 0)\n    return [ft({ id: e, message: \"ID is not defined in resource.\" })];\n  const a = [xr({ entities: r }), xa({ mapping: i })];\n  return n.id !== e && (a.push(wa({ id: e, type: n.type })), a.push(Ca({ requestId: e, actualId: n.id }))), a.push(Aa({ id: e })), a;\n}, Pt = Number.isNaN || function(t) {\n  return typeof t == \"number\" && t !== t;\n};\nfunction Ra(e, t) {\n  return !!(e === t || Pt(e) && Pt(t));\n}\nfunction Ft(e, t) {\n  if (!Array.isArray(e) || !Array.isArray(t))\n    return e === t;\n  if (e.length !== t.length)\n    return !1;\n  for (let r = 0; r < e.length; r++)\n    if (!Ra(e[r], t[r]))\n      return !1;\n  return !0;\n}\nfunction Xe(e, t, r) {\n  const n = e.iiif.requests[t], i = e.iiif.mapping[t];\n  if (!i || !e.iiif.entities[i][n.resourceUri])\n    return;\n  const a = e.iiif.entities[i][n.resourceUri];\n  if (a && a[We]) {\n    const s = a[We].find((l) => l[st] === a.id);\n    return dr(a, s);\n  }\n  return a;\n}\nfunction ka(e) {\n  return e && typeof e.then == \"function\";\n}\nfunction _t(e, t, { waitTimeout: r = 30 } = {}) {\n  return (n, i) => {\n    const a = e.getStore(), s = a.getState(), l = s.iiif.requests[n];\n    if (l) {\n      if (l.loadingState === mt) {\n        const d = Xe(s, n);\n        if (d)\n          return d;\n      }\n      switch (l.loadingState) {\n        case dt:\n          break;\n        case Cr:\n          return (async () => {\n            let d, c = !1;\n            try {\n              const m = await Promise.race([\n                new Promise((p, f) => {\n                  c || (d = a.subscribe(() => {\n                    const g = a.getState();\n                    if (g.iiif.requests[n].loadingState === dt) {\n                      f();\n                      return;\n                    }\n                    if (g.iiif.requests[n].loadingState === mt) {\n                      const h = Xe(g, n);\n                      h ? p(h) : f();\n                    }\n                  }));\n                }),\n                new Promise(\n                  (p, f) => setTimeout(\n                    () => {\n                      c = !0, f();\n                    },\n                    r * 60 * 1e3\n                  )\n                )\n              ]);\n              if (d && d(), m)\n                return m;\n            } catch {\n              d && d();\n            }\n          })();\n      }\n    }\n    e.dispatch(Sa({ id: n }));\n    const u = (d) => {\n      if (!d)\n        return;\n      !d.id && !d[\"@id\"] && (d[\"@type\"] && (d[\"@id\"] = n), d.id = n);\n      const c = Ta(n, d);\n      return e.dispatch(ht({ actions: c })), Xe(a.getState(), n);\n    };\n    try {\n      const d = t(n, i);\n      return ka(d) ? (async () => {\n        try {\n          return u(await d);\n        } catch (c) {\n          throw e.dispatch(ft({ id: n, message: c.toString() })), c;\n        }\n      })() : u(d);\n    } catch (d) {\n      throw e.dispatch(ft({ id: n, message: d.toString() })), d;\n    }\n  };\n}\nfunction kr() {\n  return {\n    Collection: {},\n    Manifest: {},\n    Canvas: {},\n    AnnotationPage: {},\n    AnnotationCollection: {},\n    Annotation: {},\n    ContentResource: {},\n    Range: {},\n    Service: {},\n    Selector: {},\n    Agent: {}\n  };\n}\nconst $a = {};\nvar zt = (e) => {\n  let t;\n  const r = /* @__PURE__ */ new Set(), n = (c, m) => {\n    const p = typeof c == \"function\" ? c(t) : c;\n    if (!Object.is(p, t)) {\n      const f = t;\n      t = m ?? (typeof p != \"object\" || p === null) ? p : Object.assign({}, t, p), r.forEach((g) => g(t, f));\n    }\n  }, i = () => t, u = { setState: n, getState: i, getInitialState: () => d, subscribe: (c) => (r.add(c), () => r.delete(c)), destroy: () => {\n    ($a ? \"production\" : void 0) !== \"production\" && console.warn(\n      \"[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected.\"\n    ), r.clear();\n  } }, d = t = e(n, i, u);\n  return u;\n}, Ma = (e) => e ? zt(e) : zt, $r = \"@iiif/SET_META_VALUE\", Mr = \"@iiif/SET_META_VALUE_DYNAMIC\", Or = \"@iiif/UNSET_META_VALUE\", Oa = N($r)(), La = N(Mr)(), Pa = N(Or)(), Dt = {\n  setMetaValue: Oa,\n  setMetaValueDynamic: La,\n  unsetMetaValue: Pa\n};\nconst Ke = { BASE_URL: \"/\", DEV: !1, MODE: \"production\", PROD: !0, SSR: !1 };\nvar Fa = (e, t) => (r, n, i) => (i.dispatch = (a) => (r((s) => e(s, a), !1, a), a), i.dispatchFromDevtools = !0, { dispatch: (...a) => i.dispatch(...a), ...t }), _a = Fa, pt = /* @__PURE__ */ new Map(), Fe = (e) => {\n  const t = pt.get(e);\n  return t ? Object.fromEntries(\n    Object.entries(t.stores).map(([r, n]) => [r, n.getState()])\n  ) : {};\n}, za = (e, t, r) => {\n  if (e === void 0)\n    return {\n      type: \"untracked\",\n      connection: t.connect(r)\n    };\n  const n = pt.get(r.name);\n  if (n)\n    return { type: \"tracked\", store: e, ...n };\n  const i = {\n    connection: t.connect(r),\n    stores: {}\n  };\n  return pt.set(r.name, i), { type: \"tracked\", store: e, ...i };\n}, Da = (e, t = {}) => (r, n, i) => {\n  const { enabled: a, anonymousActionType: s, store: l, ...u } = t;\n  let d;\n  try {\n    d = (a ?? (Ke ? \"production\" : void 0) !== \"production\") && window.__REDUX_DEVTOOLS_EXTENSION__;\n  } catch {\n  }\n  if (!d)\n    return (Ke ? \"production\" : void 0) !== \"production\" && a && console.warn(\n      \"[zustand devtools middleware] Please install/enable Redux devtools extension\"\n    ), e(r, n, i);\n  const { connection: c, ...m } = za(l, d, u);\n  let p = !0;\n  i.setState = (h, w, v) => {\n    const b = r(h, w);\n    if (!p)\n      return b;\n    const E = v === void 0 ? { type: s || \"anonymous\" } : typeof v == \"string\" ? { type: v } : v;\n    return l === void 0 ? (c == null || c.send(E, n()), b) : (c == null || c.send(\n      {\n        ...E,\n        type: `${l}/${E.type}`\n      },\n      {\n        ...Fe(u.name),\n        [l]: i.getState()\n      }\n    ), b);\n  };\n  const f = (...h) => {\n    const w = p;\n    p = !1, r(...h), p = w;\n  }, g = e(i.setState, n, i);\n  if (m.type === \"untracked\" ? c == null || c.init(g) : (m.stores[m.store] = i, c == null || c.init(\n    Object.fromEntries(\n      Object.entries(m.stores).map(([h, w]) => [\n        h,\n        h === m.store ? g : w.getState()\n      ])\n    )\n  )), i.dispatchFromDevtools && typeof i.dispatch == \"function\") {\n    let h = !1;\n    const w = i.dispatch;\n    i.dispatch = (...v) => {\n      (Ke ? \"production\" : void 0) !== \"production\" && v[0].type === \"__setState\" && !h && (console.warn(\n        '[zustand devtools middleware] \"__setState\" action type is reserved to set state from the devtools. Avoid using it.'\n      ), h = !0), w(...v);\n    };\n  }\n  return c.subscribe((h) => {\n    var w;\n    switch (h.type) {\n      case \"ACTION\":\n        if (typeof h.payload != \"string\") {\n          console.error(\n            \"[zustand devtools middleware] Unsupported action format\"\n          );\n          return;\n        }\n        return et(\n          h.payload,\n          (v) => {\n            if (v.type === \"__setState\") {\n              if (l === void 0) {\n                f(v.state);\n                return;\n              }\n              Object.keys(v.state).length !== 1 && console.error(\n                `\n                    [zustand devtools middleware] Unsupported __setState action format. \n                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),\n                    and value of this only key should be a state object. Example: { \"type\": \"__setState\", \"state\": { \"abc123Store\": { \"foo\": \"bar\" } } }\n                    `\n              );\n              const b = v.state[l];\n              if (b == null)\n                return;\n              JSON.stringify(i.getState()) !== JSON.stringify(b) && f(b);\n              return;\n            }\n            i.dispatchFromDevtools && typeof i.dispatch == \"function\" && i.dispatch(v);\n          }\n        );\n      case \"DISPATCH\":\n        switch (h.payload.type) {\n          case \"RESET\":\n            return f(g), l === void 0 ? c == null ? void 0 : c.init(i.getState()) : c == null ? void 0 : c.init(Fe(u.name));\n          case \"COMMIT\":\n            if (l === void 0) {\n              c == null || c.init(i.getState());\n              return;\n            }\n            return c == null ? void 0 : c.init(Fe(u.name));\n          case \"ROLLBACK\":\n            return et(h.state, (v) => {\n              if (l === void 0) {\n                f(v), c == null || c.init(i.getState());\n                return;\n              }\n              f(v[l]), c == null || c.init(Fe(u.name));\n            });\n          case \"JUMP_TO_STATE\":\n          case \"JUMP_TO_ACTION\":\n            return et(h.state, (v) => {\n              if (l === void 0) {\n                f(v);\n                return;\n              }\n              JSON.stringify(i.getState()) !== JSON.stringify(v[l]) && f(v[l]);\n            });\n          case \"IMPORT_STATE\": {\n            const { nextLiftedState: v } = h.payload, b = (w = v.computedStates.slice(-1)[0]) == null ? void 0 : w.state;\n            if (!b)\n              return;\n            f(l === void 0 ? b : b[l]), c == null || c.send(\n              null,\n              // FIXME no-any\n              v\n            );\n            return;\n          }\n          case \"PAUSE_RECORDING\":\n            return p = !p;\n        }\n        return;\n    }\n  }), g;\n}, Ba = Da, et = (e, t) => {\n  let r;\n  try {\n    r = JSON.parse(e);\n  } catch (n) {\n    console.error(\n      \"[zustand devtools middleware] Could not parse the received json\",\n      n\n    );\n  }\n  r !== void 0 && t(r);\n}, Ha = (e) => (t, r, n) => {\n  const i = n.subscribe;\n  return n.subscribe = (s, l, u) => {\n    let d = s;\n    if (l) {\n      const c = (u == null ? void 0 : u.equalityFn) || Object.is;\n      let m = s(n.getState());\n      d = (p) => {\n        const f = s(p);\n        if (!c(m, f)) {\n          const g = m;\n          l(m = f, g);\n        }\n      }, u != null && u.fireImmediately && l(m, m);\n    }\n    return i(d);\n  }, e(t, r, n);\n}, Na = Ha, Wa = (e = {}, t) => {\n  switch (t.type) {\n    case Er:\n      return {\n        ...e,\n        [t.payload.id]: t.payload.type\n      };\n    case Sr:\n      return {\n        ...e,\n        ...t.payload.mapping\n      };\n    default:\n      return e;\n  }\n};\nfunction tt(e, t, r, n) {\n  return !(!e[r] || !e[r][t] || !e[r][t][n] || !Array.isArray(e[r][t][n]));\n}\nfunction Va(e, t) {\n  const r = {}, n = [];\n  for (const [i, a] of Object.entries(e || {})) {\n    n.push(i);\n    const s = (t || {})[i];\n    if (!s || s.length === 0) {\n      r[i] = a;\n      continue;\n    }\n    r[i] = s;\n  }\n  for (const [i, a] of Object.entries(t || {}))\n    n.indexOf(i) === -1 && (r[i] = a);\n  return r;\n}\nfunction T(e) {\n  return e.payload;\n}\nfunction rt(e, t) {\n  return typeof e > \"u\" ? t : e;\n}\nvar Ua = (e = kr(), t) => {\n  var n;\n  const r = (i, a) => ({\n    ...e,\n    [T(t).type]: {\n      ...e[T(t).type],\n      [T(t).id]: {\n        ...i,\n        ...a\n      }\n    }\n  });\n  switch (t.type) {\n    case hr: {\n      if (!e[T(t).type] || !e[T(t).type][T(t).id])\n        return e;\n      const i = e[T(t).type][T(t).id];\n      return typeof i == \"string\" ? e : r(i, { [T(t).key]: T(t).value });\n    }\n    case pr: {\n      if (!tt(e, T(t).id, T(t).type, T(t).key))\n        return e;\n      const i = e[T(t).type][T(t).id];\n      if (typeof i == \"string\")\n        return e;\n      const a = Array.from(i[T(t).key]), [s] = a.splice(T(t).startIndex, 1);\n      return a.splice(T(t).endIndex, 0, s), r(i, { [T(t).key]: a });\n    }\n    case fr: {\n      const i = Object.keys(T(t).entities), a = { ...e };\n      for (const s of i) {\n        const l = T(t).entities[s], u = { ...e[s] || {} };\n        let d = !1;\n        const c = Object.keys(l || {}) || [];\n        if (l && c) {\n          for (const m of c)\n            d = !0, u[m] = e[s][m] ? Va(e[s][m], l[m]) : l[m];\n          d && (a[s] = u);\n        }\n      }\n      return a;\n    }\n    case gr: {\n      if (!tt(e, T(t).id, T(t).type, T(t).key))\n        return e;\n      const i = e[T(t).type][T(t).id], a = Array.from(i[T(t).key]);\n      return a.splice(rt(T(t).index, a.length + 1), 0, T(t).reference), r(i, { [T(t).key]: a });\n    }\n    case ct:\n    case vr: {\n      if (!tt(e, T(t).id, T(t).type, T(t).key))\n        return e;\n      const i = e[T(t).type][T(t).id], a = Array.from(i[T(t).key]), s = rt(\n        T(t).index,\n        a.findIndex((l) => l && l.id === T(t).reference.id)\n      );\n      return s === -1 || ((n = a[s]) == null ? void 0 : n.id) !== T(t).reference.id ? e : (t.type === ct ? a.splice(s, 1, T(t).reference) : a.splice(s, 1), r(i, { [T(t).key]: a }));\n    }\n    case yr: {\n      const i = e[T(t).type][T(t).id];\n      if (!i)\n        return e;\n      const a = Array.from(i.metadata || []), s = T(t);\n      return a.splice(rt(t.payload.beforeIndex, a.length + 1), 0, {\n        label: s.label,\n        value: s.label\n      }), r(i, { metadata: a });\n    }\n    case wr: {\n      const i = e[T(t).type][T(t).id];\n      if (typeof i == \"string\" || !i)\n        return e;\n      const a = Array.from(i.metadata || []), [s] = a.splice(T(t).startIndex, 1);\n      return a.splice(T(t).endIndex, 0, s), r(i, { metadata: a });\n    }\n    case ut:\n    case br: {\n      const i = e[T(t).type][T(t).id], a = Array.from(i.metadata || []), s = T(t).atIndex;\n      return typeof s > \"u\" || s === -1 || !a[s] ? e : (t.type === ut ? a.splice(s, 1, { label: T(t).label, value: T(t).value }) : a.splice(s, 1), r(i, { metadata: a }));\n    }\n    default:\n      return e;\n  }\n}, qa = (e = {}, t) => {\n  switch (t.type) {\n    case Ar:\n    case Ea:\n      return {\n        ...e,\n        [t.payload.id]: {\n          requestUri: t.payload.id,\n          loadingState: Cr,\n          uriMismatch: !1,\n          resourceUri: t.payload.id\n        }\n      };\n    case Tr:\n      return {\n        ...e,\n        [t.payload.requestId]: {\n          ...e[t.payload.requestId] || {},\n          uriMismatch: !0,\n          resourceUri: t.payload.actualId\n        },\n        [t.payload.actualId]: {\n          requestUri: t.payload.requestId,\n          loadingState: e[t.payload.requestId].loadingState,\n          uriMismatch: !0,\n          resourceUri: t.payload.actualId\n        }\n      };\n    case Ir:\n      return {\n        ...e,\n        [t.payload.id]: {\n          ...e[t.payload.id] || {},\n          loadingState: dt,\n          error: t.payload.message\n        }\n      };\n    case Rr:\n      return {\n        ...e,\n        [t.payload.id]: {\n          ...e[t.payload.id] || {},\n          loadingState: mt,\n          error: void 0\n        }\n      };\n  }\n  return e;\n}, ja = (e = {}, t) => {\n  const { id: r, updateValue: n, value: i, meta: a, key: s } = t && t.payload || {};\n  switch (t.type) {\n    case $r:\n      return {\n        ...e,\n        [r]: {\n          ...e[r] || {},\n          [a]: {\n            ...e[r] ? e[r][a] || {} : {},\n            [s]: i\n          }\n        }\n      };\n    case Mr:\n      return {\n        ...e,\n        [r]: {\n          ...e[r] || {},\n          [a]: {\n            ...e[r] ? e[r][a] || {} : {},\n            [s]: e[r] && e[r][a] ? n(e[r][a][s]) : n(void 0)\n          }\n        }\n      };\n    case Or:\n      return e[r] && e[r][a] && e[r][a][s] ? {\n        ...e,\n        [r]: {\n          ...e[r] || {},\n          [a]: {\n            ...e[r] ? e[r][a] || {} : {},\n            [s]: void 0\n          }\n        }\n      } : e;\n    default:\n      return e;\n  }\n};\nfunction Lr(e = {}) {\n  const t = Object.keys(e);\n  return function(n = {}, i) {\n    let a = !1;\n    const s = {};\n    for (let l = 0; l < t.length; l++) {\n      const u = t[l];\n      s[u] = e[u](n[u], i), a = a || s[u] !== n[u];\n    }\n    return a ? s : n;\n  };\n}\nfunction Ga(e) {\n  return (t, r) => r && r.type === St ? r.payload.actions.reduce(e, t) : r && r.type === Ia ? {\n    ...t,\n    iiif: {\n      ...t.iiif,\n      ...r.payload.state\n    }\n  } : e(t, r);\n}\nvar Qa = Lr({\n  mapping: Wa,\n  entities: Ua,\n  requests: qa,\n  meta: ja\n});\nfunction Ja() {\n  return {\n    iiif: {\n      entities: kr(),\n      meta: {},\n      mapping: {},\n      requests: {}\n    }\n  };\n}\nfunction Ya(e = {}) {\n  const {\n    enableDevtools: t = !1,\n    iiifStoreName: r = \"iiif\",\n    defaultState: n = Ja(),\n    customReducers: i = {}\n  } = e, a = Ga(Lr({ [r]: Qa, ...i })), l = !!(typeof window < \"u\" && window.__REDUX_DEVTOOLS_EXTENSION__) ? Ba : (u, d) => u;\n  return Ma(\n    //\n    Na(\n      //\n      l(\n        //\n        _a(a, n),\n        { enabled: t }\n      )\n    )\n  );\n}\nvar Za = Object.defineProperty, Xa = (e, t, r) => t in e ? Za(e, t, { enumerable: !0, configurable: !0, writable: !0, value: r }) : e[t] = r, fe = (e, t, r) => (Xa(e, typeof t != \"symbol\" ? t + \"\" : t, r), r);\nfunction Ka(e) {\n  return { all: e = e || /* @__PURE__ */ new Map(), on: function(t, r) {\n    var n = e.get(t);\n    n ? n.push(r) : e.set(t, [r]);\n  }, off: function(t, r) {\n    var n = e.get(t);\n    n && (r ? n.splice(n.indexOf(r) >>> 0, 1) : e.set(t, []));\n  }, emit: function(t, r) {\n    var n = e.get(t);\n    n && n.slice().map(function(i) {\n      i(r);\n    }), (n = e.get(\"*\")) && n.slice().map(function(i) {\n      i(t, r);\n    });\n  } };\n}\nfunction Q(e, t, r, n = !0) {\n  t[Re] = t[Re] || [], t[Re].push(e);\n  const i = /* @__PURE__ */ new Map();\n  Object.defineProperty(t, e, {\n    enumerable: n,\n    get() {\n      if (typeof t[be][e] > \"u\")\n        return;\n      const a = t[be][e];\n      if (!a)\n        return a;\n      const s = r.get(t[be][e], {\n        parent: this.id ? { id: this.id, type: this.type } : void 0\n      });\n      return i.has(s) || (i.clear(), i.set(s, we(s, r))), i.get(s);\n    },\n    set(a) {\n      t[be][e] !== a && (this[ye] ? r.modifyEntityField({ id: this.id, type: this.type }, e, Pr(a)) : this[be][e] = a);\n    }\n  });\n}\nvar be = Symbol.for(\"_refs_\"), ye = Symbol.for(\"_reactive_\"), Re = Symbol.for(\"_defined_\"), Bt = Symbol.for(\"_parent_\");\nfunction eo(e, t = !1, r) {\n  const n = {\n    id: \"\",\n    type: \"unknown\",\n    [Re]: [],\n    [be]: {},\n    [Bt]: null,\n    [ye]: null,\n    is(i) {\n      return typeof i == \"string\" ? this.id === i : i.id ? i.id === this.id : !1;\n    },\n    reactive() {\n      if (!this[ye])\n        return this[ye] = this.subscribe(() => this.refresh(), !0), () => {\n          this.unreactive();\n        };\n    },\n    refresh() {\n      if (this.id) {\n        const i = this.unwrap();\n        for (const a of Object.keys(i || {}))\n          this[Re].includes(a) ? this[be][a] = i[a] : this[a] = i[a];\n      }\n    },\n    unreactive() {\n      this[ye] && (this[ye](), this[ye] = null);\n    },\n    unwrap() {\n      if (!this.id)\n        throw new Error(\"Invalid object\");\n      const i = this[Bt];\n      return e.get(this.id, { parent: i ? { id: i, type: \"unknown\" } : void 0 });\n    },\n    toPresentation3() {\n      return e.toPresentation3(this.unwrap());\n    },\n    toPresentation2() {\n      return e.toPresentation2(this.unwrap());\n    },\n    valueOf() {\n      return this.unwrap();\n    },\n    toJSON() {\n      const i = this;\n      return {\n        ...i,\n        items: i.items,\n        annotations: i.annotations,\n        structures: i.structures,\n        seeAlso: i.seeAlso,\n        service: i.service,\n        services: i.services,\n        rendering: i.rendering,\n        partOf: i.partOf,\n        start: i.start,\n        supplementary: i.supplementary,\n        homepage: i.homepage,\n        thumbnail: i.thumbnail,\n        placeholderCanvas: i.placeholderCanvas,\n        accompanyingCanvas: i.accompanyingCanvas,\n        provider: i.provider\n      };\n    },\n    subscribe(i, a = !0) {\n      return e.subscribe(\n        () => this.id ? e.get(this.id) : null,\n        i,\n        a\n      );\n    }\n  };\n  return Q(\"items\", n, e), Q(\"annotations\", n, e), Q(\"structures\", n, e), Q(\"seeAlso\", n, e), Q(\"rendering\", n, e), Q(\"partOf\", n, e), Q(\"start\", n, e, !1), Q(\"supplementary\", n, e), Q(\"homepage\", n, e), Q(\"thumbnail\", n, e), Q(\"placeholderCanvas\", n, e, !1), Q(\"accompanyingCanvas\", n, e, !1), Q(\"provider\", n, e), Q(\"body\", n, e), Q(\"logo\", n, e), n;\n}\nfunction to(e) {\n  return !!e[Re];\n}\nfunction Pr(e) {\n  return Array.isArray(e) ? e.map((t) => Pr(t)) : !e || !e.type ? e : { id: e.id, type: e.type };\n}\nfunction we(e, t, r = !1, n) {\n  if (Array.isArray(e))\n    return e.map((l) => we(l, t, r));\n  if (!e || !e.type || !e.id)\n    return e;\n  const i = eo(t, r), a = Object.create(i), s = Object.assign(a, e);\n  return r && s.reactive(), s;\n}\nfunction Ht(e) {\n  switch (e) {\n    case \"Image\":\n    case \"Video\":\n    case \"Sound\":\n    case \"Dataset\":\n    case \"Text\":\n    case \"Composite\":\n    case \"List\":\n    case \"Independents\":\n    case \"Audience\":\n      return \"ContentResource\";\n    case \"ImageService1\":\n    case \"ImageService2\":\n    case \"ImageService3\":\n      return \"Service\";\n  }\n  return e;\n}\nvar Fr = class {\n  constructor(e, t) {\n    fe(this, \"options\"), fe(this, \"store\"), fe(this, \"emitter\"), fe(this, \"isBatching\", !1), fe(this, \"batchQueue\", []), fe(this, \"remoteFetcher\"), fe(this, \"staticFetcher\"), fe(this, \"defaultFetcher\", (r) => fetch(r).then((n) => n.json())), this.options = Object.assign(\n      {\n        reducers: {},\n        customFetcher: this.defaultFetcher,\n        enableDevtools: !0\n      },\n      e || {}\n    ), this.store = t || Ya({\n      customReducers: this.options.reducers,\n      defaultState: this.options.defaultState,\n      enableDevtools: this.options.enableDevtools\n    }), this.emitter = Ka(), this.remoteFetcher = _t(this, this.options.customFetcher), this.staticFetcher = _t(this, (r, n) => n);\n  }\n  batch(e) {\n    this.isBatching = !0;\n    try {\n      e(this), this.isBatching = !1, this.dispatch(ht({ actions: this.batchQueue }));\n    } catch (t) {\n      throw this.batchQueue = [], this.isBatching = !1, t;\n    }\n    this.batchQueue = [];\n  }\n  async asyncBatch(e) {\n    this.isBatching = !0;\n    try {\n      await e(this), this.isBatching = !1, this.dispatch(ht({ actions: this.batchQueue }));\n    } catch (t) {\n      throw this.batchQueue = [], this.isBatching = !1, t;\n    }\n    this.batchQueue = [];\n  }\n  modifyEntityField(e, t, r) {\n    this.dispatch(\n      ba.modifyEntityField({\n        id: e.id,\n        type: e.type,\n        key: t,\n        value: r\n      })\n    );\n  }\n  dispatch(e) {\n    if (this.isBatching)\n      this.batchQueue.push(e);\n    else {\n      if (e.type === St) {\n        for (const n of e.payload.actions)\n          this.emitter.emit(n.type, { action: n, state: this.store.getState() });\n        this.store.dispatch(e);\n        const r = this.getState();\n        for (const n of e.payload.actions)\n          this.emitter.emit(`after:${n.type}`, { action: n, state: r });\n        return;\n      }\n      this.emitter.emit(e.type, { action: e, state: this.store.getState() }), this.store.dispatch(e);\n      const t = this.store.getState();\n      this.emitter.emit(`after:${e.type}`, { action: e, state: t });\n      return;\n    }\n  }\n  on(e, t) {\n    return this.emitter.on(e, t), () => {\n      this.emitter.off(e, t);\n    };\n  }\n  serialize(e, t) {\n    return hi(this.getState().iiif, e, t);\n  }\n  toPresentation2(e) {\n    return this.serialize(e, pi);\n  }\n  toPresentation3(e) {\n    return this.serialize(e, gi);\n  }\n  hydrate(e, t, r = {}) {\n    return this.get(e, t, { ...r, skipSelfReturn: !1 });\n  }\n  get(e, t, r = {}) {\n    typeof t != \"string\" && (r = t || {}, t = void 0);\n    const { skipSelfReturn: n = !0 } = r || {};\n    let i = r.parent ? typeof r.parent == \"string\" ? r.parent : r.parent.id : void 0;\n    if (Array.isArray(e))\n      return e.map((c) => this.get(c, r));\n    const a = this.getState();\n    if (vi(e) && !r.preserveSpecificResources && (e = e.source), typeof e == \"string\") {\n      const c = Ht(t || a.iiif.mapping[e]);\n      if (!c)\n        return n ? null : { id: e, type: \"unknown\" };\n      e = { id: e, type: c };\n    }\n    if (e && e.partOf && !i && !r.skipPartOfCheck) {\n      const c = Array.isArray(e.partOf) ? e.partOf[0] : e.partOf;\n      c && (typeof c == \"string\" && (i = c), typeof c.id == \"string\" && (i = c.id));\n    }\n    const s = Ht(t || (e == null ? void 0 : e.type)), l = e == null ? void 0 : e.id, u = a.iiif.entities[s];\n    if (!u) {\n      const c = a.iiif.requests[l];\n      return c && c.resourceUri !== l ? this.get(c.resourceUri, r) : n ? null : e;\n    }\n    const d = u[e.id];\n    if (d && d[We]) {\n      const c = d[We].find((m) => i ? m[st] === i : m[st] === d.id);\n      return dr(d, c);\n    }\n    return u[e.id] || (n ? null : e);\n  }\n  select(e) {\n    return e(this.getState());\n  }\n  getStore() {\n    return this.store;\n  }\n  getState() {\n    return this.store.getState();\n  }\n  deep(e, t) {\n    if (typeof e > \"u\")\n      return this.get(t, { skipSelfReturn: !1 });\n    if (typeof e == \"function\")\n      try {\n        const n = e(this.get(t, { skipSelfReturn: !1 })), i = (a) => this.deep(a, n);\n        return i.size = Array.isArray(n) ? n.length : 1, i;\n      } catch {\n        const i = (a) => this.deep(a, void 0);\n        return i.size = 0, i;\n      }\n    const r = (n) => this.deep(n, e);\n    return r.size = Array.isArray(e) ? e.length : 1, r;\n  }\n  loadManifest(e, t) {\n    const r = typeof e == \"string\" ? e : e.id;\n    return this.load(r, t);\n  }\n  loadCollection(e, t) {\n    const r = typeof e == \"string\" ? e : e.id;\n    return this.load(r, t);\n  }\n  load(e, t) {\n    const r = typeof e == \"string\" ? e : e.id;\n    return t ? Promise.resolve(this.staticFetcher(r, t)) : Promise.resolve(this.remoteFetcher(r));\n  }\n  loadSync(e, t) {\n    const r = typeof e == \"string\" ? e : e.id;\n    return this.staticFetcher(r, t);\n  }\n  loadManifestSync(e, t) {\n    const r = typeof e == \"string\" ? e : e.id;\n    return this.loadSync(r, t);\n  }\n  loadCollectionSync(e, t) {\n    const r = typeof e == \"string\" ? e : e.id;\n    return this.loadSync(r, t);\n  }\n  areInputsEqual(e, t) {\n    return Ft(e, t);\n  }\n  subscribe(e, t, r) {\n    return typeof r > \"u\" && (typeof t > \"u\" || t === !1 || t === !0) && (r = t, t = e, e = (n) => n), this.store.subscribe(e, (n) => t(n, this), {\n      equalityFn: Ft,\n      fireImmediately: !r\n    });\n  }\n  async ensureLoaded(e) {\n    const t = typeof e == \"string\" ? e : e.id;\n    this.requestStatus(t) || await this.load(t);\n  }\n  requestStatus(e) {\n    return this.select((t) => t.iiif.requests[e]);\n  }\n  getResourceMeta(e, t) {\n    const r = this.getState().iiif.meta[e];\n    if (r)\n      return t ? r[t] : r;\n  }\n  getObject(e, t, r = {}) {\n    const { reactive: n, ...i } = r;\n    return we(this.get(e, t, i), this, n);\n  }\n  async loadObject(e, t) {\n    return we(await this.load(e, t), this);\n  }\n  async loadManifestObject(e, t) {\n    return we(await this.loadManifest(e, t), this);\n  }\n  async loadCollectionObject(e, t) {\n    return we(await this.loadCollection(e, t), this);\n  }\n  wrapObject(e) {\n    return we(this.get(e, { skipSelfReturn: !1 }), this);\n  }\n  isWrapped(e) {\n    return to(e);\n  }\n  setMetaValue([e, t, r], n) {\n    this.dispatch(\n      typeof n == \"function\" ? Dt.setMetaValueDynamic({\n        id: e,\n        meta: t,\n        key: r,\n        updateValue: n\n      }) : Dt.setMetaValue({\n        id: e,\n        meta: t,\n        key: r,\n        value: n\n      })\n    );\n  }\n};\nconst ro = (e) => {\n  const t = e.toString().split(\":\"), r = Math.ceil(parseInt(t[0])), n = Math.ceil(parseInt(t[1])), i = no(Math.ceil(parseInt(t[2])), 2);\n  let s = `${r !== 0 && n < 10 ? (n + \"\").padStart(2, \"0\") : n}:${i}`;\n  return r !== 0 && (s = `${r}:${s}`), s;\n}, _r = (e) => {\n  const t = new Date(e * 1e3).toISOString().substr(11, 8);\n  return ro(t);\n}, zr = (e, t) => {\n  if (typeof e != \"object\" || e === null)\n    return t;\n  for (const r in t)\n    typeof t[r] == \"object\" && t[r] !== null && !Array.isArray(t[r]) ? (e[r] || (e[r] = {}), e[r] = zr(e[r], t[r])) : e[r] = t[r];\n  return e;\n}, Dr = (e) => e.split(\"\").reduce(function(t, r) {\n  return t = (t << 5) - t + r.charCodeAt(0), t & t;\n}, 0), Br = (e, t) => Object.hasOwn(e, t) ? e[t].toString() : void 0, no = (e, t) => String(e).padStart(t, \"0\"), io = {\n  behavior: \"smooth\",\n  block: \"center\"\n}, ie = {\n  annotationOverlays: {\n    backgroundColor: \"#6666ff\",\n    borderColor: \"#000099\",\n    borderType: \"solid\",\n    borderWidth: \"1px\",\n    opacity: \"0.5\",\n    renderOverlays: !0,\n    zoomLevel: 2\n  },\n  background: \"transparent\",\n  canvasBackgroundColor: \"#6662\",\n  canvasHeight: \"500px\",\n  contentSearch: {\n    searchResultsLimit: 20,\n    overlays: {\n      backgroundColor: \"#ff6666\",\n      borderColor: \"#990000\",\n      borderType: \"solid\",\n      borderWidth: \"1px\",\n      opacity: \"0.5\",\n      renderOverlays: !0,\n      zoomLevel: 4\n    }\n  },\n  crossOrigin: \"anonymous\",\n  ignoreCaptionLabels: [],\n  informationPanel: {\n    vtt: {\n      autoScroll: {\n        enabled: !0,\n        settings: io\n      }\n    },\n    open: !0,\n    renderAbout: !0,\n    renderSupplementing: !0,\n    renderToggle: !0,\n    renderAnnotation: !0,\n    renderContentSearch: !0\n  },\n  openSeadragon: {},\n  requestHeaders: { \"Content-Type\": \"application/json\" },\n  showDownload: !0,\n  showIIIFBadge: !0,\n  showTitle: !0,\n  withCredentials: !1\n};\nfunction Hr(e) {\n  var r, n;\n  let t = (n = (r = ie == null ? void 0 : ie.informationPanel) == null ? void 0 : r.vtt) == null ? void 0 : n.autoScroll;\n  return typeof e == \"object\" && (t = \"enabled\" in e ? e : { enabled: !0, settings: e }), e === !1 && (t.enabled = !1), ao(t.settings), t;\n}\nfunction ao({ behavior: e, block: t }) {\n  const r = [\"auto\", \"instant\", \"smooth\"], n = [\"center\", \"end\", \"nearest\", \"start\"];\n  if (!r.includes(e))\n    throw TypeError(`'${e}' not in ${r.join(\" | \")}`);\n  if (!n.includes(t))\n    throw TypeError(`'${t}' not in ${n.join(\" | \")}`);\n}\nvar lr, cr;\nconst oo = Hr(\n  (cr = (lr = ie == null ? void 0 : ie.informationPanel) == null ? void 0 : lr.vtt) == null ? void 0 : cr.autoScroll\n);\nvar ur;\nconst Qe = {\n  activeCanvas: \"\",\n  activeManifest: \"\",\n  activePlayer: null,\n  activeSelector: void 0,\n  OSDImageLoaded: !1,\n  collection: {},\n  configOptions: ie,\n  customDisplays: [],\n  plugins: [],\n  isAutoScrollEnabled: oo.enabled,\n  isAutoScrolling: !1,\n  isInformationOpen: ((ur = ie == null ? void 0 : ie.informationPanel) == null ? void 0 : ur.open) || !0,\n  isLoaded: !1,\n  isUserScrolling: void 0,\n  sequence: [[], []],\n  vault: new Fr(),\n  openSeadragonViewer: null,\n  viewerId: Me(),\n  visibleCanvases: [],\n  visibleAnnotations: []\n}, Nr = o.createContext(Qe), Wr = o.createContext(Qe);\nfunction so(e, t) {\n  switch (t.type) {\n    case \"updateActiveCanvas\":\n      return t.canvasId || (t.canvasId = \"\"), {\n        ...e,\n        activeCanvas: t.canvasId\n      };\n    case \"updateActiveManifest\":\n      return {\n        ...e,\n        activeManifest: t.manifestId\n      };\n    case \"updateActivePlayer\":\n      return {\n        ...e,\n        activePlayer: t.player\n      };\n    case \"updateOSDImageLoaded\":\n      return {\n        ...e,\n        OSDImageLoaded: t.OSDImageLoaded\n      };\n    case \"updateAutoScrollAnnotationEnabled\":\n      return {\n        ...e,\n        isAutoScrollEnabled: t.isAutoScrollEnabled\n      };\n    case \"updateAutoScrolling\":\n      return {\n        ...e,\n        isAutoScrolling: t.isAutoScrolling\n      };\n    case \"updateCollection\":\n      return {\n        ...e,\n        collection: t.collection\n      };\n    case \"updateConfigOptions\":\n      return {\n        ...e,\n        configOptions: zr(e.configOptions, t.configOptions)\n      };\n    case \"updateContentStateAnnotation\":\n      return {\n        ...e,\n        contentStateAnnotation: t.contentStateAnnotation\n      };\n    case \"updateInformationOpen\":\n      return {\n        ...e,\n        isInformationOpen: t.isInformationOpen\n      };\n    case \"updateInformationPanelResource\":\n      return {\n        ...e,\n        informationPanelResource: t.informationPanelResource\n      };\n    case \"updateIsLoaded\":\n      return {\n        ...e,\n        isLoaded: t.isLoaded\n      };\n    case \"updateManifestSequence\":\n      return {\n        ...e,\n        sequence: t.sequence\n      };\n    case \"updateUserScrolling\":\n      return {\n        ...e,\n        isUserScrolling: t.isUserScrolling\n      };\n    case \"updateOpenSeadragonViewer\":\n      return {\n        ...e,\n        openSeadragonViewer: t.openSeadragonViewer\n      };\n    case \"updateViewerId\":\n      return {\n        ...e,\n        viewerId: t.viewerId\n      };\n    case \"updateActiveSelector\":\n      return {\n        ...e,\n        activeSelector: t.selector\n      };\n    case \"updateVisibleCanvases\":\n      return {\n        ...e,\n        visibleCanvases: t.visibleCanvases\n      };\n    default:\n      throw new Error(`Unhandled action type: ${t.type}`);\n  }\n}\nconst lo = ({\n  initialState: e = Qe,\n  children: t\n}) => {\n  const [r, n] = li(so, e), { openSeadragonViewer: i } = r;\n  return k(() => {\n    if (i)\n      return i.addHandler(\"update-viewport\", () => {\n        const a = i.viewport, s = a.getBounds(), l = a.viewportToImageRectangle(s), d = `xywh=${[\n          Math.round(l.x),\n          Math.round(l.y),\n          Math.round(l.width),\n          Math.round(l.height)\n        ].join(\",\")}`;\n        n({\n          type: \"updateActiveSelector\",\n          // @ts-ignore\n          selector: {\n            type: \"FragmentSelector\",\n            value: d\n          }\n        });\n      }), () => {\n        i.removeAllHandlers(\"update-viewport\");\n      };\n  }, [i]), /* @__PURE__ */ o.createElement(Nr.Provider, { value: r }, /* @__PURE__ */ o.createElement(\n    Wr.Provider,\n    {\n      value: n\n    },\n    t\n  ));\n};\nfunction z() {\n  const e = o.useContext(Nr);\n  if (e === void 0)\n    throw new Error(\"useViewerState must be used within a ViewerProvider\");\n  return e;\n}\nfunction X() {\n  const e = o.useContext(Wr);\n  if (e === void 0)\n    throw new Error(\"useViewerDispatch must be used within a ViewerProvider\");\n  return e;\n}\nconst co = async (e, t) => {\n  const r = e.get({\n    id: t,\n    type: \"Canvas\"\n  });\n  if (!(r != null && r.annotations) || !r.annotations[0]) return [];\n  const i = e.get(r.annotations).filter((s) => s.items ? s : !1), a = [];\n  for (const s of i)\n    if (s.items.length > 0) {\n      const l = s.label || { none: [\"Annotations\"] };\n      a.push({ ...s, label: l });\n    } else {\n      let l = {};\n      try {\n        l = await e.load(s.id);\n      } catch (u) {\n        console.log(u);\n      }\n      if (l.items && l.items.length > 0) {\n        const u = l.label || {\n          none: [\"Annotations\"]\n        };\n        a.push({ ...l, label: u });\n      }\n    }\n  return a;\n}, Vr = async (e, t, r) => {\n  try {\n    if (r == null || r.q == null)\n      return {};\n    const n = r.q.trim(), i = new URL(t);\n    return i.searchParams.set(\"q\", n), await e.load(i.toString());\n  } catch (n) {\n    return console.warn(\"Error in getContentSearchResources:\", n), {};\n  }\n}, Ur = (e, t, r, n) => {\n  var s, l;\n  const i = {\n    canvas: void 0,\n    accompanyingCanvas: void 0,\n    annotationPage: void 0,\n    annotations: []\n  }, a = (u) => {\n    if (u) {\n      if (!u.body || !u.motivation) {\n        console.error(\n          \"Invalid annotation after Hyperion parsing: missing either 'body' or 'motivation'\",\n          u\n        );\n        return;\n      }\n      let d = u.body;\n      Array.isArray(d) && (d = d[0]);\n      const c = e.get(d.id);\n      if (!c) return;\n      switch (r) {\n        case \"painting\":\n          return u.target === t.id && u.motivation && u.motivation[0] === \"painting\" && n.includes(c.type) && (u.body = c), !!u;\n        case \"supplementing\":\n          return;\n        default:\n          throw new Error(\"Invalid annotation motivation.\");\n      }\n    }\n  };\n  if (i.canvas = e.get(t), i.canvas && (i.annotationPage = e.get(i.canvas.items[0]), i.accompanyingCanvas = (s = i.canvas) != null && s.accompanyingCanvas ? e.get((l = i.canvas) == null ? void 0 : l.accompanyingCanvas) : void 0), i.annotationPage) {\n    const u = e.get(i.annotationPage.items).map((c) => ({\n      body: e.get(c.body[0].id),\n      motivation: c.motivation,\n      type: \"Annotation\"\n    })), d = [];\n    u.forEach((c) => {\n      c.body.type === \"Choice\" ? c.body.items.forEach(\n        (m) => d.push({\n          ...c,\n          id: m.id,\n          body: e.get(m.id)\n        })\n      ) : d.push(c);\n    }), i.annotations = d.filter(a);\n  }\n  return i;\n}, Ct = (e, t = \"en\") => {\n  if (!e) return \"\";\n  if (!e[t]) {\n    const r = Object.getOwnPropertyNames(e);\n    if (r.length > 0) return e[r[0]];\n  }\n  return e[t];\n}, he = (e, t) => {\n  const r = Ur(\n    e,\n    { id: t, type: \"Canvas\" },\n    \"painting\",\n    [\"Image\", \"Sound\", \"Video\"]\n  );\n  if (r.annotations.length !== 0 && r.annotations && r.annotations)\n    return r.annotations.map(\n      (n) => n == null ? void 0 : n.body\n    );\n}, nt = 209, uo = {\n  colors: {\n    /*\n     * Black and dark grays in a light theme.\n     * Must contrast to 4.5 or greater with `secondary`.\n     */\n    primary: \"#1a1d1e\",\n    primaryMuted: \"#26292b\",\n    primaryAlt: \"#151718\",\n    /*\n     * Key brand color(s).\n     * Must contrast to 4.5 or greater with `secondary`.\n     */\n    accent: `hsl(${nt} 100% 38.2%)`,\n    accentMuted: `hsl(${nt} 80% 61.8%)`,\n    accentAlt: `hsl(${nt} 80% 30%)`,\n    /*\n     * White and light grays in a light theme.\n     * Must contrast to 4.5 or greater with `primary` and  `accent`.\n     */\n    secondary: \"#FFFFFF\",\n    secondaryMuted: \"#e6e8eb\",\n    secondaryAlt: \"#c1c8cd\"\n  },\n  fontSizes: {\n    1: \"12px\",\n    2: \"13px\",\n    3: \"15px\",\n    4: \"17px\",\n    5: \"19px\",\n    6: \"21px\",\n    7: \"27px\",\n    8: \"35px\",\n    9: \"59px\"\n  },\n  lineHeights: {\n    1: \"12px\",\n    2: \"13px\",\n    3: \"15px\",\n    4: \"17px\",\n    5: \"19px\",\n    6: \"21px\",\n    7: \"27px\",\n    8: \"35px\",\n    9: \"59px\"\n  },\n  sizes: {\n    1: \"5px\",\n    2: \"10px\",\n    3: \"15px\",\n    4: \"20px\",\n    5: \"25px\",\n    6: \"35px\",\n    7: \"45px\",\n    8: \"65px\",\n    9: \"80px\"\n  },\n  space: {\n    1: \"5px\",\n    2: \"10px\",\n    3: \"15px\",\n    4: \"20px\",\n    5: \"25px\",\n    6: \"35px\",\n    7: \"45px\",\n    8: \"65px\",\n    9: \"80px\"\n  },\n  radii: {\n    1: \"4px\",\n    2: \"6px\",\n    3: \"8px\",\n    4: \"12px\",\n    round: \"50%\",\n    pill: \"9999px\"\n  },\n  transitions: {\n    all: \"all 200ms cubic-bezier(0.16, 1, 0.3, 1)\"\n  },\n  zIndices: {\n    1: \"100\",\n    2: \"200\",\n    3: \"300\",\n    4: \"400\",\n    max: \"999\"\n  }\n}, qr = {\n  xxs: \"(max-width: 349px)\",\n  xs: \"(max-width: 575px)\",\n  sm: \"(max-width: 767px)\",\n  md: \"(max-width: 991px)\",\n  lg: \"(max-width: 90rem)\",\n  xl: \"(min-width: calc(90rem + 1px))\"\n}, { styled: x, css: Ud, keyframes: jr, createTheme: qd } = Si({\n  theme: uo,\n  media: qr\n}), mo = x(\"div\", {\n  display: \"flex\",\n  flexDirection: \"column\",\n  alignItems: \"center\"\n}), fo = x(\"p\", {\n  fontWeight: \"bold\",\n  fontSize: \"x-large\"\n}), ho = x(\"span\", {\n  fontSize: \"medium\"\n}), At = ({ error: e }) => {\n  const { message: t } = e;\n  return /* @__PURE__ */ o.createElement(mo, { role: \"alert\" }, /* @__PURE__ */ o.createElement(fo, { \"data-testid\": \"headline\" }, \"Something went wrong\"), t && /* @__PURE__ */ o.createElement(ho, null, `Error message: ${t}`, \" \"));\n}, po = x(\"div\", {\n  position: \"relative\",\n  zIndex: \"0\"\n}), Gr = x(\"div\", {\n  display: \"flex\",\n  flexDirection: \"row\",\n  flexGrow: \"1\",\n  overflow: \"hidden\"\n}), Qr = x(\"div\", {\n  display: \"flex\",\n  flexDirection: \"column\",\n  flexGrow: \"1\",\n  flexShrink: \"1\",\n  width: \"100%\",\n  height: \"100%\",\n  \"&[data-aside-active='true']\": {\n    width: \"61.8%\",\n    \"@sm\": {\n      width: \"0\",\n      opacity: \"0\"\n    }\n  },\n  \"&[data-aside-toggle='false']\": {\n    \"@sm\": {\n      width: \"100% !important\",\n      opacity: \"1 !important\"\n    }\n  }\n}), go = x(\"aside\", {\n  display: \"flex\",\n  flexGrow: \"1\",\n  flexShrink: \"0\",\n  width: \"0\",\n  maxHeight: \"100%\",\n  \"&[data-aside-active='true']\": {\n    width: \"38.2%\",\n    \"@sm\": {\n      width: \"100%\"\n    }\n  },\n  \"&[data-aside-toggle='false']\": {\n    \"@sm\": {\n      width: \"0 !important\"\n    }\n  }\n}), vo = x(\"div\", {\n  display: \"flex\",\n  flexDirection: \"column\",\n  fontSmooth: \"auto\",\n  webkitFontSmoothing: \"antialiased\",\n  '&[data-absolute-position=\"true\"]': {\n    position: \"absolute\",\n    width: \"100%\",\n    height: \"100%\",\n    zIndex: \"0\"\n  },\n  \"> div\": {\n    display: \"flex\",\n    flexDirection: \"column\",\n    flexGrow: \"1\",\n    justifyContent: \"flex-start\",\n    height: \"100%\",\n    maxHeight: \"100%\",\n    \"@sm\": {\n      [`& ${Gr}`]: {\n        flexGrow: \"1\"\n      },\n      [`& ${Qr}`]: {\n        flexGrow: \"0\"\n      }\n    }\n  },\n  \"@sm\": {\n    padding: \"0\"\n  },\n  \"&[data-information-panel-open='true']\": {\n    \"@sm\": {}\n  }\n}), yo = x(je.Root, {\n  display: \"flex\",\n  flexDirection: \"column\",\n  width: \"100%\",\n  height: \"100%\",\n  flexGrow: \"1\",\n  flexShrink: \"0\",\n  position: \"relative\",\n  zIndex: \"1\",\n  maskImage: \"linear-gradient(180deg, rgba(0, 0, 0, 1) calc(100% -  2rem), transparent 100%)\",\n  \"@sm\": {\n    marginTop: \"0.5rem\",\n    boxShadow: \"none\"\n  }\n}), bo = x(je.List, {\n  display: \"flex\",\n  flexGrow: \"0\",\n  margin: \"0 1.618rem\",\n  borderBottom: \"5px solid #6663\",\n  \"@sm\": {\n    margin: \"0 1rem\"\n  }\n}), ke = x(je.Trigger, {\n  display: \"flex\",\n  position: \"relative\",\n  padding: \"0.5rem 1.618rem\",\n  background: \"none\",\n  backgroundColor: \"transparent\",\n  fontFamily: \"inherit\",\n  border: \"none\",\n  opacity: \"0.7\",\n  fontSize: \"1rem\",\n  lineHeight: \"1rem\",\n  whiteSpace: \"nowrap\",\n  cursor: \"pointer\",\n  fontWeight: 400,\n  transition: \"$all\",\n  \"&[data-value='manifest-back']\": {\n    display: \"none;\",\n    \"@sm\": {\n      display: \"block\"\n    }\n  },\n  \"&::after\": {\n    width: \"0\",\n    height: \"4px\",\n    content: \"\",\n    position: \"absolute\",\n    bottom: \"-4px\",\n    left: \"0\",\n    transition: \"$all\"\n  },\n  \"&[data-state='active']\": {\n    opacity: \"1\",\n    fontWeight: 700,\n    \"&::after\": {\n      width: \"100%\",\n      backgroundColor: \"$accent\"\n    }\n  }\n}), _e = x(je.Content, {\n  display: \"flex\",\n  flexDirection: \"column\",\n  flexGrow: \"1\",\n  flexShrink: \"0\",\n  position: \"absolute\",\n  top: \"0\",\n  left: \"0\",\n  \"&[data-state='active']\": {\n    width: \"100%\",\n    height: \"calc(100% - 2rem)\",\n    padding: \"1.618rem 0\"\n  }\n}), wo = ({\n  handleScroll: e,\n  children: t,\n  className: r\n}) => /* @__PURE__ */ o.createElement(\"div\", { className: r, onScroll: e }, t), xo = x(wo, {\n  position: \"relative\",\n  height: \"100%\",\n  width: \"100%\",\n  overflowY: \"scroll\"\n}), Jr = {\n  position: \"relative\",\n  display: \"flex\",\n  margin: \"0 1.618rem\",\n  padding: \"0.5rem 0\",\n  fontFamily: \"inherit\",\n  fontSize: \"0.8333rem\",\n  lineHeight: \"1.47rem\",\n  color: \"inherit\",\n  background: \"none\",\n  borderRadius: \"3px\",\n  border: \"none\"\n}, Je = x(\"button\", {\n  textAlign: \"left\",\n  \"&:hover\": {\n    color: \"$accent\"\n  }\n}), It = x(\"div\", {\n  display: \"flex\",\n  flexDirection: \"column\",\n  width: \"100%\",\n  header: {\n    margin: \"0 1.618rem 0.5rem \",\n    fontWeight: 700,\n    fontSize: \"0.8333rem\",\n    em: {\n      fontStyle: \"normal\",\n      fontWeight: 400,\n      opacity: 0.7\n    }\n  },\n  paddingBottom: \"1rem\",\n  marginBottom: \"1rem\",\n  borderBottom: \"1px solid #0001\"\n}), Ye = x(\"div\", {\n  gap: \"1rem\",\n  fontSize: \"1rem\",\n  lineHeight: \"1.47em\",\n  margin: \"0\",\n  \"&[data-content-search=true]\": {\n    em: {\n      fontWeight: 700,\n      display: \"inline\"\n    }\n  }\n}), Eo = x(\"div\", {\n  ...Jr,\n  display: \"flex\",\n  flexDirection: \"row\",\n  gap: \"1rem\",\n  \"&[data-format='text/vtt']\": {\n    marginTop: \"-1rem\",\n    \"> span\": {\n      display: \"none\"\n    }\n  },\n  \"> span\": {\n    display: \"flex\",\n    width: \"2rem\",\n    height: \"2rem\",\n    backgroundColor: \"#0001\",\n    flexShrink: \"0\",\n    borderRadius: \"3px\",\n    marginTop: \"0.25rem\"\n  },\n  [`&[dir=rtl] ${Ye}`]: {\n    textAlign: \"right !important\"\n  }\n}), So = ({\n  value: e,\n  handleClick: t\n}) => /* @__PURE__ */ o.createElement(Je, { onClick: t }, /* @__PURE__ */ o.createElement(Ye, { dangerouslySetInnerHTML: { __html: e } })), Co = ({\n  caption: e,\n  handleClick: t,\n  imageUri: r\n}) => /* @__PURE__ */ o.createElement(Je, { onClick: t }, /* @__PURE__ */ o.createElement(\"img\", { src: r, alt: `A visual annotation for ${e}` }), /* @__PURE__ */ o.createElement(\"span\", null, e)), Ao = ({\n  value: e,\n  handleClick: t\n}) => {\n  const r = Ai(e);\n  return /* @__PURE__ */ o.createElement(Je, { onClick: t }, /* @__PURE__ */ o.createElement(\n    Ye,\n    {\n      dangerouslySetInnerHTML: { __html: r.html }\n    }\n  ));\n}, Nt = ({\n  value: e,\n  handleClick: t,\n  isContentSearch: r\n}) => /* @__PURE__ */ o.createElement(Je, { onClick: t }, /* @__PURE__ */ o.createElement(\n  Ye,\n  {\n    dangerouslySetInnerHTML: { __html: e },\n    \"data-content-search\": r\n  }\n)), Io = () => {\n  function e(u) {\n    return u.map((d) => {\n      const c = d.identifier || Me();\n      return { ...d, identifier: c };\n    });\n  }\n  function t(u) {\n    var p;\n    const d = [], c = [], m = e(u);\n    for (const f of m) {\n      for (; c.length > 0 && c[c.length - 1].end <= f.start; )\n        c.pop();\n      c.length > 0 ? (c[c.length - 1].children || (c[c.length - 1].children = []), (p = c[c.length - 1].children) == null || p.push(f), c.push(f)) : (d.push(f), c.push(f));\n    }\n    return d;\n  }\n  function r(u, d = []) {\n    return d.some(\n      (c) => u.start >= c.start && u.end <= c.end\n    );\n  }\n  function n(u = []) {\n    return u.sort((d, c) => d.start - c.start);\n  }\n  function i(u) {\n    const d = u.replace(\n      /<(c|v|i|b|u|lang|ruby)(?:\\.([^\\s>]+))?(?:\\s([^>]+))?>/g,\n      (c, m, p, f) => {\n        const g = document.createElement(m);\n        return p && (g.className = p.replace(/\\./g, \" \")), (f == null ? void 0 : f.length) > 0 && (g.title = f), g.outerHTML.replace(new RegExp(`</${m}>$`), \"\");\n      }\n    );\n    return console.log(\"normalizeVttTags\", d), d;\n  }\n  function a(u) {\n    var d;\n    for (const c of u.children)\n      a(c);\n    if (u.localName === \"c\" || u.localName === \"v\") {\n      const c = document.createElement(\"span\");\n      for (const m of u.attributes)\n        c.setAttribute(m.name, m.value);\n      c.innerHTML = u.innerHTML, (d = u.parentNode) == null || d.replaceChild(c, u);\n    }\n  }\n  function s(u) {\n    const d = i(u), c = document.createElement(\"div\");\n    return c.innerHTML = d, a(c), c.innerHTML;\n  }\n  function l(u) {\n    return new Promise((d, c) => {\n      const m = Ii.parse(u);\n      m.errors && m.errors.length && c(m.errors), d(\n        m.cues.map((p) => ({\n          identifier: p.identifier || Me(),\n          start: p.start,\n          end: p.end,\n          align: p.align,\n          html: s(p.text),\n          text: p.text || \"\"\n        }))\n      );\n    });\n  }\n  return {\n    addIdentifiersToParsedCues: e,\n    createNestedCues: t,\n    isChild: r,\n    orderCuesByTime: n,\n    parseVttData: l\n  };\n}, To = x(Ge.Root, {\n  display: \"flex\",\n  flexDirection: \"column\",\n  width: \"100%\"\n}), Yr = x(Ge.Item, {\n  ...Jr,\n  justifyContent: \"space-between\",\n  textAlign: \"left\",\n  flexGrow: 1,\n  margin: 0,\n  marginLeft: \"-1rem\",\n  padding: \"0.618rem 1rem\",\n  width: \"calc(100% + 2rem)\",\n  fontSize: \"1rem\",\n  strong: {\n    marginLeft: \"1rem\"\n  },\n  \"&:hover\": {\n    color: \"$accent\"\n  },\n  \"&[aria-checked='true']\": {\n    background: \"#6662\"\n  }\n}), Ro = 750, ko = (e) => {\n  for (; e && e !== document.body; ) {\n    const t = window.getComputedStyle(e).overflowY;\n    if (t !== \"visible\" && t !== \"hidden\" && e.scrollHeight > e.clientHeight)\n      return e;\n    e = e.parentNode;\n  }\n  return null;\n}, $o = ({ html: e, text: t, start: r, end: n }) => {\n  var h, w;\n  const i = X(), {\n    activePlayer: a,\n    configOptions: s,\n    isAutoScrollEnabled: l,\n    isUserScrolling: u\n  } = z(), d = (w = (h = s == null ? void 0 : s.informationPanel) == null ? void 0 : h.vtt) == null ? void 0 : w.autoScroll, [c, m] = L(!1), p = Ue(null), f = a;\n  k(() => (f == null || f.addEventListener(\"timeupdate\", () => {\n    const { currentTime: v } = f;\n    m(r <= v && v < n);\n  }), () => document.removeEventListener(\"timeupdate\", () => {\n  })), [n, r, f]), k(() => {\n    var b;\n    const v = (E) => {\n      i({ type: \"updateAutoScrolling\", isAutoScrolling: !0 }), E(), setTimeout(\n        () => i({ type: \"updateAutoScrolling\", isAutoScrolling: !1 }),\n        Ro\n      );\n    };\n    if (l && c && p.current && !u) {\n      const E = p.current;\n      if (E && E instanceof HTMLElement) {\n        const y = ko(E);\n        if (y && y instanceof HTMLElement) {\n          let A;\n          switch ((b = d == null ? void 0 : d.settings) == null ? void 0 : b.block) {\n            case \"center\":\n              const S = y.getBoundingClientRect();\n              A = E.offsetTop + E.offsetHeight - Math.floor((S.bottom - S.top) / 2);\n              break;\n            case \"end\":\n              A = E.offsetTop + E.offsetHeight - (y.clientHeight - E.clientHeight) + 2;\n              break;\n            default:\n              A = E.offsetTop - 2;\n              break;\n          }\n          v(\n            () => {\n              var S;\n              return y.scrollTo({\n                top: A,\n                left: 0,\n                behavior: (S = d == null ? void 0 : d.settings) == null ? void 0 : S.behavior\n              });\n            }\n          );\n        }\n      }\n    }\n  }, [\n    d,\n    c,\n    u,\n    l,\n    i\n  ]);\n  const g = () => {\n    f && (f.pause(), f.currentTime = r, f.play());\n  };\n  return /* @__PURE__ */ o.createElement(\n    Yr,\n    {\n      ref: p,\n      \"aria-checked\": c,\n      \"data-testid\": \"information-panel-cue\",\n      onClick: g,\n      value: t\n    },\n    /* @__PURE__ */ o.createElement(\n      \"div\",\n      {\n        className: \"webvtt-cue\",\n        dangerouslySetInnerHTML: { __html: e }\n      }\n    ),\n    /* @__PURE__ */ o.createElement(\"strong\", null, _r(r))\n  );\n}, Mo = x(\"ul\", {\n  listStyle: \"none\",\n  paddingLeft: \"1rem\",\n  position: \"relative\",\n  \"&&:first-child\": {\n    paddingLeft: \"0\"\n  },\n  \"& li ul\": {\n    [`& ${Yr}`]: {\n      backgroundColor: \"unset\",\n      \"&::before\": {\n        content: \"none\"\n      },\n      \"&::after\": {\n        content: \"none\"\n      }\n    }\n  },\n  \"&:first-child\": {\n    margin: \"0 0 1.618rem\"\n  }\n}), Zr = ({ items: e }) => /* @__PURE__ */ o.createElement(Mo, null, e.map((t) => {\n  const { html: r, text: n, start: i, end: a, children: s, identifier: l } = t;\n  return /* @__PURE__ */ o.createElement(\"li\", { key: l }, /* @__PURE__ */ o.createElement($o, { html: r, text: n, start: i, end: a }), s && /* @__PURE__ */ o.createElement(Zr, { items: s }));\n})), Oo = ({\n  inlineCues: e,\n  label: t,\n  vttUri: r\n}) => {\n  const [n, i] = o.useState(\n    e || []\n  ), { createNestedCues: a, orderCuesByTime: s, parseVttData: l } = Io(), [u, d] = o.useState();\n  return k(\n    () => {\n      !e && r && fetch(r, {\n        headers: {\n          \"Content-Type\": \"text/plain\",\n          Accept: \"application/json\"\n        }\n      }).then((c) => c.text()).then((c) => {\n        l(c).then((m) => {\n          const p = s(m), f = a(p);\n          i(f);\n        });\n      }).catch((c) => {\n        console.error(r, c.toString()), d(c);\n      });\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [r, e]\n  ), /* @__PURE__ */ o.createElement(\n    To,\n    {\n      \"data-testid\": \"annotation-item-vtt\",\n      \"aria-label\": `${Ct(t)}`\n    },\n    u && /* @__PURE__ */ o.createElement(\"div\", { \"data-testid\": \"error-message\" }, \"Network Error: \", u.toString()),\n    /* @__PURE__ */ o.createElement(Zr, { items: n })\n  );\n}, Lo = (e) => {\n  var n;\n  if (!e) return \"LTR\";\n  const t = [\n    \"ar\",\n    \"fa\",\n    \"ur\",\n    \"ps\",\n    \"dv\",\n    \"sd\",\n    \"ug\",\n    \"ku\",\n    \"he\",\n    \"yi\",\n    \"jrb\",\n    \"jpr\",\n    \"nqo\"\n  ], r = Array.isArray(e) ? (n = e[0]) == null ? void 0 : n.split(\"-\")[0] : e == null ? void 0 : e.split(\"-\")[0];\n  return t.includes(r) ? \"RTL\" : \"LTR\";\n}, Po = (e) => {\n  var r, n, i, a, s;\n  let t = {\n    id: typeof e == \"string\" ? e : e.source\n  };\n  if (typeof e == \"string\") {\n    if (e.includes(\"#xywh=\")) {\n      const l = e.split(\"#xywh=\");\n      if (l && l[1]) {\n        const [u, d, c, m] = l[1].split(\",\").map((p) => Number(p));\n        t = {\n          id: l[0],\n          rect: {\n            x: u,\n            y: d,\n            w: c,\n            h: m\n          }\n        };\n      }\n    } else if (e.includes(\"#t=\")) {\n      const l = e.split(\"#t=\");\n      l && l[1] && (t = {\n        id: l[0],\n        t: l[1]\n      });\n    }\n  } else if (typeof e == \"object\") {\n    if (((r = e.selector) == null ? void 0 : r.type) === \"PointSelector\")\n      t = {\n        id: e.source,\n        point: {\n          x: e.selector.x,\n          y: e.selector.y\n        }\n      };\n    else if (((n = e.selector) == null ? void 0 : n.type) === \"SvgSelector\")\n      t = {\n        id: e.source,\n        svg: e.selector.value\n      };\n    else if (((i = e.selector) == null ? void 0 : i.type) === \"FragmentSelector\" && (a = e.selector) != null && a.value.includes(\"xywh=\") && e.source.type == \"Canvas\" && e.source.id) {\n      const l = (s = e.selector) == null ? void 0 : s.value.split(\"xywh=\");\n      if (l && l[1]) {\n        const [u, d, c, m] = l[1].split(\",\").map((p) => Number(p));\n        t = {\n          id: e.source.id,\n          rect: {\n            x: u,\n            y: d,\n            w: c,\n            h: m\n          }\n        };\n      }\n    }\n  }\n  return t;\n}, Tt = ({\n  annotation: e,\n  targetResource: t,\n  isContentSearch: r,\n  isContentState: n\n}) => {\n  var J, F, Y, K, G, se, ve;\n  const { target: i } = e, a = (J = i == null ? void 0 : i.selector) == null ? void 0 : J.type, s = ((Y = (F = i == null ? void 0 : i.selector) == null ? void 0 : F.value) == null ? void 0 : Y.split(\"=\")[1]) || \"full\", [l, u] = s !== \"full\" ? s == null ? void 0 : s.split(\",\").slice(2) : [100, 100], c = `${t}/${s}/!${((_, U) => {\n    const P = Math.max(_, U), $ = Math.round(_ / P * 100), V = Math.round(U / P * 100);\n    return [$, V].join(\",\");\n  })(l, u)}/0/default.jpg`, m = z(), p = X(), { openSeadragonViewer: f, vault: g, visibleCanvases: h } = m, w = e != null && e.body ? (K = e == null ? void 0 : e.body) == null ? void 0 : K.map((_) => g.get(_.id)) : [], {\n    format: v = a === \"PointSelector\" ? \"text/vtt\" : \"text/plain\",\n    language: b = \"none\",\n    value: E = \"\",\n    // @ts-ignore\n    chars: y = \"\"\n  } = w[0] ? w[0] : {}, A = a === \"PointSelector\" ? \"text/vtt\" : v, S = ((G = w[0]) == null ? void 0 : G.label) || { none: [\"t\"] }, C = E || y || \"None\", M = b ? Lo(b).toLocaleLowerCase() : \"LTR\", R = (\n    // @ts-ignore\n    a === \"PointSelector\" && ((se = i == null ? void 0 : i.selector) != null && se.t) ? [\n      {\n        // @ts-ignore\n        start: (ve = i == null ? void 0 : i.selector) == null ? void 0 : ve.t,\n        end: 0,\n        html: C,\n        text: C,\n        styles: \"\",\n        children: []\n      }\n    ] : void 0\n  );\n  function I() {\n    var U;\n    const _ = f == null ? void 0 : f.getOverlayById(e.id);\n    if (_ && (f != null && f.viewport)) {\n      _ != null && _.element && ((U = _.element) == null || U.focus());\n      const B = _ == null ? void 0 : _.getBounds(f.viewport);\n      B.x -= 0.2, B.y -= 0.2, B.width += 0.5, B.height += 0.5, f.viewport.fitBounds(B, !1);\n    }\n  }\n  k(() => {\n    if (!f || !n) return;\n    const _ = setInterval(() => {\n      (f == null ? void 0 : f.getOverlayById(e.id)) && (I(), f.container.className = \"clover-iiif-content-state\", clearInterval(_));\n    }, 1e3);\n    return () => clearInterval(_);\n  }, [f, n]);\n  function O(_) {\n    var $;\n    _.preventDefault(), _.stopPropagation();\n    const U = (($ = e == null ? void 0 : e.target) == null ? void 0 : $.source) || (e == null ? void 0 : e.target), B = U == null ? void 0 : U.id;\n    h.map((V) => V.id).includes(B) ? I() : p({\n      type: \"updateActiveCanvas\",\n      canvasId: B\n    });\n  }\n  function W() {\n    var _, U, B;\n    switch (A) {\n      case \"text/plain\":\n        return /* @__PURE__ */ o.createElement(\n          Nt,\n          {\n            value: C,\n            handleClick: O,\n            isContentSearch: r\n          }\n        );\n      case \"text/html\":\n        return /* @__PURE__ */ o.createElement(So, { value: C, handleClick: O });\n      case \"text/markdown\":\n        return /* @__PURE__ */ o.createElement(Ao, { value: C, handleClick: O });\n      case \"text/vtt\":\n        return /* @__PURE__ */ o.createElement(\n          Oo,\n          {\n            inlineCues: R,\n            label: S,\n            vttUri: ((_ = w[0]) == null ? void 0 : _.id) || void 0\n          }\n        );\n      case ((U = v == null ? void 0 : v.match(/^image\\//)) == null ? void 0 : U.input):\n        const P = ((B = w.find(($) => {\n          var V;\n          return !((V = $.id) != null && V.includes(\"vault://\"));\n        })) == null ? void 0 : B.id) || \"\";\n        return /* @__PURE__ */ o.createElement(\n          Co,\n          {\n            caption: E,\n            handleClick: O,\n            imageUri: P\n          }\n        );\n      default:\n        return /* @__PURE__ */ o.createElement(Nt, { value: C, handleClick: O });\n    }\n  }\n  if (v)\n    return /* @__PURE__ */ o.createElement(\n      Eo,\n      {\n        dir: M,\n        \"data-format\": v,\n        \"data-content\": C,\n        className: \"clover-iiif-annotation-item\"\n      },\n      /* @__PURE__ */ o.createElement(\n        \"span\",\n        {\n          style: {\n            backgroundImage: `url(${c})`,\n            backgroundSize: \"cover\",\n            backgroundPosition: \"center\"\n          }\n        }\n      ),\n      W()\n    );\n}, Xr = (e, t = \"none\") => {\n  if (!e) return null;\n  if (typeof e == \"string\") return [e];\n  if (!e[t]) {\n    const r = Object.getOwnPropertyNames(e);\n    if (r.length > 0) return e[r[0]];\n  }\n  return !e[t] || !Array.isArray(e[t]) ? null : e[t];\n}, ee = (e, t = \"none\", r = \", \") => {\n  const n = Xr(e, t);\n  return Array.isArray(n) ? n.join(`${r}`) : n;\n};\nfunction Fo(e) {\n  return { __html: _o(e) };\n}\nfunction ae(e, t) {\n  const r = Object.keys(e).filter(\n    (i) => t.includes(i) ? null : i\n  ), n = new Object();\n  return r.forEach((i) => {\n    n[i] = e[i];\n  }), n;\n}\nfunction _o(e) {\n  return Ti(e, {\n    allowedAttributes: {\n      a: [\"href\"],\n      img: [\"alt\", \"src\", \"height\", \"width\"]\n    },\n    allowedSchemes: [\"http\", \"https\", \"mailto\"],\n    allowedTags: [\n      \"a\",\n      \"b\",\n      \"br\",\n      \"i\",\n      \"img\",\n      \"p\",\n      \"small\",\n      \"span\",\n      \"sub\",\n      \"sup\"\n    ]\n  });\n}\nconst zo = x(\"span\", {}), ue = (e) => {\n  const { as: t, label: r } = e, i = ae(e, [\"as\", \"label\"]);\n  return /* @__PURE__ */ o.createElement(zo, { as: t, ...i }, ee(r, i.lang));\n}, Do = (e, t = \"200,\", r = \"full\") => {\n  Array.isArray(e) && (e = e[0]);\n  const { id: n, service: i } = e;\n  let a;\n  if (!i) return n;\n  if (Array.isArray(e.service) && e.service.length > 0 && (a = i[0]), a) {\n    if (a[\"@id\"])\n      return `${a[\"@id\"]}/${r}/${t}/0/default.jpg`;\n    if (a.id)\n      return `${a.id}/${r}/${t}/0/default.jpg`;\n  }\n}, Wt = x(\"img\", { objectFit: \"cover\" }), Bo = (e) => {\n  const t = Ue(null), { contentResource: r, altAsLabel: n, region: i = \"full\" } = e;\n  let a;\n  n && (a = ee(n));\n  const l = ae(e, [\"contentResource\", \"altAsLabel\"]), { type: u, id: d, width: c = 200, height: m = 200, duration: p } = r;\n  k(() => {\n    if (!d && !t.current || [\"Image\"].includes(u) || !d.includes(\"m3u8\")) return;\n    const h = new ne();\n    return t.current && (h.attachMedia(t.current), h.on(ne.Events.MEDIA_ATTACHED, function() {\n      h.loadSource(d);\n    })), h.on(ne.Events.ERROR, function(w, v) {\n      if (v.fatal)\n        switch (v.type) {\n          case ne.ErrorTypes.NETWORK_ERROR:\n            console.error(\n              `fatal ${w} network error encountered, try to recover`\n            ), h.startLoad();\n            break;\n          case ne.ErrorTypes.MEDIA_ERROR:\n            console.error(\n              `fatal ${w} media error encountered, try to recover`\n            ), h.recoverMediaError();\n            break;\n          default:\n            h.destroy();\n            break;\n        }\n    }), () => {\n      h && (h.detachMedia(), h.destroy());\n    };\n  }, [d, u]);\n  const f = qe(() => {\n    if (!t.current) return;\n    let h = 0, w = 30;\n    if (p && (w = p), !d.split(\"#t=\") && p && (h = p * 0.1), d.split(\"#t=\").pop()) {\n      const b = d.split(\"#t=\").pop();\n      b && (h = parseInt(b.split(\",\")[0]));\n    }\n    const v = t.current;\n    v.autoplay = !0, v.currentTime = h, setTimeout(() => f(), w * 1e3);\n  }, [p, d]);\n  k(() => f(), [f]);\n  const g = Do(\n    r,\n    `${c},${m}`,\n    i\n  );\n  switch (u) {\n    case \"Image\":\n      return /* @__PURE__ */ o.createElement(\n        Wt,\n        {\n          as: \"img\",\n          alt: a,\n          css: { width: c, height: m },\n          key: d,\n          src: g,\n          ...l\n        }\n      );\n    case \"Video\":\n      return /* @__PURE__ */ o.createElement(\n        Wt,\n        {\n          as: \"video\",\n          css: { width: c, height: m },\n          disablePictureInPicture: !0,\n          key: d,\n          loop: !0,\n          muted: !0,\n          onPause: f,\n          ref: t,\n          src: d\n        }\n      );\n    default:\n      return console.warn(\n        `Resource type: ${u} is not valid or not yet supported in Primitives.`\n      ), /* @__PURE__ */ o.createElement(o.Fragment, null);\n  }\n}, Ho = x(\"a\", {}), No = (e) => {\n  const { children: t, homepage: r } = e, i = ae(e, [\"children\", \"homepage\"]);\n  return /* @__PURE__ */ o.createElement(o.Fragment, null, r && r.map((a) => {\n    const s = ee(\n      a.label,\n      i.lang\n    );\n    return /* @__PURE__ */ o.createElement(\n      Ho,\n      {\n        \"aria-label\": t ? s : void 0,\n        href: a.id,\n        key: a.id,\n        ...i\n      },\n      t || s\n    );\n  }));\n}, Wo = {\n  delimiter: \", \"\n}, Rt = ci(void 0), Kr = () => {\n  const e = ui(Rt);\n  if (e === void 0)\n    throw new Error(\n      \"usePrimitivesContext must be used with a PrimitivesProvider\"\n    );\n  return e;\n}, kt = ({\n  children: e,\n  initialState: t = Wo\n}) => {\n  const r = Vo(t, \"delimiter\");\n  return /* @__PURE__ */ o.createElement(Rt.Provider, { value: { delimiter: r } }, e);\n}, Vo = (e, t) => Object.hasOwn(e, t) ? e[t].toString() : void 0, Uo = x(\"span\", {}), Vt = (e) => {\n  const { as: t, markup: r } = e, { delimiter: n } = Kr();\n  if (!r) return /* @__PURE__ */ o.createElement(o.Fragment, null);\n  const a = ae(e, [\"as\", \"markup\"]), s = Fo(\n    ee(r, a.lang, n)\n  );\n  return /* @__PURE__ */ o.createElement(Uo, { as: t, ...a, dangerouslySetInnerHTML: s });\n}, en = (e) => o.useContext(Rt) ? /* @__PURE__ */ o.createElement(Vt, { ...e }) : /* @__PURE__ */ o.createElement(kt, null, /* @__PURE__ */ o.createElement(Vt, { ...e })), qo = ({ as: e = \"dd\", lang: t, value: r }) => /* @__PURE__ */ o.createElement(en, { markup: r, as: e, lang: t }), jo = x(\"span\", {}), Go = ({\n  as: e = \"dd\",\n  customValueContent: t,\n  lang: r,\n  value: n\n}) => {\n  var s;\n  const { delimiter: i } = Kr(), a = (s = Xr(n, r)) == null ? void 0 : s.map((l) => di(t, {\n    value: l\n  }));\n  return /* @__PURE__ */ o.createElement(jo, { as: e, lang: r }, a == null ? void 0 : a.map((l, u) => [\n    u > 0 && `${i}`,\n    /* @__PURE__ */ o.createElement(mi, { key: u }, l)\n  ]));\n}, tn = (e) => {\n  var l;\n  const { item: t, lang: r, customValueContent: n } = e, { label: i, value: a } = t, s = (l = ee(i)) == null ? void 0 : l.replace(\" \", \"-\").toLowerCase();\n  return /* @__PURE__ */ o.createElement(\"div\", { role: \"group\", \"data-label\": s }, /* @__PURE__ */ o.createElement(ue, { as: \"dt\", label: i, lang: r }), n ? /* @__PURE__ */ o.createElement(\n    Go,\n    {\n      as: \"dd\",\n      customValueContent: n,\n      value: a,\n      lang: r\n    }\n  ) : /* @__PURE__ */ o.createElement(qo, { as: \"dd\", value: a, lang: r }));\n};\nfunction Qo(e, t) {\n  const r = t.filter((n) => {\n    const { matchingLabel: i } = n, a = Object.keys(n.matchingLabel)[0], s = ee(i, a);\n    if (ee(e, a) === s) return !0;\n  }).map((n) => n.Content);\n  if (Array.isArray(r))\n    return r[0];\n}\nconst Jo = x(\"dl\", {}), Yo = (e) => {\n  const { as: t, customValueContent: r, metadata: n } = e;\n  if (!Array.isArray(n)) return /* @__PURE__ */ o.createElement(o.Fragment, null);\n  const i = Br(e, \"customValueDelimiter\"), s = ae(e, [\n    \"as\",\n    \"customValueContent\",\n    \"customValueDelimiter\",\n    \"metadata\"\n  ]);\n  return /* @__PURE__ */ o.createElement(\n    kt,\n    {\n      ...typeof i == \"string\" ? { initialState: { delimiter: i } } : void 0\n    },\n    n.length > 0 && /* @__PURE__ */ o.createElement(Jo, { as: t, ...s }, n.map((l, u) => {\n      const d = r ? Qo(l.label, r) : void 0;\n      return /* @__PURE__ */ o.createElement(\n        tn,\n        {\n          customValueContent: d,\n          item: l,\n          key: u,\n          lang: s == null ? void 0 : s.lang\n        }\n      );\n    }))\n  );\n};\nx(\"li\", {});\nx(\"ul\", {});\nconst Zo = x(\"li\", {}), Xo = x(\"ul\", {}), Ko = (e) => {\n  const { as: t, rendering: r } = e, i = ae(e, [\"as\", \"rendering\"]);\n  return /* @__PURE__ */ o.createElement(Xo, { as: t }, r && r.map((a) => {\n    const s = ee(\n      a.label,\n      i.lang\n    );\n    return /* @__PURE__ */ o.createElement(Zo, { key: a.id }, /* @__PURE__ */ o.createElement(\"a\", { href: a.id, ...i, target: \"_blank\" }, s || a.id));\n  }));\n}, es = x(\"dl\", {}), ts = (e) => {\n  const { as: t, requiredStatement: r } = e;\n  if (!r) return /* @__PURE__ */ o.createElement(o.Fragment, null);\n  const n = Br(e, \"customValueDelimiter\"), a = ae(e, [\"as\", \"customValueDelimiter\", \"requiredStatement\"]);\n  return /* @__PURE__ */ o.createElement(\n    kt,\n    {\n      ...typeof n == \"string\" ? { initialState: { delimiter: n } } : void 0\n    },\n    /* @__PURE__ */ o.createElement(es, { as: t, ...a }, /* @__PURE__ */ o.createElement(tn, { item: r, lang: a.lang }))\n  );\n}, rs = x(\"li\", {}), ns = x(\"ul\", {}), is = (e) => {\n  const { as: t, seeAlso: r } = e, i = ae(e, [\"as\", \"seeAlso\"]);\n  return /* @__PURE__ */ o.createElement(ns, { as: t }, r && r.map((a) => {\n    const s = ee(\n      a.label,\n      i.lang\n    );\n    return /* @__PURE__ */ o.createElement(rs, { key: a.id }, /* @__PURE__ */ o.createElement(\"a\", { href: a.id, ...i }, s || a.id));\n  }));\n}, as = (e) => {\n  const { as: t, summary: r } = e, i = ae(e, [\"as\", \"customValueDelimiter\", \"summary\"]);\n  return /* @__PURE__ */ o.createElement(en, { as: t, markup: r, ...i });\n}, rn = (e) => {\n  const { thumbnail: t, region: r } = e, i = ae(e, [\"thumbnail\"]);\n  return /* @__PURE__ */ o.createElement(o.Fragment, null, t && t.map((a) => /* @__PURE__ */ o.createElement(\n    Bo,\n    {\n      contentResource: a,\n      key: a.id,\n      region: r,\n      ...i\n    }\n  )));\n}, os = ({ annotationPage: e }) => {\n  var u, d, c, m, p, f;\n  const t = z(), { vault: r } = t;\n  if (!e || !e.items || ((u = e.items) == null ? void 0 : u.length) === 0)\n    return /* @__PURE__ */ o.createElement(o.Fragment, null);\n  const n = e.items.map((g) => r.get(g.id));\n  if (!n) return /* @__PURE__ */ o.createElement(o.Fragment, null);\n  const i = n.reduce((g, h) => (g.canvas = h.target.source.id, g.annotations = [], g.annotations.push(h == null ? void 0 : h.id), g), {}), a = r.get(i.canvas), s = he(r, a.id), l = (d = s == null ? void 0 : s[0]) != null && d.service ? ((m = (c = s == null ? void 0 : s[0]) == null ? void 0 : c.service[0]) == null ? void 0 : m.id) || ((f = (p = s == null ? void 0 : s[0]) == null ? void 0 : p.service[0]) == null ? void 0 : f[\"@id\"]) : void 0;\n  return /* @__PURE__ */ o.createElement(It, { \"data-testid\": \"annotation-page\" }, a && /* @__PURE__ */ o.createElement(\"header\", null, /* @__PURE__ */ o.createElement(ue, { label: a.label })), /* @__PURE__ */ o.createElement(\"div\", { \"data-testid\": \"annotation-page-items\" }, n == null ? void 0 : n.map((g) => /* @__PURE__ */ o.createElement(\n    Tt,\n    {\n      annotation: g,\n      targetResource: l,\n      key: g.id\n    }\n  ))));\n}, ss = x(\"div\", {\n  form: {\n    display: \"flex\",\n    alignItems: \"center\",\n    width: \"100%\",\n    height: \"100%\",\n    gap: \"1rem\",\n    padding: \"0 1.618rem 1.618rem\",\n    \".content-search-input\": {\n      flexGrow: \"1\",\n      input: {\n        width: \"100%\",\n        border: \"none\",\n        backgroundColor: \"$secondaryMuted\",\n        color: \"$primary\",\n        marginRight: \"1rem\",\n        height: \"2rem\",\n        padding: \"0 1rem\",\n        borderRadius: \"1rem\",\n        fontFamily: \"inherit\",\n        fontSize: \"1rem\",\n        lineHeight: \"1rem\",\n        boxShadow: \"inset 1px 1px 2px #0001\",\n        \"&::placeholder\": {\n          color: \"#0006\"\n        }\n      }\n    }\n  }\n}), ls = x(\"button\", {\n  display: \"flex\",\n  background: \"none\",\n  border: \"none\",\n  width: \"2rem\",\n  height: \"2rem\",\n  padding: \"0\",\n  margin: \"0\",\n  fontWeight: \"700\",\n  borderRadius: \"2rem\",\n  backgroundColor: \"$accent\",\n  color: \"$secondary\",\n  cursor: \"pointer\",\n  boxSizing: \"content-box\",\n  transition: \"$all\",\n  svg: {\n    height: \"60%\",\n    width: \"60%\",\n    padding: \"20%\",\n    fill: \"$secondary\",\n    stroke: \"$secondary\",\n    opacity: \"1\",\n    filter: \"drop-shadow(5px 5px 5px #000D)\",\n    boxSizing: \"inherit\",\n    transition: \"$all\"\n  },\n  \"&:disabled\": {\n    backgroundColor: \"transparent\",\n    boxShadow: \"none\",\n    svg: { opacity: \"0.25\" }\n  }\n}), cs = ({\n  searchServiceUrl: e,\n  setContentSearchResource: t,\n  setLoading: r\n}) => {\n  const { t: n } = pe(), [i, a] = L(), s = z(), { openSeadragonViewer: l, vault: u } = s;\n  async function d(p) {\n    if (p.preventDefault(), !!l && e) {\n      if (!i || i.trim() === \"\") {\n        t({});\n        return;\n      }\n      r(!0), Vr(u, e, {\n        q: i\n      }).then((f) => {\n        t(f), r(!1);\n      });\n    }\n  }\n  const c = (p) => {\n    p.preventDefault(), a(p.target.value);\n  }, m = n(\"contentSearchPlaceholder\");\n  return /* @__PURE__ */ o.createElement(ss, null, /* @__PURE__ */ o.createElement(Pe.Root, { onSubmit: d, className: \"content-search-form\" }, /* @__PURE__ */ o.createElement(\n    Pe.Field,\n    {\n      className: \"content-search-input\",\n      name: \"searchTerms\",\n      onChange: c\n    },\n    /* @__PURE__ */ o.createElement(Pe.Control, { placeholder: m })\n  ), /* @__PURE__ */ o.createElement(Pe.Submit, { asChild: !0 }, /* @__PURE__ */ o.createElement(ls, { type: \"submit\" }, /* @__PURE__ */ o.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", viewBox: \"0 0 512 512\" }, /* @__PURE__ */ o.createElement(\"title\", null, n(\"informationPanelTabsSearch\")), /* @__PURE__ */ o.createElement(\"path\", { d: \"M456.69 421.39L362.6 327.3a173.81 173.81 0 0034.84-104.58C397.44 126.38 319.06 48 222.72 48S48 126.38 48 222.72s78.38 174.72 174.72 174.72A173.81 173.81 0 00327.3 362.6l94.09 94.09a25 25 0 0035.3-35.3zM97.92 222.72a124.8 124.8 0 11124.8 124.8 124.95 124.95 0 01-124.8-124.8z\" }))))));\n}, us = ({\n  searchServiceUrl: e,\n  setContentSearchResource: t,\n  activeCanvas: r,\n  annotationPage: n\n}) => {\n  const i = z(), { vault: a } = i, { t: s } = pe(), [l, u] = L(!1), [d, c] = L({});\n  k(() => {\n    var g;\n    if (!(n != null && n.items)) return;\n    const f = ((g = n == null ? void 0 : n.items) == null ? void 0 : g.map((h) => a.get(h.id))).reduce((h, w) => {\n      const v = w.target.source.id;\n      return h[v] || (h[v] = []), h[v].push(w.id), h;\n    }, {});\n    c(f);\n  }, [n]);\n  let m;\n  return /* @__PURE__ */ o.createElement(o.Fragment, null, /* @__PURE__ */ o.createElement(\n    cs,\n    {\n      searchServiceUrl: e,\n      setContentSearchResource: t,\n      activeCanvas: r,\n      setLoading: u\n    }\n  ), l ? /* @__PURE__ */ o.createElement(\"span\", null, s(\"contentSearchLoading\")) : d && Object.keys(d).length > 0 && Object.keys(d).map((p) => (m = a.get(p), /* @__PURE__ */ o.createElement(It, { key: p, \"data-testid\": \"annotation-page\" }, m && /* @__PURE__ */ o.createElement(\"header\", null, /* @__PURE__ */ o.createElement(ue, { label: m.label })), d[p].map((f) => {\n    var v, b, E, y, A;\n    const g = a.get(\n      f\n    ), h = he(a, m.id), w = (v = h == null ? void 0 : h[0]) != null && v.service ? ((E = (b = h == null ? void 0 : h[0]) == null ? void 0 : b.service[0]) == null ? void 0 : E.id) || ((A = (y = h == null ? void 0 : h[0]) == null ? void 0 : y.service[0]) == null ? void 0 : A[\"@id\"]) : void 0;\n    return /* @__PURE__ */ o.createElement(\n      Tt,\n      {\n        annotation: g,\n        targetResource: w,\n        key: g.id,\n        isContentSearch: !0\n      }\n    );\n  })))));\n}, ds = x(\"div\", {\n  width: \"100%\",\n  padding: \" 0 1.618rem 2rem\",\n  display: \"flex\",\n  flexDirection: \"column\",\n  overflow: \"auto\",\n  position: \"absolute\",\n  fontWeight: \"400\",\n  fontSize: \"1rem\",\n  zIndex: \"0\",\n  img: {\n    maxWidth: \"100px\",\n    maxHeight: \"100px\",\n    objectFit: \"contain\",\n    color: \"transparent\",\n    margin: \"0 0 1rem\",\n    borderRadius: \"3px\",\n    backgroundColor: \"$secondaryMuted\"\n  },\n  video: {\n    display: \"none\"\n  },\n  \"a, a:visited\": {\n    color: \"$accent\"\n  },\n  p: {\n    fontSize: \"1rem\",\n    lineHeight: \"1.47em\",\n    margin: \"0\"\n  },\n  dl: {\n    margin: \"0\",\n    dt: {\n      fontWeight: \"700\",\n      margin: \"1rem 0 0.25rem\"\n    },\n    dd: {\n      margin: \"0\"\n    }\n  },\n  \".manifest-property-title\": {\n    fontWeight: \"700\",\n    margin: \"1rem 0 0.25rem\"\n  },\n  \"ul, ol\": {\n    padding: \"0\",\n    margin: \"0\",\n    li: {\n      fontSize: \"1rem\",\n      lineHeight: \"1.45em\",\n      listStyle: \"none\",\n      margin: \"0.25rem 0 0.25rem\"\n    }\n  }\n}), ms = x(\"div\", {\n  position: \"relative\",\n  width: \"100%\",\n  height: \"100%\",\n  zIndex: \"0\"\n}), fs = ({\n  homepage: e\n}) => (e == null ? void 0 : e.length) === 0 ? /* @__PURE__ */ o.createElement(o.Fragment, null) : /* @__PURE__ */ o.createElement(o.Fragment, null, /* @__PURE__ */ o.createElement(\"span\", { className: \"manifest-property-title\" }, \"Homepage\"), /* @__PURE__ */ o.createElement(No, { homepage: e })), hs = ({\n  id: e,\n  htmlLabel: t,\n  parent: r = \"manifest\"\n}) => /* @__PURE__ */ o.createElement(o.Fragment, null, /* @__PURE__ */ o.createElement(\"span\", { className: \"manifest-property-title\" }, t), /* @__PURE__ */ o.createElement(\"a\", { href: e, target: \"_blank\", id: `iiif-${r}-id` }, e)), ps = ({\n  metadata: e,\n  parent: t = \"manifest\"\n}) => e ? /* @__PURE__ */ o.createElement(o.Fragment, null, /* @__PURE__ */ o.createElement(Yo, { metadata: e, id: `iiif-${t}-metadata` })) : /* @__PURE__ */ o.createElement(o.Fragment, null), gs = ({\n  rendering: e\n}) => (e == null ? void 0 : e.length) === 0 ? /* @__PURE__ */ o.createElement(o.Fragment, null) : /* @__PURE__ */ o.createElement(o.Fragment, null, /* @__PURE__ */ o.createElement(\"span\", { className: \"manifest-property-title\" }, \"Alternate formats\"), /* @__PURE__ */ o.createElement(Ko, { rendering: e })), vs = ({\n  requiredStatement: e,\n  parent: t = \"manifest\"\n}) => e ? /* @__PURE__ */ o.createElement(o.Fragment, null, /* @__PURE__ */ o.createElement(\n  ts,\n  {\n    requiredStatement: e,\n    id: `iiif-${t}-required-statement`\n  }\n)) : /* @__PURE__ */ o.createElement(o.Fragment, null), ys = ({ rights: e }) => e ? /* @__PURE__ */ o.createElement(o.Fragment, null, /* @__PURE__ */ o.createElement(\"span\", { className: \"manifest-property-title\" }, \"Rights\"), /* @__PURE__ */ o.createElement(\"a\", { href: e, target: \"_blank\" }, e)) : /* @__PURE__ */ o.createElement(o.Fragment, null), bs = ({ seeAlso: e }) => (e == null ? void 0 : e.length) === 0 ? /* @__PURE__ */ o.createElement(o.Fragment, null) : /* @__PURE__ */ o.createElement(o.Fragment, null, /* @__PURE__ */ o.createElement(\"span\", { className: \"manifest-property-title\" }, \"See Also\"), /* @__PURE__ */ o.createElement(is, { seeAlso: e })), ws = ({\n  summary: e,\n  parent: t = \"manifest\"\n}) => e ? /* @__PURE__ */ o.createElement(o.Fragment, null, /* @__PURE__ */ o.createElement(as, { summary: e, as: \"p\", id: `iiif-${t}-summary` })) : /* @__PURE__ */ o.createElement(o.Fragment, null), xs = ({\n  label: e,\n  thumbnail: t\n}) => (t == null ? void 0 : t.length) === 0 ? /* @__PURE__ */ o.createElement(o.Fragment, null) : /* @__PURE__ */ o.createElement(o.Fragment, null, /* @__PURE__ */ o.createElement(\n  rn,\n  {\n    altAsLabel: e || { none: [\"resource\"] },\n    thumbnail: t,\n    style: { backgroundColor: \"#6663\", objectFit: \"cover\" }\n  }\n)), Es = () => {\n  const e = z(), { activeManifest: t, vault: r } = e, [n, i] = L(), [a, s] = L([]), [l, u] = L([]), [d, c] = L(\n    []\n  ), [m, p] = L([]);\n  return k(() => {\n    var g, h, w, v;\n    const f = r.get(t);\n    f && (i(f), ((g = f.homepage) == null ? void 0 : g.length) > 0 && s(\n      r.get(\n        f.homepage\n      )\n    ), ((h = f.seeAlso) == null ? void 0 : h.length) > 0 && u(\n      r.get(\n        f.seeAlso\n      )\n    ), ((w = f.rendering) == null ? void 0 : w.length) > 0 && c(\n      r.get(\n        f.rendering\n      )\n    ), ((v = f.thumbnail) == null ? void 0 : v.length) > 0 && p(\n      r.get(\n        f.thumbnail\n      )\n    ));\n  }, [t, r]), n ? /* @__PURE__ */ o.createElement(ms, null, /* @__PURE__ */ o.createElement(ds, null, /* @__PURE__ */ o.createElement(xs, { thumbnail: m, label: n.label }), /* @__PURE__ */ o.createElement(ws, { summary: n.summary }), /* @__PURE__ */ o.createElement(ps, { metadata: n.metadata }), /* @__PURE__ */ o.createElement(vs, { requiredStatement: n.requiredStatement }), /* @__PURE__ */ o.createElement(ys, { rights: n.rights }), /* @__PURE__ */ o.createElement(fs, { homepage: a }), /* @__PURE__ */ o.createElement(bs, { seeAlso: l }), /* @__PURE__ */ o.createElement(gs, { rendering: d }), /* @__PURE__ */ o.createElement(hs, { id: n.id, htmlLabel: \"IIIF Manifest\" }))) : /* @__PURE__ */ o.createElement(o.Fragment, null);\n};\nfunction Ss(e) {\n  const t = [];\n  return e.forEach((r) => {\n    var n;\n    (n = r.informationPanel) != null && n.component && t.push(r);\n  }), { pluginsWithInfoPanel: t };\n}\nconst Cs = ({\n  contentStateAnnotation: e\n}) => {\n  var l, u, d, c, m, p;\n  const t = z(), { vault: r } = t;\n  if (!e) return /* @__PURE__ */ o.createElement(o.Fragment, null);\n  const n = (\n    // @ts-ignore\n    ((l = e == null ? void 0 : e.target) == null ? void 0 : l.source) || (e == null ? void 0 : e.target)\n  ), i = r.get(n == null ? void 0 : n.id), a = he(r, i.id), s = (u = a == null ? void 0 : a[0]) != null && u.service ? ((c = (d = a == null ? void 0 : a[0]) == null ? void 0 : d.service[0]) == null ? void 0 : c.id) || ((p = (m = a == null ? void 0 : a[0]) == null ? void 0 : m.service[0]) == null ? void 0 : p[\"@id\"]) : void 0;\n  return /* @__PURE__ */ o.createElement(It, { \"data-testid\": \"annotation-page\" }, i && /* @__PURE__ */ o.createElement(\"header\", null, /* @__PURE__ */ o.createElement(ue, { label: i.label }), \" \", /* @__PURE__ */ o.createElement(\"em\", null, \"(Shared)\")), /* @__PURE__ */ o.createElement(\"div\", { \"data-testid\": \"annotation-page-items\" }, /* @__PURE__ */ o.createElement(\n    Tt,\n    {\n      annotation: e,\n      targetResource: s,\n      key: e.id,\n      isContentState: !0\n    }\n  )));\n}, As = 1500, Is = ({\n  activeCanvas: e,\n  annotationResources: t,\n  searchServiceUrl: r,\n  setContentSearchResource: n,\n  contentSearchResource: i\n}) => {\n  var J;\n  const { t: a } = pe(), s = X(), l = z(), {\n    contentStateAnnotation: u,\n    informationPanelResource: d,\n    isAutoScrolling: c,\n    isUserScrolling: m,\n    vault: p,\n    configOptions: f,\n    plugins: g\n  } = l, { informationPanel: h } = f, w = h == null ? void 0 : h.renderAbout, v = h == null ? void 0 : h.renderAnnotation, b = p.get({\n    id: e,\n    type: \"Canvas\"\n  }), E = h == null ? void 0 : h.renderContentSearch, y = h == null ? void 0 : h.renderToggle, A = (\n    // @ts-ignore\n    ((J = u == null ? void 0 : u.target) == null ? void 0 : J.source) || (u == null ? void 0 : u.target)\n  ), S = !!u && // @ts-ignore\n  A.id === e, C = !!(t != null && t.length) || S, { pluginsWithInfoPanel: M } = Ss(g);\n  function R(F, Y) {\n    var G, se;\n    const K = (G = F == null ? void 0 : F.informationPanel) == null ? void 0 : G.component;\n    return K === void 0 ? /* @__PURE__ */ o.createElement(o.Fragment, null) : /* @__PURE__ */ o.createElement(_e, { key: Y, value: F.id }, /* @__PURE__ */ o.createElement(Et, { FallbackComponent: At }, /* @__PURE__ */ o.createElement(\n      K,\n      {\n        ...(se = F == null ? void 0 : F.informationPanel) == null ? void 0 : se.componentProps,\n        canvas: b,\n        useViewerDispatch: X,\n        useViewerState: z\n      }\n    )));\n  }\n  const I = () => {\n    s({\n      type: \"updateInformationOpen\",\n      isInformationOpen: !1\n    });\n  };\n  k(() => {\n    [\n      \"manifest-about\",\n      \"manifest-annotations\",\n      \"manifest-content-search\"\n    ].includes(String(h == null ? void 0 : h.defaultTab)) ? s({\n      type: \"updateInformationPanelResource\",\n      informationPanelResource: h == null ? void 0 : h.defaultTab\n    }) : s(S ? {\n      type: \"updateInformationPanelResource\",\n      informationPanelResource: \"manifest-annotations\"\n    } : {\n      type: \"updateInformationPanelResource\",\n      informationPanelResource: \"manifest-about\"\n    });\n  }, []), k(() => {\n    C || s({\n      type: \"updateInformationPanelResource\",\n      informationPanelResource: \"manifest-about\"\n    });\n  }, [C]);\n  function O() {\n    if (!c) {\n      clearTimeout(m);\n      const F = setTimeout(() => {\n        s({\n          type: \"updateUserScrolling\",\n          isUserScrolling: void 0\n        });\n      }, As);\n      s({\n        type: \"updateUserScrolling\",\n        isUserScrolling: F\n      });\n    }\n  }\n  const W = (F) => {\n    s({\n      type: \"updateInformationPanelResource\",\n      informationPanelResource: F\n    });\n  };\n  return /* @__PURE__ */ o.createElement(\n    yo,\n    {\n      \"data-testid\": \"information-panel\",\n      defaultValue: d,\n      onValueChange: W,\n      orientation: \"horizontal\",\n      value: d,\n      className: \"clover-viewer-information-panel\"\n    },\n    /* @__PURE__ */ o.createElement(\n      bo,\n      {\n        \"aria-label\": a(\"informationPanelTabs\"),\n        \"data-testid\": \"information-panel-list\"\n      },\n      y && /* @__PURE__ */ o.createElement(\n        ke,\n        {\n          value: \"manifest-back\",\n          \"data-value\": \"manifest-back\",\n          onClick: I,\n          as: \"button\"\n        },\n        a(\"informationPanelTabsClose\")\n      ),\n      w && /* @__PURE__ */ o.createElement(ke, { value: \"manifest-about\" }, a(\"informationPanelTabsAbout\")),\n      E && i && /* @__PURE__ */ o.createElement(ke, { value: \"manifest-content-search\" }, a(\"informationPanelTabsSearch\")),\n      v && C && /* @__PURE__ */ o.createElement(ke, { value: \"manifest-annotations\" }, (h == null ? void 0 : h.annotationTabLabel) || a(\"informationPanelTabsAnnotations\")),\n      M && M.map((F, Y) => {\n        var K;\n        return /* @__PURE__ */ o.createElement(ke, { key: Y, value: F.id }, /* @__PURE__ */ o.createElement(\n          ue,\n          {\n            label: (K = F.informationPanel) == null ? void 0 : K.label\n          }\n        ));\n      })\n    ),\n    /* @__PURE__ */ o.createElement(xo, { handleScroll: O }, w && /* @__PURE__ */ o.createElement(_e, { value: \"manifest-about\" }, /* @__PURE__ */ o.createElement(Es, null)), E && i && /* @__PURE__ */ o.createElement(_e, { value: \"manifest-content-search\" }, /* @__PURE__ */ o.createElement(\n      us,\n      {\n        searchServiceUrl: r,\n        setContentSearchResource: n,\n        activeCanvas: e,\n        annotationPage: i\n      }\n    )), v && t && /* @__PURE__ */ o.createElement(_e, { value: \"manifest-annotations\" }, u && S && /* @__PURE__ */ o.createElement(\n      Cs,\n      {\n        contentStateAnnotation: u\n      }\n    ), t.map((F) => /* @__PURE__ */ o.createElement(\n      os,\n      {\n        key: F.id,\n        annotationPage: F\n      }\n    ))), M && M.map(\n      (F, Y) => R(F, Y)\n    ))\n  );\n}, Ts = () => /* @__PURE__ */ o.createElement(\n  \"path\",\n  {\n    fill: \"none\",\n    stroke: \"currentColor\",\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    strokeWidth: \"32\",\n    d: \"M256 112v288M400 256H112\"\n  }\n), Rs = () => /* @__PURE__ */ o.createElement(o.Fragment, null, /* @__PURE__ */ o.createElement(\"path\", { d: \"M232 416a23.88 23.88 0 01-14.2-4.68 8.27 8.27 0 01-.66-.51L125.76 336H56a24 24 0 01-24-24V200a24 24 0 0124-24h69.75l91.37-74.81a8.27 8.27 0 01.66-.51A24 24 0 01256 120v272a24 24 0 01-24 24zm-106.18-80zm-.27-159.86zM320 336a16 16 0 01-14.29-23.19c9.49-18.87 14.3-38 14.3-56.81 0-19.38-4.66-37.94-14.25-56.73a16 16 0 0128.5-14.54C346.19 208.12 352 231.44 352 256c0 23.86-6 47.81-17.7 71.19A16 16 0 01320 336z\" }), /* @__PURE__ */ o.createElement(\"path\", { d: \"M368 384a16 16 0 01-13.86-24C373.05 327.09 384 299.51 384 256c0-44.17-10.93-71.56-29.82-103.94a16 16 0 0127.64-16.12C402.92 172.11 416 204.81 416 256c0 50.43-13.06 83.29-34.13 120a16 16 0 01-13.87 8z\" }), /* @__PURE__ */ o.createElement(\"path\", { d: \"M416 432a16 16 0 01-13.39-24.74C429.85 365.47 448 323.76 448 256c0-66.5-18.18-108.62-45.49-151.39a16 16 0 1127-17.22C459.81 134.89 480 181.74 480 256c0 64.75-14.66 113.63-50.6 168.74A16 16 0 01416 432z\" })), ks = () => /* @__PURE__ */ o.createElement(\"path\", { d: \"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z\" }), $s = () => /* @__PURE__ */ o.createElement(o.Fragment, null, /* @__PURE__ */ o.createElement(\n  \"path\",\n  {\n    d: \"M336 176h40a40 40 0 0140 40v208a40 40 0 01-40 40H136a40 40 0 01-40-40V216a40 40 0 0140-40h40\",\n    fill: \"none\",\n    stroke: \"currentColor\",\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    strokeWidth: \"32\"\n  }\n), /* @__PURE__ */ o.createElement(\n  \"path\",\n  {\n    fill: \"none\",\n    stroke: \"currentColor\",\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    strokeWidth: \"32\",\n    d: \"M176 272l80 80 80-80M256 48v288\"\n  }\n)), Ms = () => /* @__PURE__ */ o.createElement(\"path\", { d: \"M416 64H96a64.07 64.07 0 00-64 64v256a64.07 64.07 0 0064 64h320a64.07 64.07 0 0064-64V128a64.07 64.07 0 00-64-64zm-80 64a48 48 0 11-48 48 48.05 48.05 0 0148-48zM96 416a32 32 0 01-32-32v-67.63l94.84-84.3a48.06 48.06 0 0165.8 1.9l64.95 64.81L172.37 416zm352-32a32 32 0 01-32 32H217.63l121.42-121.42a47.72 47.72 0 0161.64-.16L448 333.84z\" }), Os = () => /* @__PURE__ */ o.createElement(\"path\", { d: \"M464 384.39a32 32 0 01-13-2.77 15.77 15.77 0 01-2.71-1.54l-82.71-58.22A32 32 0 01352 295.7v-79.4a32 32 0 0113.58-26.16l82.71-58.22a15.77 15.77 0 012.71-1.54 32 32 0 0145 29.24v192.76a32 32 0 01-32 32zM268 400H84a68.07 68.07 0 01-68-68V180a68.07 68.07 0 0168-68h184.48A67.6 67.6 0 01336 179.52V332a68.07 68.07 0 01-68 68z\" }), nn = x(\"svg\", {\n  display: \"inline-flex\",\n  variants: {\n    isLarge: {\n      true: {\n        height: \"4rem\",\n        width: \"4rem\"\n      }\n    },\n    isMedium: {\n      true: {\n        height: \"2rem\",\n        width: \"2rem\"\n      }\n    },\n    isSmall: {\n      true: {\n        height: \"1rem\",\n        width: \"1rem\"\n      }\n    }\n  }\n}), Ls = ({ children: e }) => /* @__PURE__ */ o.createElement(\"title\", null, e), j = (e) => /* @__PURE__ */ o.createElement(\n  nn,\n  {\n    ...e,\n    \"data-testid\": \"icon-svg\",\n    role: \"img\",\n    viewBox: \"0 0 512 512\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  },\n  e.children\n);\nj.Title = Ls;\nj.Add = Ts;\nj.Audio = Rs;\nj.Close = ks;\nj.Download = $s;\nj.Image = Ms;\nj.Video = Os;\nconst Ps = jr({\n  \"0%\": { opacity: 0, transform: \"translateY(1rem)\" },\n  \"100%\": { opacity: 1, transform: \"translateY(0)\" }\n}), Fs = jr({\n  \"0%\": { opacity: 0, transform: \"translateY(1rem)\" },\n  \"100%\": { opacity: 1, transform: \"translateY(0)\" }\n}), an = x(Oe.Arrow, {\n  fill: \"$secondaryAlt\"\n}), _s = x(Oe.Close, {\n  position: \"absolute\",\n  right: \"0\",\n  top: \"0\",\n  padding: \"0.5rem\",\n  margin: \"0\",\n  cursor: \"pointer\",\n  border: \"none\",\n  background: \"none\",\n  fill: \"inherit\",\n  \"&:hover\": {\n    opacity: \"0.75\"\n  }\n}), zs = x(Oe.Content, {\n  border: \"none\",\n  backgroundColor: \"white\",\n  fill: \"inhrerit\",\n  padding: \"1rem 2rem 1rem 1rem\",\n  width: \"auto\",\n  minWidth: \"200px\",\n  maxWidth: \"350px\",\n  borderRadius: \"3px\",\n  boxShadow: \"5px 5px 13px #0002\",\n  /**\n   * Animate toggle\n   */\n  animationDuration: \"0.3s\",\n  animationTimingFunction: \"cubic-bezier(0.16, 1, 0.3, 1)\",\n  '&[data-side=\"top\"]': { animationName: Fs },\n  '&[data-side=\"bottom\"]': { animationName: Ps },\n  /**\n   *\n   */\n  '&[data-align=\"end\"]': {\n    [`& ${an}`]: {\n      margin: \"0 0.7rem\"\n    }\n  }\n}), Ds = x(Oe.Trigger, {\n  display: \"inline-flex\",\n  padding: \"0.5rem 0\",\n  margin: \"0 0.5rem 0 0\",\n  cursor: \"pointer\",\n  border: \"none\",\n  background: \"none\",\n  \"> button, > span\": {\n    margin: \"0\"\n  }\n}), Bs = x(Oe.Root, {\n  boxSizing: \"content-box\"\n}), Hs = (e) => /* @__PURE__ */ o.createElement(Ds, { ...e }, e.children), Ns = (e) => /* @__PURE__ */ o.createElement(zs, { ...e, sideOffset: 5, collisionPadding: 21 }, /* @__PURE__ */ o.createElement(an, null), /* @__PURE__ */ o.createElement(_s, null, /* @__PURE__ */ o.createElement(j, { isSmall: !0 }, /* @__PURE__ */ o.createElement(j.Close, null))), e.children), Ce = ({ children: e }) => /* @__PURE__ */ o.createElement(Bs, null, e);\nCe.Trigger = Hs;\nCe.Content = Ns;\nconst Ve = x(\"div\", {\n  // Reset\n  boxSizing: \"border-box\",\n  // Custom\n  display: \"inline-flex\",\n  alignItems: \"center\",\n  borderRadius: \"2px\",\n  padding: \"$1\",\n  marginBottom: \"$2\",\n  marginRight: \"$2\",\n  backgroundColor: \"$lightGrey\",\n  color: \"$richBlack50\",\n  textTransform: \"uppercase\",\n  fontSize: \"$2\",\n  objectFit: \"contain\",\n  lineHeight: \"1em !important\",\n  \"&:last-child\": {\n    marginRight: \"0\"\n  },\n  [`${nn}`]: {\n    position: \"absolute\",\n    left: \"$1\",\n    height: \"$3\",\n    width: \"$3\"\n  },\n  variants: {\n    isIcon: {\n      true: { position: \"relative\", paddingLeft: \"$5\" }\n    }\n  }\n}), Be = x(\"span\", {\n  background: \"transparent\",\n  opacity: \"0\",\n  border: \"3px solid transparent\",\n  position: \"absolute\",\n  width: \"100%\",\n  height: \"100%\",\n  zIndex: \"0\",\n  left: \"0\",\n  top: \"0\",\n  transition: \"$all\"\n}), on = x(\"span\", {\n  display: \"flex\"\n}), Ws = x(\"span\", {\n  display: \"flex\",\n  width: \"1.2111rem\",\n  height: \"0.7222rem\"\n}), Vs = x(\"span\", {\n  display: \"inline-flex\",\n  marginLeft: \"5px\",\n  marginBottom: \"-1px\"\n}), He = x(\"div\", {\n  position: \"relative\",\n  display: \"flex\",\n  backgroundColor: \"$secondaryAlt\",\n  width: \"inherit\",\n  height: \"100px\",\n  overflow: \"hidden\",\n  borderRadius: \"3px\",\n  \".media-thumbnail-lazyload\": {\n    width: \"100%\",\n    height: \"100%\",\n    borderRadius: \"3px\"\n  },\n  img: {\n    width: \"100%\",\n    height: \"100%\",\n    objectFit: \"cover\",\n    objectPosition: \"top center\",\n    filter: \"blur(0)\",\n    transform: \"scale3d(1, 1, 1)\",\n    borderRadius: \"3px\",\n    transition: \"$all\",\n    color: \"transparent\"\n  },\n  [`& ${on}`]: {\n    position: \"absolute\",\n    right: \"0\",\n    bottom: \"0\",\n    [`& ${Ve}`]: {\n      display: \"none\",\n      margin: \"0\",\n      paddingLeft: \"0\",\n      fontSize: \"0.7222rem\",\n      backgroundColor: \"#000d\",\n      color: \"$secondary\",\n      fill: \"$secondary\",\n      borderBottomLeftRadius: \"0\",\n      borderTopRightRadius: \"0\"\n    }\n  }\n}), gt = x(Ge.Item, {\n  display: \"flex\",\n  flexShrink: \"0\",\n  padding: \"0\",\n  cursor: \"pointer\",\n  background: \"none\",\n  border: \"none\",\n  fontFamily: \"inherit\",\n  lineHeight: \"1.25em\",\n  fontSize: \"1rem\",\n  textAlign: \"left\",\n  figure: {\n    margin: \"0\",\n    width: \"161.8px\",\n    figcaption: {\n      marginTop: \"0.5rem\",\n      fontWeight: \"400\",\n      fontSize: \"0.8333rem\",\n      display: \"-webkit-box\",\n      overflow: \"hidden\",\n      MozBoxOrient: \"vertical\",\n      WebkitBoxOrient: \"vertical\",\n      WebkitLineClamp: \"5\",\n      \"@sm\": {\n        fontSize: \"0.8333rem\"\n      }\n    }\n  }\n}), Us = x(Ge.Root, {\n  display: \"flex\",\n  flexDirection: \"row\",\n  flexGrow: \"1\",\n  overflowX: \"scroll\",\n  position: \"relative\",\n  zIndex: \"0\",\n  gap: \"1rem\",\n  padding: \"1.618rem 0\"\n}), qs = x(\"div\", {\n  display: \"flex\",\n  flexDirection: \"row\",\n  \"&[data-active='true']\": {\n    [`& ${gt}`]: {\n      figcaption: {\n        fontWeight: \"700\"\n      },\n      [`& ${Ve}`]: {\n        backgroundColor: \"$accent\"\n      },\n      [`& ${Be}`]: {\n        background: \"#0003\",\n        opacity: \"1\",\n        borderBottom: \"3px solid $accent\"\n      },\n      \"&:first-of-type\": {\n        [`& ${Be}`]: {\n          borderRight: \"unset\"\n        }\n      },\n      \"&:last-of-type\": {\n        [`& ${Be}`]: {\n          borderLeft: \"unset\"\n        }\n      }\n    }\n  },\n  [`& ${gt}`]: {\n    [`& ${He}`]: {\n      borderRadius: \"unset\"\n    },\n    \"&:first-of-type\": {\n      [`& ${He}`]: {\n        borderTopLeftRadius: \"3px\",\n        borderBottomLeftRadius: \"3px\"\n      }\n    },\n    \"&:last-of-type\": {\n      [`& ${He}`]: {\n        borderTopRightRadius: \"3px\",\n        borderBottomRightRadius: \"3px\"\n      },\n      [`& ${Ve}`]: {\n        display: \"flex\"\n      }\n    }\n  }\n}), sn = x(\"div\", {\n  position: \"absolute\",\n  right: \"1rem\",\n  top: \"1rem\",\n  display: \"flex\",\n  justifyContent: \"flex-end\",\n  zIndex: \"1\"\n}), js = x(\"input\", {\n  flexGrow: \"1\",\n  border: \"none\",\n  backgroundColor: \"$secondaryMuted\",\n  color: \"$primary\",\n  marginRight: \"1rem\",\n  height: \"2rem\",\n  padding: \"0 1rem\",\n  borderRadius: \"2rem\",\n  fontFamily: \"inherit\",\n  fontSize: \"1rem\",\n  lineHeight: \"1rem\",\n  boxShadow: \"inset 1px 1px 2px #0001\",\n  \"&::placeholder\": {\n    color: \"$primaryMuted\"\n  }\n}), it = x(\"button\", {\n  display: \"flex\",\n  background: \"none\",\n  border: \"none\",\n  width: \"2rem !important\",\n  height: \"2rem !important\",\n  padding: \"0\",\n  margin: \"0\",\n  fontWeight: \"700\",\n  borderRadius: \"2rem\",\n  backgroundColor: \"$accent\",\n  color: \"$secondary\",\n  cursor: \"pointer\",\n  boxSizing: \"content-box !important\",\n  transition: \"$all\",\n  svg: {\n    height: \"60%\",\n    width: \"60%\",\n    padding: \"20%\",\n    fill: \"$secondary\",\n    stroke: \"$secondary\",\n    opacity: \"1\",\n    filter: \"drop-shadow(5px 5px 5px #000D)\",\n    boxSizing: \"inherit\",\n    transition: \"$all\"\n  },\n  \"&:disabled\": {\n    backgroundColor: \"transparent\",\n    boxShadow: \"none\",\n    svg: { opacity: \"0.25\" }\n  }\n}), Gs = x(\"div\", {\n  display: \"flex\",\n  marginRight: \"0.618rem\",\n  backgroundColor: \"$accentAlt\",\n  borderRadius: \"2rem\",\n  boxShadow: \"5px 5px 5px #0003\",\n  color: \"$secondary\",\n  alignItems: \"center\",\n  \"> span\": {\n    display: \"flex\",\n    margin: \"0 0.5rem\",\n    fontSize: \"0.7222rem\",\n    fontWeight: \"bold\",\n    gap: \"0.25rem\",\n    em: {\n      opacity: \"0.25\"\n    }\n  }\n}), Qs = x(\"div\", {\n  display: \"flex\",\n  position: \"relative\",\n  zIndex: \"1\",\n  width: \"100%\",\n  padding: \"0\",\n  transition: \"$all\",\n  variants: {\n    isToggle: {\n      true: {\n        paddingTop: \"2.618rem\",\n        [`& ${sn}`]: {\n          width: \"calc(100% - 2rem)\",\n          \"@sm\": {\n            width: \"calc(100% - 2rem)\"\n          }\n        }\n      }\n    }\n  }\n}), Js = (e, t) => {\n  k(() => {\n    function r(n) {\n      n.key === e && t();\n    }\n    return window.addEventListener(\"keyup\", r), () => window.removeEventListener(\"keyup\", r);\n  }, []);\n}, Ys = ({ title: e }) => /* @__PURE__ */ o.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", viewBox: \"0 0 512 512\" }, /* @__PURE__ */ o.createElement(\"title\", null, e), /* @__PURE__ */ o.createElement(\n  \"path\",\n  {\n    fill: \"none\",\n    stroke: \"currentColor\",\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    strokeMiterlimit: \"10\",\n    strokeWidth: \"45\",\n    d: \"M244 400L100 256l144-144M120 256h292\"\n  }\n)), Zs = ({ title: e }) => /* @__PURE__ */ o.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", viewBox: \"0 0 512 512\" }, /* @__PURE__ */ o.createElement(\"title\", null, e), /* @__PURE__ */ o.createElement(\n  \"path\",\n  {\n    fill: \"none\",\n    stroke: \"currentColor\",\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    strokeMiterlimit: \"10\",\n    strokeWidth: \"45\",\n    d: \"M268 112l144 144-144 144M392 256H100\"\n  }\n)), Xs = ({ title: e }) => /* @__PURE__ */ o.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", viewBox: \"0 0 512 512\" }, /* @__PURE__ */ o.createElement(\"title\", null, e), /* @__PURE__ */ o.createElement(\"path\", { d: \"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z\" })), Ks = ({ title: e }) => /* @__PURE__ */ o.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", viewBox: \"0 0 512 512\" }, /* @__PURE__ */ o.createElement(\"title\", null, e), /* @__PURE__ */ o.createElement(\"path\", { d: \"M456.69 421.39L362.6 327.3a173.81 173.81 0 0034.84-104.58C397.44 126.38 319.06 48 222.72 48S48 126.38 48 222.72s78.38 174.72 174.72 174.72A173.81 173.81 0 00327.3 362.6l94.09 94.09a25 25 0 0035.3-35.3zM97.92 222.72a124.8 124.8 0 11124.8 124.8 124.95 124.95 0 01-124.8-124.8z\" })), el = ({\n  handleCanvasToggle: e,\n  handleFilter: t,\n  activeIndex: r,\n  canvasLength: n\n}) => {\n  const [i, a] = L(!1), [s, l] = L(!1), [u, d] = L(!1), { t: c } = pe();\n  k(() => {\n    d(r === 0), r === n - 1 ? l(!0) : l(!1);\n  }, [r, n]), Js(\"Escape\", () => {\n    a(!1), t(\"\");\n  });\n  const m = () => {\n    a((f) => !f), t(\"\");\n  }, p = (f) => t(f.target.value);\n  return /* @__PURE__ */ o.createElement(\n    Qs,\n    {\n      isToggle: i,\n      className: \"clover-viewer-media-controls\"\n    },\n    /* @__PURE__ */ o.createElement(sn, null, i && /* @__PURE__ */ o.createElement(\n      js,\n      {\n        autoFocus: !0,\n        onChange: p,\n        placeholder: c(\"commonSearchPlaceholder\")\n      }\n    ), !i && /* @__PURE__ */ o.createElement(Gs, { className: \"clover-viewer-media-navigation\" }, /* @__PURE__ */ o.createElement(\n      it,\n      {\n        onClick: () => e(-1),\n        disabled: u,\n        type: \"button\"\n      },\n      /* @__PURE__ */ o.createElement(Ys, { title: c(\"commonPrevious\") })\n    ), /* @__PURE__ */ o.createElement(\"span\", null, r + 1, \" \", /* @__PURE__ */ o.createElement(\"em\", null, \"/\"), \" \", n), /* @__PURE__ */ o.createElement(\n      it,\n      {\n        onClick: () => e(1),\n        disabled: s,\n        type: \"button\"\n      },\n      /* @__PURE__ */ o.createElement(Zs, { title: c(\"commonNext\") })\n    )), /* @__PURE__ */ o.createElement(\n      it,\n      {\n        onClick: m,\n        type: \"button\",\n        className: \"clover-viewer-media-search\"\n      },\n      i ? /* @__PURE__ */ o.createElement(Xs, { title: c(\"commonClose\") }) : /* @__PURE__ */ o.createElement(Ks, { title: c(\"commonSearch\") })\n    ))\n  );\n}, tl = ({\n  children: e,\n  rootMargin: t = \"100px\",\n  attributes: r = {},\n  isVisibleCallback: n = () => {\n  }\n}) => {\n  const i = Ue(null), [a, s] = L(!1);\n  return k(() => {\n    const l = i.current;\n    if (!l) return;\n    const u = new IntersectionObserver(\n      ([d]) => {\n        d.isIntersecting && (n(!0), s(!0), u.disconnect());\n      },\n      { rootMargin: t }\n    );\n    return u.observe(l), () => u.disconnect();\n  }, [i]), /* @__PURE__ */ o.createElement(\"div\", { ref: i, ...r }, a ? e : null);\n};\nvar ze = {}, $t = {\n  get(e) {\n    return e;\n  },\n  setMetaValue([e, t, r], n) {\n    const i = $t.getResourceMeta(e, t), a = i ? i[r] : void 0, s = typeof n == \"function\" ? n(a) : n;\n    ze[e] = {\n      ...ze[e] || {},\n      [t]: {\n        ...(ze[e] || {})[t] || {},\n        [r]: s\n      }\n    };\n  },\n  getResourceMeta: (e, t) => {\n    const r = ze[e];\n    if (r)\n      return t ? r[t] : r;\n  },\n  async load(e) {\n    const t = typeof e == \"string\" ? e : e.id;\n    return fetch(t).then((r) => r.json());\n  },\n  requestStatus(e) {\n  }\n}, rl = Object.defineProperty, nl = (e, t, r) => t in e ? rl(e, t, { enumerable: !0, configurable: !0, writable: !0, value: r }) : e[t] = r, De = (e, t, r) => (nl(e, typeof t != \"symbol\" ? t + \"\" : t, r), r);\nfunction xe(e) {\n  return e.endsWith(\"info.json\") ? e : e.endsWith(\"/\") ? `${e}info.json` : `${e}/info.json`;\n}\nvar il = \"http://library.stanford.edu/iiif/image-api/compliance.html#level0\", ln = \"http://library.stanford.edu/iiif/image-api/compliance.html#level1\", cn = \"http://library.stanford.edu/iiif/image-api/compliance.html#level2\", al = \"http://library.stanford.edu/iiif/image-api/conformance.html#level0\", un = \"http://library.stanford.edu/iiif/image-api/conformance.html#level1\", dn = \"http://library.stanford.edu/iiif/image-api/conformance.html#level2\", ol = \"http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0\", mn = \"http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level1\", fn = \"http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2\", sl = \"http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level0\", hn = \"http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level1\", pn = \"http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level2\", ll = \"http://iiif.io/api/image/1/level0.json\", cl = \"http://iiif.io/api/image/1/profiles/level0.json\", gn = \"http://iiif.io/api/image/1/level1.json\", vn = \"http://iiif.io/api/image/1/profiles/level1.json\", yn = \"http://iiif.io/api/image/1/level2.json\", bn = \"http://iiif.io/api/image/1/profiles/level2.json\", ul = \"http://iiif.io/api/image/2/level0.json\", dl = \"http://iiif.io/api/image/2/profiles/level0.json\", wn = \"http://iiif.io/api/image/2/level1.json\", xn = \"http://iiif.io/api/image/2/profiles/level1.json\", En = \"http://iiif.io/api/image/2/level2.json\", Sn = \"http://iiif.io/api/image/2/profiles/level2.json\", ml = \"level0\", Cn = \"level1\", An = \"level2\", fl = \"http://iiif.io/api/image/2/level0\", In = \"http://iiif.io/api/image/2/level1\", Tn = \"http://iiif.io/api/image/2/level2\", hl = \"https://iiif.io/api/image/1.1/compliance/#level0\", Rn = \"https://iiif.io/api/image/1.1/compliance/#level1\", kn = \"https://iiif.io/api/image/1.1/compliance/#level2\", $n = [Tn, cn, dn, fn, pn, yn, bn, En, Sn, An, kn], Mn = [...$n, In, ln, un, mn, hn, gn, vn, wn, xn, Cn, Rn], pl = [fl, In, Tn, il, ln, cn, al, un, dn, ol, mn, fn, sl, hn, pn, ll, cl, gn, vn, yn, bn, ul, dl, wn, xn, En, Sn, ml, Cn, An, hl, Rn, kn], gl = { extraFormats: [\"jpg\"], extraQualities: [\"default\"], extraFeatures: [\"sizeByWhListed\"] }, vl = { extraFormats: [\"jpg\"], extraQualities: [\"default\"], extraFeatures: [\"baseUriRedirect\", \"cors\", \"jsonldMediaType\", \"regionByPx\", \"regionSquare\", \"sizeByWhListed\", \"sizeByH\", \"sizeByW\", \"sizeByWh\"] }, yl = { extraFormats: [\"jpg\", \"png\"], extraQualities: [\"default\"], extraFeatures: [\"baseUriRedirect\", \"cors\", \"jsonldMediaType\", \"regionByPct\", \"regionByPx\", \"regionSquare\", \"rotationBy90s\", \"sizeByWhListed\", \"sizeByConfinedWh\", \"sizeByH\", \"sizeByPct\", \"sizeByW\", \"sizeByWh\"] };\nfunction bl(e) {\n  return $n.indexOf(e) !== -1 ? yl : Mn.indexOf(e) !== -1 ? vl : gl;\n}\nfunction wl(e) {\n  let t = e ? Array.isArray(e.profile) ? e.profile : [e.profile] : [], r = { extraQualities: [], extraFormats: [], extraFeatures: [] };\n  for (let n of t) if (typeof n == \"string\" && (n = bl(n)), !!n) {\n    if (n.formats) for (let i of n.formats) r.extraFormats.indexOf(i) === -1 && r.extraFormats.push(i);\n    if (n.qualities) for (let i of n.qualities) r.extraQualities.indexOf(i) === -1 && r.extraQualities.push(i);\n    if (n.supports) for (let i of n.supports) r.extraFeatures.indexOf(i) === -1 && r.extraFeatures.push(i);\n    if (n.maxHeight && (r.maxHeight = n.maxHeight), n.maxWidth && (r.maxWidth = n.maxWidth), n.maxArea && (r.maxArea = n.maxArea), n.extraFormats) for (let i of n.extraFormats) r.extraFormats.indexOf(i) === -1 && r.extraFormats.push(i);\n    if (n.extraQualities) for (let i of n.extraQualities) r.extraQualities.indexOf(i) === -1 && r.extraQualities.push(i);\n    if (n.extraFeatures) for (let i of n.extraFeatures) r.extraFeatures.indexOf(i) === -1 && r.extraFeatures.push(i);\n    n.maxHeight && (r.maxHeight = n.maxHeight), n.maxWidth && (r.maxWidth = n.maxWidth), n.maxArea && (r.maxArea = n.maxArea);\n  }\n  if (e.extraFormats) for (let n of e.extraFormats) r.extraFormats.indexOf(n) === -1 && r.extraFormats.push(n);\n  if (e.extraFeatures) for (let n of e.extraFeatures) r.extraFeatures.indexOf(n) === -1 && r.extraFeatures.push(n);\n  if (e.extraQualities) for (let n of e.extraQualities) r.extraQualities.indexOf(n) === -1 && r.extraQualities.push(n);\n  return r;\n}\nfunction xl(e) {\n  try {\n    if (e === \"full\") return { full: !0 };\n    if (e === \"square\") return { square: !0 };\n    let t = e.startsWith(\"pct:\"), r = e.substr(t ? 4 : 0).split(\",\").map((n) => parseFloat(n));\n    return { x: r[0], y: r[1], w: r[2], h: r[3], percent: t };\n  } catch {\n    throw new Error(\"Expected 'full', 'square' or 'x,y,w,h'. Found \" + e);\n  }\n}\nfunction El(e) {\n  let t = { upscaled: !1, max: !1, confined: !1 };\n  if (e[0] === \"^\" && (t.upscaled = !0, e = e.slice(1)), e === \"max\" || e === \"full\") return t.max = !0, t.serialiseAsFull = e === \"full\", t;\n  if (e[0] === \"!\" && (t.confined = !0, e = e.slice(1)), e[0] === \"p\") return t.percentScale = parseFloat(e.slice(4)), t;\n  let r = e.split(\",\").map((n) => n.trim());\n  return r.length && typeof r[0] < \"u\" && (r[0] !== \"\" && (t.width = parseInt(r[0], 10)), typeof r[1] < \"u\" && r[1] !== \"\" ? (t.height = parseInt(r[1], 10), t.version = 2) : t.version = 3), t;\n}\nfunction Sl(e) {\n  let t = { angle: 0 };\n  if (e[0] === \"!\" && (t.mirror = !0, e = e.substr(1)), t.angle = parseFloat(e) % 360, Number.isNaN(t.angle)) throw new Error(`Invalid rotation ${e}`);\n  return t;\n}\nfunction Cl(e, t = \"\") {\n  let r = e.match(/^(([a-zA-Z]+):\\/\\/([^/]+))?((.*)+)/);\n  if (!r) throw new Error(`Invalid or unknown input ${e}`);\n  let n = r[2], i = r[3], a = r[4];\n  if (a[0] === \"/\" && (a = a.substring(1)), t.length > 0) {\n    if (t[0] === \"/\" && (t = t.substring(1)), t !== a.substring(0, t.length)) throw new Error(`Path does not start with prefix (path: ${a}, prefix: ${t})`);\n    a = a.substring(t.length);\n  }\n  return { scheme: n, server: i, path: a, prefix: t };\n}\nfunction Al(e, t = \"\") {\n  let { path: r, scheme: n, server: i, prefix: a } = Cl(e, t), s = (r || \"\").split(\"/\").reverse(), [l, u, d, c, ...m] = s, p = m.reverse().filter(Boolean).join(\"/\");\n  if (s.length === 1 || l === \"\") return { type: \"base\", scheme: n, server: i, prefix: a, identifier: p };\n  if (l === \"info.json\") {\n    let [, ...g] = s;\n    return { type: \"info\", scheme: n, server: i, prefix: a, identifier: g.reverse().filter(Boolean).join(\"/\") };\n  }\n  let f = (l || \"\").split(\".\");\n  if (typeof f[1] > \"u\" || typeof f[0] > \"u\" || typeof c > \"u\" || typeof d > \"u\" || typeof u > \"u\") throw new Error(\"Invalid image request\");\n  return { type: \"image\", scheme: n, server: i, prefix: a, identifier: p, originalPath: r, region: xl(c), size: El(d), rotation: Sl(u), quality: f[0], format: f[1] };\n}\nfunction Il(e) {\n  let t = Al(xe(e.id));\n  if (t.type !== \"info\") throw new Error(\"Invalid service URL\");\n  let r = wl(e);\n  return { identifier: t.identifier, originalPath: \"\", server: t.server, prefix: t.prefix, scheme: t.scheme, type: \"image\", quality: r.extraQualities.indexOf(\"default\") === -1 ? r.extraQualities[0] : \"default\", region: { full: !0 }, size: { max: !0, upscaled: !1, confined: !1 }, format: \"jpg\", rotation: { angle: 0 } };\n}\nfunction Tl(e, t, r) {\n  let n = r.length, i = [];\n  for (let a = 0; a < n; a++) {\n    let s = r[a];\n    if (s) {\n      let l = s.width;\n      i.push(e / l);\n    }\n  }\n  return i;\n}\nfunction Rl(e, t, r) {\n  let n = r.length, i = [];\n  for (let a = 0; a < n; a++) {\n    let s = r[a];\n    s && i.push({ width: Math.floor(e / s), height: Math.floor(t / s) });\n  }\n  return i;\n}\nfunction D(e) {\n  if (e[\"@id\"]) return e[\"@id\"];\n  if (e.id) return e.id;\n}\nfunction Ze(e) {\n  if (!e || !e.profile || !D(e)) return !1;\n  let t = Array.isArray(e.profile) ? e.profile : [e.profile];\n  for (let r of t) if (typeof r == \"string\" && pl.indexOf(r) !== -1) return !0;\n  return !1;\n}\nfunction kl(e) {\n  if (!Ze(e)) return !1;\n  let t = Array.isArray(e.profile) ? e.profile : [e.profile];\n  for (let r of t) if (typeof r == \"string\") {\n    if (Mn.indexOf(r) !== -1) return !0;\n  } else {\n    let n = [...r.supports || [], ...r.extraFeatures || []];\n    if (n.indexOf(\"regionByPx\") !== -1 && (n.indexOf(\"sizeByW\") !== -1 || n.indexOf(\"sizeByWh\") !== -1)) return !0;\n  }\n  return !1;\n}\nfunction Ne(e, t) {\n  if (t && t.profile) {\n    let r = t.profile;\n    if (r) {\n      let n = Array.isArray(r) ? r : [r];\n      return n.includes(`level${e}`) || n.includes(`http://iiif.io/api/image/2/level${e}.json`) || n.includes(`http://iiif.io/api/image/1/level${e}.json`) || n.includes(`http://iiif.io/api/image/1/profiles/level${e}.json`);\n    }\n  }\n  return !1;\n}\nfunction vt(e) {\n  return Ze(e) ? Ne(0, e) ? 0 : Ne(1, e) ? 1 : Ne(2, e) ? 2 : null : null;\n}\nfunction On(e) {\n  return (e[\"@context\"] ? Array.isArray(e[\"@context\"]) ? e[\"@context\"] : [e[\"@context\"]] : []).indexOf(\"http://iiif.io/api/image/3/context.json\") !== -1;\n}\nfunction $l(e) {\n  if (!kl(e)) return [];\n  let t = [], r = Array.isArray(e.profile) ? e.profile : [e.profile], n = r.length;\n  for (let i = 0; i < n; i++) {\n    let a = r[i];\n    if (a && typeof a != \"string\" && (a.maxHeight || a.maxWidth)) return [{ id: D(e), type: \"variable\", minWidth: 0, minHeight: 0, maxHeight: a.maxHeight || a.maxWidth, maxWidth: a.maxWidth || a.maxHeight, level: vt(e), version: e[\"@context\"] === \"http://iiif.io/api/image/3/context.json\" ? 3 : 2 }];\n  }\n  if (e.tiles) {\n    let i = e.tiles.length;\n    for (let a = 0; a < i; a++) {\n      let s = e.tiles[a];\n      s && (s.height || s.width) && t.push({ id: D(e), type: \"variable\", minHeight: 0, minWidth: 0, maxHeight: s.height || s.width, maxWidth: s.width, level: vt(e), version: On(e) ? 3 : 2 });\n    }\n  }\n  return t;\n}\nfunction Ut(e) {\n  let t = /^.*\\/(full)\\/(((\\d+),(\\d+)?)|max)\\/(\\d+)\\/default\\.(jpg|png|jpeg)$/, r = e.match(t);\n  if (r && r[4] && r[5]) {\n    let n = r[1], i = parseInt(r[4], 10), a = parseInt(r[5], 10), s = r[7];\n    if ((n === \"max\" || n === \"full\") && i && a && s) return { type: \"fixed\", id: e, height: a, width: i };\n  }\n  return { type: \"unknown\", id: e };\n}\nfunction Ml(e) {\n  if (e[\"@type\"]) return e[\"@type\"];\n  if (e.type) return e.type;\n}\nfunction yt(e) {\n  if (typeof e == \"string\") return Ut(e);\n  let t = Ml(e);\n  if (t !== \"Image\" && t !== \"sc:Image\") return null;\n  let r = e, n = D(r);\n  return n ? n && r.width && r.height ? { id: n, type: \"fixed\", width: r.width, height: r.height, unsafe: !0 } : Ut(n) : null;\n}\nfunction Ol(e) {\n  return Ze(e) ? (e && e.sizes ? e.sizes : []).map((t) => ({ id: D(e), type: \"fixed-service\", height: t.height, width: t.width, level: vt(e), version: On(e) ? 3 : 2 })) : [];\n}\nfunction qt(e) {\n  let t = [], r = e.length;\n  for (let n = 0; n < r; n++) {\n    let i = e[n];\n    if (!i) continue;\n    let a = Ol(i);\n    a.length && t.push(...a);\n    let s = $l(i);\n    s.length && t.push(...s);\n  }\n  return t;\n}\nfunction Ln(e) {\n  let t = e.service ? Array.isArray(e.service) ? e.service : [e.service] : [], r = t.length, n = [];\n  for (let i = 0; i < r; i++) Ze(t[i]) && n.push(t[i]);\n  return n;\n}\nfunction Ll(e, t = !0, r) {\n  let n = [], i = yt(e);\n  if (i === null) return n;\n  let a = e;\n  if (n.push(i), t && a && a.width && a.height) {\n    let s = [], l = Ln(a);\n    for (let u of l) {\n      let d = { id: D(u), width: a.width, height: a.height };\n      if (r.canLoadSync(d)) {\n        let c = r.loadServiceSync(d);\n        c && (c.height || (c.height = a.height), c.width || (c.width = a.width), s.push(...qt([c])));\n      }\n    }\n    if (s.length) return n.push(...s), n;\n  }\n  return a.service && n.push(...qt(a.service)), n;\n}\nfunction Pl({ x: e = 0, y: t = 0, w: r, h: n, full: i, square: a, percent: s }) {\n  return \"full\";\n}\nfunction Fl({ max: e, percentScale: t, upscaled: r, confined: n, width: i, height: a, serialiseAsFull: s, version: l }) {\n  let u = [];\n  return r && u.push(\"^\"), e ? (u.push(s ? \"full\" : \"max\"), u.join(\"\")) : (n && u.push(\"!\"), t && u.push(`pct:${t}`), i && u.push(`${i}`), u.push(\",\"), a && l === 3 && u.push(`${a}`), u.join(\"\"));\n}\nfunction _l(e) {\n  return `${e.mirror ? \"!\" : \"\"}${(e.angle || 0) % 360}`;\n}\nfunction zl(e, t) {\n  let r = e.prefix.startsWith(\"/\") ? e.prefix.substr(1) : e.prefix, n = `${e.scheme}://${e.server}/${r ? `${r}/` : \"\"}${e.identifier}`, { size: i } = e, { region: a, rotation: s, format: l, quality: u } = e;\n  return [n, Pl(a), Fl(i), _l(s), `${u}.${l}`].filter(Boolean).join(\"/\");\n}\nfunction at(e, t, r) {\n  let n = Il({ \"@context\": e.version === 3 ? \"http://iiif.io/api/image/3/context.json\" : \"http://iiif.io/api/image/2/context.json\", id: xe(D(e)), profile: e.level === null || typeof e.level > \"u\" ? \"level0\" : `level${e.level}`, type: e.version === 3 ? \"ImageService3\" : \"ImageService2\" });\n  return n.size.max = !1, n.size.width = t, n.size.height = r, { id: zl(n), type: \"fixed\", width: t, height: r || e.height / (e.width || 1) * t, unsafe: e.width > t };\n}\nfunction Ie(e) {\n  let t = e.replace(/(https?:\\/\\/)?(www.)?/i, \"\");\n  return t.indexOf(\"/\") !== -1 ? t.split(\"/\")[0] : t;\n}\nfunction Dl(e, t, r) {\n  let n = e.width ? e.width : e.maxWidth;\n  return r.height <= e.maxHeight && r.width <= e.maxWidth && r.height >= e.minHeight && r.width >= e.minWidth && (!t || Math.abs(r.width - n) < Math.abs(t.width - n));\n}\nfunction Bl(e, t) {\n  let r = [], n = Object.assign({ unsafeImageService: !1, atAnyCost: !0, fallback: !0, minHeight: 64, minWidth: 64, maxHeight: 1 / 0, maxWidth: 1 / 0, returnAllOptions: !1, preferFixedSize: !1, allowUnsafe: !1, explain: !1, height: 0, width: 0 }, e), i = (c, m = 0) => n.explain ? r.push(new Array(m).fill(0).map((p) => \"    \").join(\"\") + c().trim()) : void 0, a = [], s = [], l = null;\n  i(() => `Using configuration: ${JSON.stringify(n, null, 2)}`);\n  let u = (c, m) => {\n    if (i(() => \"Swapping choice\", 3), Dl(n, m, c)) {\n      if (n.preferFixedSize && c.unsafe) {\n        i(() => `We found an image that was marked as unsafe, but it was the best size. (${c.id})`, 4), s.push(c);\n        return;\n      }\n      n.returnAllOptions && m && s.push(m), i(() => `We found a new image that was the best size. (${c.id})`, 4), l = c;\n    } else n.returnAllOptions && s.push(c);\n  };\n  i(() => `The input shows we have ${t.length} list(s) of candidates to choose from.`);\n  let d = t.length;\n  for (let c = 0; c < d; c++) {\n    let m = t[c]();\n    i(() => `Candidate group ${c}: ${JSON.stringify(m, null, 2)}`, 1);\n    let p = m.length;\n    i(() => `Checking candidate list number ${c} and found ${p} potential ways of creating image(s)`, 1);\n    for (let f = 0; f < p; f++) {\n      let g = m[f];\n      if (i(() => `-> Checking candidate ${f}`, 1), g.type === \"unknown\" && n.atAnyCost && (i(() => `We've found an unknown image type, adding this to the \"last resort\" list`, 2), a.push(g)), g.type === \"fixed\" && (g.unsafe ? (i(() => `We've found an unsafe fixed image type, adding this to the \"last resort\" list`, 2), a.push(g)) : (i(() => \"We've found a fixed size image, checking if it matches the request\", 2), u(g, l))), g.type === \"fixed-service\") if (n.unsafeImageService) {\n        i(() => \"Checking for an image from the tile source, without calculating the right height and width (unsafeImageService)\", 2);\n        let h = at(g, n.width, n.height);\n        u(h, l);\n      } else {\n        i(() => \"Checking for an image from the tile source 3\", 2);\n        let h = at(g, g.width, g.height);\n        u(h, l);\n      }\n      if (g.type === \"variable\" && g.maxWidth) {\n        let h = at({ id: g.id, width: g.maxWidth, height: g.maxWidth, level: g.level, version: g.version }, g.maxWidth);\n        u(h, l);\n      }\n    }\n    if (l && !n.returnAllOptions) {\n      if (l.unsafe || n.allowUnsafe) continue;\n      i(() => `We found a match in choice list number ${c}, no searching any more`);\n      break;\n    }\n  }\n  return n.atAnyCost && s.length === 0 ? (i(() => l ? `We found an image! ${l.id} of type ${l.type}` : 'We found no images, but \"atAnyCost\" is set, so returning that'), { best: l || a[0] || null, fallback: a.slice(1), log: r }) : n.returnAllOptions ? (i(() => \"Returning all options that we have found\"), { best: (n.atAnyCost ? l || s[0] || a[0] : l || s[0]) || null, fallback: [...s, ...a], log: r }) : (i(() => \"Returning the best image that we found, and a fallback\"), { best: l || s[0] || null, fallback: l ? s : s.slice(1), log: r });\n}\nfunction Hl(e, t, r) {\n  let n = e > t ? e : t, i = r.length, a = [];\n  for (let s = 0; s < i; s++) {\n    let l = r[s];\n    if (!l || l.scaleFactors.length === 0) continue;\n    let u = l.scaleFactors[0];\n    if (!u) continue;\n    let d = n / u, c = [u];\n    for (; d >= l.width; ) u = u * 2, c.push(u), d = d / 2;\n    a.push({ ...l, scaleFactors: c });\n  }\n  return a;\n}\nfunction Nl(e, t) {\n  if (e.length !== t.length) return !1;\n  if (e.length === 0 && t.length === 0) return !0;\n  let r = e.length, n = !0;\n  for (let a = 0; a < r; a++) {\n    let s = e[a], l = t[a];\n    if (s.width !== l.width || s.height !== l.height) {\n      n = !1;\n      break;\n    }\n  }\n  if (n) return !0;\n  let i = 0;\n  for (let a = 0; a < r; a++) for (let s = 0; s < r; s++) if (e[a].width === t[s].width && e[a].height === t[s].height) {\n    i++;\n    break;\n  }\n  return i === r;\n}\nfunction jt(e) {\n  return Ne(0, e);\n}\nvar Pn = class {\n  constructor(t = {}) {\n    De(this, \"config\", { verificationsRequired: 1, approximateServices: !1, enableFetching: !0, disableThrottling: !1 }), De(this, \"fetchingCount\", 0), De(this, \"imageServices\", {}), De(this, \"knownImageServers\", {}), this.config = Object.assign(this.config, t);\n  }\n  setConfig(t) {\n    Object.assign(this.config, t);\n  }\n  sample(t, r, n = !0) {\n    let i = Ie(D(t)), a = xe(D(t)), s = this.knownImageServers[i];\n    return this.imageServices[a] = Object.assign(t, { real: !0 }), !s && t.tiles && !jt(t) ? (this.knownImageServers[i] = { verifications: 0, malformed: !1, root: i, preLoaded: n, sampledId: D(t), verified: !1, server: null, result: { context: t[\"@context\"] || [], sampledProfile: t.profile, resourceServiceRatio: r && t.height ? r.height / t.height : 1, sampledSizes: t.sizes || [], sizeRatios: Tl(t.width, t.height, t.sizes || []), sampledTiles: t.tiles || [] } }, !0) : this.verify(t);\n  }\n  preLoad(t, r = !0) {\n    this.knownImageServers[t.root] = t, r && (this.knownImageServers[t.root].malformed = !1, this.knownImageServers[t.root].verifications = this.config.verificationsRequired);\n  }\n  predict(t, r = !1, n = !1) {\n    let i = t == null ? void 0 : t.source, a = Ie(D(t)), s = this.knownImageServers[a], l = xe(D(t));\n    return this.imageServices[l] ? this.imageServices[l] || null : !this.config.approximateServices || !s || !s.result || !(i != null && i.height || t.height) || !(i != null && i.width || t.width) || !n && (s.malformed || s.verifications < this.config.verificationsRequired) || jt(t.source) ? null : (this.imageServices[l] || (this.imageServices[l] = { \"@context\": s.result.context, \"@id\": D(t), id: D(t), protocol: \"http://iiif.io/api/image\", tiles: (i == null ? void 0 : i.tiles) || Hl(t.width, t.height, s.result.sampledTiles), sizes: (i == null ? void 0 : i.sizes) || Rl(Math.round(t.width / s.result.resourceServiceRatio), Math.round(t.height / s.result.resourceServiceRatio), s.result.sizeRatios), profile: (i == null ? void 0 : i.profile) || s.result.sampledProfile, height: (i == null ? void 0 : i.height) || t.height, width: (i == null ? void 0 : i.width) || t.width, real: !1 }), this.imageServices[l] || null);\n  }\n  async getThumbnailFromResource(t, r, n = !0, i = []) {\n    let a = t ? await this.getImageCandidates(t, n) : [];\n    return Bl(r, [() => i, () => a]);\n  }\n  async getImageCandidates(t, r = !0) {\n    let n = t;\n    if (r && n && n.height && n.width) {\n      let i = Ln(n);\n      for (let a of i) {\n        let s = { id: D(a), width: a.width ? a.width : n.width, height: a.height ? a.height : n.height, source: a };\n        await this.loadService(s);\n      }\n    }\n    return Ll(t, r, this);\n  }\n  async verify(t) {\n    let r = this.predict(t, !1, !0), n = await this.fetchService(D(t));\n    if (!r) return !1;\n    let i = r.height === n.height && r.width === n.width && r[\"@context\"] === n[\"@context\"] && Nl(r.sizes || [], n.sizes || []);\n    if (i) {\n      let a = Ie(D(t)), s = this.knownImageServers[a];\n      s && (s.verifications += 1, s.verifications >= this.config.verificationsRequired && (s.verified = !0));\n    }\n    return i;\n  }\n  canLoadSync(t) {\n    let r = typeof t == \"string\" ? t : D(t), n = xe(r);\n    if (this.imageServices[n]) return !0;\n    let i = this.knownImageServers[Ie(r)];\n    return !!(i && !i.malformed && i.verifications >= this.config.verificationsRequired);\n  }\n  async markAsMalformed(t) {\n    return this.knownImageServers[Ie(D(t))].malformed = !0, this.loadService(t, !0);\n  }\n  async fetchService(t, r = !1) {\n    let n = xe(t), i = this.imageServices[n];\n    if (i && (!r || i.real)) return i;\n    if (!this.config.enableFetching) throw new Error(\"Fetching is not enabled\");\n    let a = await this.fetch(n).then((s) => s.json());\n    return !a.id && a[\"@id\"] && (a.id = a[\"@id\"]), a.id !== t && (a.id = t, a[\"@id\"] && (a[\"@id\"] = t)), this.imageServices[n] = Object.assign(a, { real: !0 }), this.imageServices[n];\n  }\n  async fetch(t, r) {\n    return fetch(t, r);\n  }\n  async loadService(t, r = !1) {\n    if (!this.config.disableThrottling) {\n      let a = !0;\n      for (; a; ) if (this.fetchingCount >= this.config.verificationsRequired) await new Promise((s) => setTimeout(s, 500));\n      else {\n        a = !1;\n        break;\n      }\n    }\n    let n = this.knownImageServers[Ie(D(t))];\n    if (n && !n.malformed && !r) {\n      await n.result;\n      let a = this.loadServiceSync(t);\n      if (a) return a;\n    }\n    this.fetchingCount++;\n    let i = await this.fetchService(D(t), r);\n    return this.fetchingCount--, i.real && this.sample(i, t), i;\n  }\n  loadServiceSync(t) {\n    let r = xe(D(t));\n    return this.imageServices[r] ? this.imageServices[r] : this.config.approximateServices ? this.predict(t) : null;\n  }\n};\nnew Pn();\nvar Wl = new Pn(), Gt = /* @__PURE__ */ new Map();\nfunction Vl(e, {\n  vault: t = $t,\n  dereference: r = !1,\n  ...n\n} = {}) {\n  let i = Gt.get(t);\n  return i || (i = Ul(t), Gt.set(t, i)), i.getBestThumbnailAtSize(e, n, r);\n}\nfunction Ul(e = $t, t = {}) {\n  const r = t.imageServiceLoader || Wl;\n  async function n(i, a, s = !1, l = [], u) {\n    const d = () => r.getThumbnailFromResource(void 0, a, s, l);\n    if (!i)\n      return await r.getThumbnailFromResource(void 0, a, s, l);\n    if (typeof i == \"string\") {\n      const p = yt(i);\n      return p && l.push(p), await r.getThumbnailFromResource(void 0, a, s, l);\n    }\n    const c = e.get(i, { skipSelfReturn: !1 });\n    if (typeof c == \"string\")\n      return { best: yt(c), fallback: [], log: [] };\n    if (!c)\n      return await d();\n    switch (await (async (p) => {\n      if (p && p.thumbnail && p.thumbnail.length) {\n        const f = e.get(p.thumbnail[0]), g = await r.getImageCandidates(f, s);\n        g && g.length && l.push(...g);\n      }\n    })(c), c.type) {\n      case \"Annotation\": {\n        const p = Array.isArray(c.body) ? c.body : [c.body], f = e.get(p[0]);\n        return u && !f.width && (f.width = u.width, f.height = u.height), await r.getThumbnailFromResource(f, a, s, l);\n      }\n      case \"Canvas\": {\n        const p = c;\n        return n(p.items[0], a, s, l, {\n          width: p.width,\n          height: p.height\n        });\n      }\n      case \"AnnotationPage\":\n        return n(c.items[0], a, s, l, u);\n      case \"Choice\": {\n        const p = c;\n        return !p.items || p.items[0] ? await d() : n(p.items[0], a, s, l, u);\n      }\n      case \"Collection\": {\n        const f = c.items[0];\n        return f ? n(f, a, s, l, u) : await d();\n      }\n      case \"Manifest\": {\n        const f = c.items[0];\n        return f ? n(f, a, s, l, u) : await d();\n      }\n      case \"SpecificResource\":\n      case \"Image\":\n      case \"Dataset\":\n      case \"Sound\":\n      case \"Text\":\n      case \"TextualBody\":\n      case \"Video\":\n        return u && !c.width && (c.width = u.width, c.height = u.height), r.getThumbnailFromResource(c, a, s, l);\n    }\n    return await d();\n  }\n  return {\n    getBestThumbnailAtSize: n\n  };\n}\nconst ql = ({ type: e }) => {\n  switch (e) {\n    case \"Sound\":\n      return /* @__PURE__ */ o.createElement(j.Audio, null);\n    case \"Image\":\n      return /* @__PURE__ */ o.createElement(j.Image, null);\n    case \"Video\":\n      return /* @__PURE__ */ o.createElement(j.Video, null);\n    default:\n      return /* @__PURE__ */ o.createElement(j.Image, null);\n  }\n}, jl = ({\n  canvas: e,\n  canvasIndex: t,\n  isActive: r,\n  type: n,\n  handleChange: i\n}) => {\n  const [a, s] = L(!1), [l, u] = L(), d = z(), { vault: c } = d, m = 200, p = e != null && e.label ? ee(e == null ? void 0 : e.label) : String(t + 1);\n  k(() => {\n    a && (async () => {\n      var g, h;\n      try {\n        if (((g = e == null ? void 0 : e.thumbnail) == null ? void 0 : g.length) !== 0)\n          u((h = e == null ? void 0 : e.thumbnail[0]) == null ? void 0 : h.id);\n        else {\n          const { best: w } = await Vl(e, {\n            vault: c,\n            dereference: !0,\n            width: m,\n            height: m\n          });\n          u(w == null ? void 0 : w.id);\n        }\n      } catch (w) {\n        console.error(\"Error fetching thumbnail\", w);\n      }\n    })();\n  }, [e, a]);\n  const f = (g) => {\n    s(g);\n  };\n  return /* @__PURE__ */ o.createElement(\n    gt,\n    {\n      \"aria-checked\": r,\n      \"data-testid\": \"media-thumbnail\",\n      \"data-canvas\": t,\n      onClick: () => i(e.id),\n      value: e.id\n    },\n    /* @__PURE__ */ o.createElement(\"figure\", null, /* @__PURE__ */ o.createElement(He, null, /* @__PURE__ */ o.createElement(\n      tl,\n      {\n        isVisibleCallback: f,\n        attributes: {\n          className: \"media-thumbnail-lazyload\",\n          \"data-lazyload\": String(a),\n          \"data-testid\": \"media-thumbnail-lazyload\"\n        }\n      },\n      l && /* @__PURE__ */ o.createElement(\n        \"img\",\n        {\n          alt: p,\n          \"data-testid\": \"media-thumbnail-image\",\n          src: l\n        }\n      )\n    ), /* @__PURE__ */ o.createElement(Be, null), /* @__PURE__ */ o.createElement(on, null, /* @__PURE__ */ o.createElement(Ve, { isIcon: !0, \"data-testid\": \"thumbnail-tag\" }, /* @__PURE__ */ o.createElement(Ws, null), /* @__PURE__ */ o.createElement(j, { \"aria-label\": n }, /* @__PURE__ */ o.createElement(ql, { type: n })), [\"Video\", \"Sound\"].includes(n) && /* @__PURE__ */ o.createElement(Vs, null, _r(e.duration))))), /* @__PURE__ */ o.createElement(\"figcaption\", { \"data-testid\": \"fig-caption\" }, e.label ? /* @__PURE__ */ o.createElement(ue, { label: e.label }) : (t + 1).toString()))\n  );\n}, Gl = (e) => e.body ? e.body.type : \"Image\", Ql = ({ items: e }) => {\n  const { t } = pe(), r = X(), n = z(), { activeCanvas: i, vault: a, sequence: s } = n, [l, u] = L(\"\"), [d, c] = L([]), [m, p] = L(0), f = o.useRef(null), g = \"painting\", h = (b) => {\n    i !== b && r({\n      type: \"updateActiveCanvas\",\n      canvasId: b\n    });\n  };\n  k(() => {\n    if (!d.length) {\n      const b = [\"Image\", \"Sound\", \"Video\"], E = e.map(\n        (y) => Ur(a, y, g, b)\n      ).filter((y) => y.annotations.length > 0);\n      c(E);\n    }\n  }, [e, d.length, a]), k(() => {\n    d.forEach((b, E) => {\n      b != null && b.canvas && b.canvas.id === i && p(E);\n    });\n  }, [i, d]), k(() => {\n    const b = document.querySelector(\n      `[data-canvas=\"${m}\"]`\n    );\n    if (b instanceof HTMLElement && f.current) {\n      const E = b.offsetLeft - f.current.offsetWidth / 2 + b.offsetWidth / 2;\n      f.current.scrollTo({ left: E, behavior: \"smooth\" });\n    }\n  }, [m]);\n  const w = (b) => u(b), v = (b) => {\n    const E = s[1].findIndex(\n      (C) => C.includes(m)\n    ), y = E + b >= 0 ? E + b : s[1].length - 1;\n    if (!s[1][y]) return;\n    const A = s[1][y][0], S = s[0][A].id;\n    S && h(S);\n  };\n  return /* @__PURE__ */ o.createElement(o.Fragment, null, /* @__PURE__ */ o.createElement(\n    el,\n    {\n      handleFilter: w,\n      handleCanvasToggle: v,\n      activeIndex: m,\n      canvasLength: e.length\n    }\n  ), /* @__PURE__ */ o.createElement(\n    Us,\n    {\n      \"aria-label\": t(\"media.selectItem\"),\n      \"data-testid\": \"media\",\n      \"data-active-canvas\": e[m].id,\n      \"data-canvas-length\": e.length,\n      \"data-filter\": l,\n      ref: f\n    },\n    s[1].filter((b) => b.some((E) => {\n      var C;\n      const y = s[0][E].id, A = d.find((M) => {\n        var R;\n        return ((R = M == null ? void 0 : M.canvas) == null ? void 0 : R.id) === y;\n      });\n      if (!A) return !1;\n      const S = ee((C = A == null ? void 0 : A.canvas) == null ? void 0 : C.label) || \"\";\n      return !(l && !S.toLowerCase().includes(l.toLowerCase()));\n    })).map((b, E) => {\n      const y = b.map((A) => s[0][A].id).includes(i);\n      return /* @__PURE__ */ o.createElement(qs, { \"data-active\": y, key: E }, b.map((A) => {\n        var M, R;\n        const S = s[0][A].id, C = d.find((I) => {\n          var O;\n          return ((O = I == null ? void 0 : I.canvas) == null ? void 0 : O.id) === S;\n        });\n        return C ? /* @__PURE__ */ o.createElement(\n          jl,\n          {\n            canvas: C.canvas,\n            canvasIndex: d.findIndex((I) => I === C),\n            handleChange: h,\n            isActive: i === ((M = C == null ? void 0 : C.canvas) == null ? void 0 : M.id),\n            key: (R = C == null ? void 0 : C.canvas) == null ? void 0 : R.id,\n            type: Gl(C.annotations[0])\n          }\n        ) : null;\n      }));\n    })\n  ));\n}, Fn = x(\"button\", {\n  position: \"absolute\",\n  background: \"none\",\n  border: \"none\",\n  cursor: \"zoom-in\",\n  margin: \"0\",\n  padding: \"0\",\n  width: \"100%\",\n  height: \"100%\",\n  transition: \"$all\",\n  opacity: 1,\n  display: \"flex\",\n  alignItems: \"center\",\n  justifyContent: \"center\",\n  img: {\n    width: \"100%\",\n    height: \"100%\",\n    objectFit: \"contain\",\n    color: \"transparent\",\n    aspectRatio: \"auto\"\n  },\n  \"&[data-paged=true]\": {\n    \"img:first-child \": {\n      objectPosition: \"100% 50%\"\n    },\n    \"img:last-child\": {\n      objectPosition: \"0 50%\"\n    }\n  },\n  \"&[data-active=false]\": {\n    opacity: 0,\n    objectPosition: \"50% 50%\"\n  },\n  variants: {\n    isMedia: {\n      true: {\n        cursor: \"pointer\"\n      }\n    }\n  }\n}), _n = x(\"button\", {\n  display: \"flex\",\n  height: \"2rem\",\n  width: \"2rem\",\n  borderRadius: \"2rem\",\n  padding: \"0\",\n  margin: \"0\",\n  fontFamily: \"inherit\",\n  background: \"none\",\n  backgroundColor: \"$primary\",\n  border: \"none\",\n  color: \"white\",\n  cursor: \"pointer\",\n  marginLeft: \"0.618rem\",\n  filter: \"drop-shadow(2px 2px 5px #0003)\",\n  transition: \"$all\",\n  boxSizing: \"content-box !important\",\n  \"&:first-child\": {\n    marginLeft: \"0\"\n  },\n  \"@xs\": {\n    marginBottom: \"0.618rem\",\n    marginLeft: \"0\",\n    \"&:last-child\": {\n      marginBottom: \"0\"\n    }\n  },\n  svg: {\n    height: \"60%\",\n    width: \"60%\",\n    padding: \"20%\",\n    fill: \"$secondary\",\n    stroke: \"$secondary\",\n    filter: \"drop-shadow(2px 2px 5px #0003)\",\n    transition: \"$all\",\n    boxSizing: \"inherit\"\n  },\n  \"&:hover, &:focus\": {\n    backgroundColor: \"$accent\"\n  },\n  \"&[data-button=rotate-right]\": {\n    \"&:hover, &:focus\": {\n      svg: {\n        rotate: \"45deg\"\n      }\n    }\n  },\n  \"&[data-button=rotate-left]\": {\n    transform: \"scaleX(-1)\",\n    \"&:hover, &:focus\": {\n      svg: {\n        rotate: \"45deg\"\n      }\n    }\n  },\n  \"&[data-button=reset]\": {\n    \"&:hover, &:focus\": {\n      svg: {\n        rotate: \"-15deg\"\n      }\n    }\n  }\n}), zn = x(_n, {\n  position: \"absolute\",\n  width: \"2rem\",\n  top: \"1rem\",\n  right: \"1rem\",\n  zIndex: 100,\n  display: \"flex\",\n  alignItems: \"center\",\n  justifyContent: \"center\",\n  textAlign: \"center\",\n  transition: \"$all\",\n  borderRadius: \"50%\",\n  backgroundColor: \"$accent\",\n  cursor: \"pointer\",\n  \"&:hover, &:focus\": {\n    backgroundColor: \"$accent !important\"\n  },\n  variants: {\n    isInteractive: {\n      true: {\n        \"&:hover\": {\n          opacity: \"1\"\n        }\n      },\n      false: {}\n    },\n    isMedia: {\n      true: {\n        cursor: \"pointer !important\"\n      }\n    }\n  },\n  compoundVariants: [\n    {\n      isInteractive: !1,\n      isMedia: !0,\n      css: {\n        top: \"50%\",\n        right: \"50%\",\n        width: \"4rem\",\n        height: \"4rem\",\n        transform: \"translate(50%,-50%)\"\n      }\n    }\n  ]\n}), Jl = x(\"div\", {\n  position: \"relative\",\n  display: \"flex\",\n  flexDirection: \"column\",\n  flexGrow: \"1\",\n  flexShrink: \"1\",\n  gap: \"1rem\",\n  zIndex: \"0\",\n  overflow: \"hidden\",\n  \"&:hover\": {\n    [`${zn}`]: {\n      backgroundColor: \"$accent\"\n    },\n    [`${Fn}`]: {\n      backgroundColor: \"#6662\"\n    }\n  }\n}), Yl = x(\"div\", {\n  width: \"100%\",\n  height: \"100%\"\n}), Zl = x(\"svg\", {\n  height: \"19px\",\n  color: \"$accent\",\n  fill: \"$accent\",\n  stroke: \"$accent\",\n  display: \"flex\",\n  margin: \"0.25rem 0.85rem\"\n}), Xl = x(Le.Trigger, {\n  fontSize: \"1.25rem\",\n  fontWeight: \"400\",\n  fontFamily: \"inherit\",\n  alignSelf: \"flex-start\",\n  flexGrow: \"1\",\n  cursor: \"pointer\",\n  transition: \"$all\",\n  border: \"1px solid #6663\",\n  boxShadow: \"2px 2px 5px #0001\",\n  borderRadius: \"3px\",\n  display: \"flex\",\n  alignItems: \"center\",\n  paddingLeft: \"0.5rem\",\n  width: \"100%\",\n  \"@sm\": {\n    fontSize: \"1rem\"\n  }\n}), Kl = x(Le.Content, {\n  borderRadius: \"3px\",\n  boxShadow: \"3px 3px 8px #0003\",\n  backgroundColor: \"$secondary\",\n  marginTop: \"2.25rem\",\n  marginLeft: \"6px\",\n  paddingBottom: \"0.25rem\",\n  maxHeight: \"calc(61.8vh - 2.5rem) !important\",\n  borderTopLeftRadius: \"0\",\n  border: \"1px solid $secondaryMuted\",\n  maxWidth: \"90vw\"\n}), ec = x(Le.Item, {\n  display: \"flex\",\n  alignItems: \"center\",\n  fontFamily: \"inherit\",\n  padding: \"0.25rem 0.5rem\",\n  color: \"$primary\",\n  fontWeight: \"400\",\n  fontSize: \"0.8333rem\",\n  cursor: \"pointer\",\n  backgroundColor: \"$secondary\",\n  width: \"calc(100% - 1rem)\",\n  \"> span\": {\n    whiteSpace: \"nowrap\",\n    textOverflow: \"ellipsis\",\n    overflow: \"hidden\"\n  },\n  '&[data-state=\"checked\"]': {\n    fontWeight: \"700\",\n    color: \"$primary !important\"\n  },\n  \"&:hover\": {\n    color: \"$accent\"\n  },\n  img: {\n    width: \"31px\",\n    height: \"31px\",\n    marginRight: \"0.5rem\",\n    borderRadius: \"3px\"\n  }\n}), tc = x(Le.Label, {\n  color: \"$primaryMuted\",\n  fontFamily: \"inherit\",\n  fontSize: \"0.85rem\",\n  padding: \"0.5rem 1rem 0.5rem 0.5rem\",\n  display: \"flex\",\n  alignItems: \"center\",\n  marginBottom: \"0.25rem\",\n  borderRadius: \"3px\",\n  borderTopLeftRadius: \"0\",\n  borderBottomLeftRadius: \"0\",\n  borderBottomRightRadius: \"0\",\n  backgroundColor: \"$secondaryMuted\"\n}), Dn = x(Le.Root, {\n  position: \"relative\",\n  zIndex: \"5\",\n  width: \"100%\"\n}), ot = ({ direction: e, title: t }) => {\n  const r = () => /* @__PURE__ */ o.createElement(\"path\", { d: \"M414 321.94L274.22 158.82a24 24 0 00-36.44 0L98 321.94c-13.34 15.57-2.28 39.62 18.22 39.62h279.6c20.5 0 31.56-24.05 18.18-39.62z\" }), n = () => /* @__PURE__ */ o.createElement(\"path\", { d: \"M98 190.06l139.78 163.12a24 24 0 0036.44 0L414 190.06c13.34-15.57 2.28-39.62-18.22-39.62h-279.6c-20.5 0-31.56 24.05-18.18 39.62z\" });\n  return /* @__PURE__ */ o.createElement(\n    Zl,\n    {\n      xmlns: \"http://www.w3.org/2000/svg\",\n      focusable: \"false\",\n      viewBox: \"0 0 512 512\",\n      role: \"img\"\n    },\n    /* @__PURE__ */ o.createElement(\"title\", null, t),\n    e === \"up\" && /* @__PURE__ */ o.createElement(r, null),\n    e === \"down\" && /* @__PURE__ */ o.createElement(n, null)\n  );\n}, Bn = ({\n  children: e,\n  label: t,\n  maxHeight: r,\n  onValueChange: n,\n  value: i\n}) => /* @__PURE__ */ o.createElement(Dn, { onValueChange: n, value: i }, /* @__PURE__ */ o.createElement(Xl, { \"data-testid\": \"select-button\" }, /* @__PURE__ */ o.createElement(Ri, { \"data-testid\": \"select-button-value\" }), /* @__PURE__ */ o.createElement(ki, null, /* @__PURE__ */ o.createElement(ot, { direction: \"down\", title: \"select\" }))), /* @__PURE__ */ o.createElement($i, null, /* @__PURE__ */ o.createElement(\n  Kl,\n  {\n    css: { maxHeight: `${r} !important` },\n    \"data-testid\": \"select-content\"\n  },\n  /* @__PURE__ */ o.createElement(Mi, null, /* @__PURE__ */ o.createElement(ot, { direction: \"up\", title: \"scroll up for more\" })),\n  /* @__PURE__ */ o.createElement(Oi, null, /* @__PURE__ */ o.createElement(Li, null, t && /* @__PURE__ */ o.createElement(tc, null, /* @__PURE__ */ o.createElement(ue, { \"data-testid\": \"select-label\", label: t })), e)),\n  /* @__PURE__ */ o.createElement(Pi, null, /* @__PURE__ */ o.createElement(ot, { direction: \"down\", title: \"scroll down for more\" }))\n))), Hn = (e) => /* @__PURE__ */ o.createElement(ec, { ...e }, e.thumbnail && /* @__PURE__ */ o.createElement(rn, { thumbnail: e.thumbnail }), /* @__PURE__ */ o.createElement(Fi, null, /* @__PURE__ */ o.createElement(ue, { label: e.label })), /* @__PURE__ */ o.createElement(_i, null));\nlet Se = window.OpenSeadragon;\nif (!Se && (Se = $e, !Se))\n  throw new Error(\"OpenSeadragon is missing.\");\nconst Qt = \"http://www.w3.org/2000/svg\";\nSe.Viewer && (Se.Viewer.prototype.svgOverlay = function() {\n  return this._svgOverlayInfo ? this._svgOverlayInfo : (this._svgOverlayInfo = new Nn(this), this._svgOverlayInfo);\n});\nconst Nn = function(e) {\n  const t = this;\n  this._viewer = e, this._containerWidth = 0, this._containerHeight = 0, this._svg = document.createElementNS(Qt, \"svg\"), this._svg.style.position = \"absolute\", this._svg.style.left = 0, this._svg.style.top = 0, this._svg.style.width = \"100%\", this._svg.style.height = \"100%\", this._viewer.canvas.appendChild(this._svg), this._node = document.createElementNS(Qt, \"g\"), this._svg.appendChild(this._node), this._viewer.addHandler(\"animation\", function() {\n    t.resize();\n  }), this._viewer.addHandler(\"open\", function() {\n    t.resize();\n  }), this._viewer.addHandler(\"rotate\", function() {\n    t.resize();\n  }), this._viewer.addHandler(\"flip\", function() {\n    t.resize();\n  }), this._viewer.addHandler(\"resize\", function() {\n    t.resize();\n  }), this.resize();\n};\nNn.prototype = {\n  // ----------\n  node: function() {\n    return this._node;\n  },\n  // ----------\n  resize: function() {\n    this._containerWidth !== this._viewer.container.clientWidth && (this._containerWidth = this._viewer.container.clientWidth, this._svg.setAttribute(\"width\", this._containerWidth)), this._containerHeight !== this._viewer.container.clientHeight && (this._containerHeight = this._viewer.container.clientHeight, this._svg.setAttribute(\"height\", this._containerHeight));\n    const e = this._viewer.viewport.pixelFromPoint(new Se.Point(0, 0), !0), t = this._viewer.viewport.getZoom(!0), r = this._viewer.viewport.getRotation(), n = this._viewer.viewport.getFlip(), i = this._viewer.viewport._containerInnerSize.x;\n    let a = i * t;\n    const s = a;\n    n && (a = -a, e.x = -e.x + i), this._node.setAttribute(\n      \"transform\",\n      \"translate(\" + e.x + \",\" + e.y + \") scale(\" + a + \",\" + s + \") rotate(\" + r + \")\"\n    );\n  },\n  // ----------\n  onClick: function(e, t) {\n    new Se.MouseTracker({\n      element: e,\n      clickHandler: t\n    }).setTracking(!0);\n  }\n};\nvar rc = \"http://library.stanford.edu/iiif/image-api/compliance.html#level0\", nc = \"http://library.stanford.edu/iiif/image-api/compliance.html#level1\", Wn = \"http://library.stanford.edu/iiif/image-api/compliance.html#level2\", ic = \"http://library.stanford.edu/iiif/image-api/conformance.html#level0\", ac = \"http://library.stanford.edu/iiif/image-api/conformance.html#level1\", Vn = \"http://library.stanford.edu/iiif/image-api/conformance.html#level2\", oc = \"http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0\", sc = \"http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level1\", Un = \"http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2\", lc = \"http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level0\", cc = \"http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level1\", qn = \"http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level2\", uc = \"http://iiif.io/api/image/1/level0.json\", dc = \"http://iiif.io/api/image/1/profiles/level0.json\", mc = \"http://iiif.io/api/image/1/level1.json\", fc = \"http://iiif.io/api/image/1/profiles/level1.json\", jn = \"http://iiif.io/api/image/1/level2.json\", Gn = \"http://iiif.io/api/image/1/profiles/level2.json\", hc = \"http://iiif.io/api/image/2/level0.json\", pc = \"http://iiif.io/api/image/2/profiles/level0.json\", gc = \"http://iiif.io/api/image/2/level1.json\", vc = \"http://iiif.io/api/image/2/profiles/level1.json\", Qn = \"http://iiif.io/api/image/2/level2.json\", Jn = \"http://iiif.io/api/image/2/profiles/level2.json\", yc = \"level0\", bc = \"level1\", Yn = \"level2\", wc = \"http://iiif.io/api/image/2/level0\", xc = \"http://iiif.io/api/image/2/level1\", Zn = \"http://iiif.io/api/image/2/level2\", Ec = [Zn, Wn, Vn, Un, qn, jn, Gn, Qn, Jn, Yn], Sc = [wc, xc, Zn, rc, nc, Wn, ic, ac, Vn, oc, sc, Un, lc, cc, qn, uc, dc, mc, fc, jn, Gn, hc, pc, gc, vc, Qn, Jn, yc, bc, Yn], Cc = Sc;\nfunction oe(e) {\n  for (let t in e) (typeof e[t] > \"u\" || e[t] === null) && delete e[t];\n  return e;\n}\nfunction Ac(e) {\n  return Array.isArray(e) ? e : e ? [e] : [];\n}\nvar Ic = Object.defineProperty, Tc = (e, t, r) => t in e ? Ic(e, t, { enumerable: !0, configurable: !0, writable: !0, value: r }) : e[t] = r, Jt = (e, t, r) => (Tc(e, typeof t != \"symbol\" ? t + \"\" : t, r), r), Yt = [\"sc:Collection\", \"sc:Manifest\", \"sc:Canvas\", \"sc:AnnotationList\", \"oa:Annotation\", \"sc:Range\", \"sc:Layer\", \"sc:Sequence\", \"oa:Choice\", \"Service\", \"ContentResource\"];\nfunction Rc(e) {\n  if (typeof e > \"u\" || e === null) throw new Error(\"Null or undefined is not a valid entity.\");\n  if (Array.isArray(e)) throw new Error(\"Array is not a valid entity\");\n  if (typeof e != \"object\") throw new Error(`${typeof e} is not a valid entity`);\n  if (typeof e[\"@type\"] == \"string\") {\n    let t = Yt.indexOf(e[\"@type\"]);\n    if (t !== -1) return Yt[t];\n  }\n  if (e.profile) return \"Service\";\n  if (e.format || e[\"@type\"]) return \"ContentResource\";\n  throw new Error(\"Resource type is not known\");\n}\nvar kc = class Xn {\n  constructor(t, r = {}) {\n    Jt(this, \"traversals\"), Jt(this, \"options\"), this.traversals = { collection: [], manifest: [], canvas: [], annotationList: [], sequence: [], annotation: [], contentResource: [], choice: [], range: [], service: [], layer: [], ...t }, this.options = { convertPropsToArray: !0, mergeMemberProperties: !0, allowUndefinedReturn: !1, ...r };\n  }\n  static all(t) {\n    return new Xn({ collection: [t], manifest: [t], canvas: [t], annotationList: [t], sequence: [t], annotation: [t], contentResource: [t], choice: [t], range: [t], service: [t], layer: [t] });\n  }\n  traverseCollection(t) {\n    return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseCollectionItems(t))), this.traversals.collection);\n  }\n  traverseCollectionItems(t) {\n    if (this.options.mergeMemberProperties) {\n      let r = [...(t.manifests || []).map((n) => typeof n == \"string\" ? { \"@id\": n, \"@type\": \"sc:Manifest\" } : n), ...(t.collections || []).map((n) => typeof n == \"string\" ? { \"@id\": n, \"@type\": \"sc:Collection\" } : n), ...t.members || []];\n      delete t.collections, delete t.manifests, t.members = r;\n    }\n    return t.manifests && (t.manifests = t.manifests.map((r) => this.traverseManifest(typeof r == \"string\" ? { \"@id\": r, \"@type\": \"sc:Manifest\" } : r))), t.collections && (t.collections = t.collections.map((r) => this.traverseCollection(typeof r == \"string\" ? { \"@id\": r, \"@type\": \"sc:Collection\" } : r))), t.members && (t.members = t.members.map((r) => typeof r == \"string\" ? r : this.traverseUnknown(r))), t;\n  }\n  traverseManifest(t) {\n    return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseManifestItems(t))), this.traversals.manifest);\n  }\n  traverseManifestItems(t) {\n    return t.sequences && (t.sequences = t.sequences.map((r) => this.traverseSequence(r))), t.structures && (t.structures = t.structures.map((r) => this.traverseRange(r))), t;\n  }\n  traverseSequence(t) {\n    return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseSequenceItems(t))), this.traversals.sequence);\n  }\n  traverseSequenceItems(t) {\n    return t.canvases && (t.canvases = t.canvases.map((r) => this.traverseCanvas(r))), t;\n  }\n  traverseCanvas(t) {\n    return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseCanvasItems(t))), this.traversals.canvas);\n  }\n  traverseCanvasItems(t) {\n    return t.images && (t.images = t.images.map((r) => this.traverseAnnotation(r))), t.otherContent && (t.otherContent = t.otherContent.map((r) => this.traverseAnnotationList(r))), t;\n  }\n  traverseRange(t) {\n    return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseRangeItems(t))), this.traversals.range);\n  }\n  traverseRangeItems(t) {\n    if (this.options.mergeMemberProperties) {\n      let r = [...(t.ranges || []).map((n) => typeof n == \"string\" ? { \"@id\": n, \"@type\": \"sc:Range\" } : n), ...(t.canvases || []).map((n) => typeof n == \"string\" ? { \"@id\": n, \"@type\": \"sc:Canvas\" } : n), ...t.members || []];\n      delete t.ranges, delete t.canvases, t.members = r.length ? r.map((n) => this.traverseUnknown(n)) : void 0;\n    }\n    return t;\n  }\n  traverseAnnotationList(t) {\n    let r = typeof t == \"string\" ? { \"@id\": t, \"@type\": \"sc:AnnotationList\" } : t;\n    return this.traverseType(this.traverseDescriptive(this.traverseAnnotationListItems(r)), this.traversals.annotationList);\n  }\n  traverseAnnotationListItems(t) {\n    return t.resources && (t.resources = t.resources.map((r) => this.traverseAnnotation(r))), t;\n  }\n  traverseAnnotation(t) {\n    return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseAnnotationItems(t))), this.traversals.annotation);\n  }\n  traverseAnnotationItems(t) {\n    return t.resource && (Array.isArray(t.resource) ? t.resource = t.resource.map((r) => this.traverseContentResource(r)) : t.resource = this.traverseContentResource(t.resource)), t.on, t;\n  }\n  traverseLayer(t) {\n    return this.traverseType(this.traverseLinking(this.traverseLayerItems(t)), this.traversals.layer);\n  }\n  traverseLayerItems(t) {\n    return t.otherContent && (t.otherContent = t.otherContent.map((r) => this.traverseAnnotationList(r))), t;\n  }\n  traverseChoice(t) {\n    return this.traverseType(this.traverseChoiceItems(t), this.traversals.choice);\n  }\n  traverseChoiceItems(t) {\n    return t.default && t.default !== \"rdf:nil\" && (t.default = this.traverseContentResource(t.default)), t.item && t.item !== \"rdf:nil\" && (t.item = t.item.map((r) => this.traverseContentResource(r))), t;\n  }\n  traverseService(t) {\n    return this.traverseType(this.traverseLinking(t), this.traversals.service);\n  }\n  traverseContentResource(t) {\n    return t[\"@type\"] === \"oa:Choice\" ? this.traverseChoice(t) : this.traverseType(this.traverseDescriptive(this.traverseLinking(t)), this.traversals.contentResource);\n  }\n  traverseUnknown(t) {\n    if (!t[\"@type\"] || typeof t == \"string\") return t;\n    switch (Rc(t)) {\n      case \"sc:Collection\":\n        return this.traverseCollection(t);\n      case \"sc:Manifest\":\n        return this.traverseManifest(t);\n      case \"sc:Canvas\":\n        return this.traverseCanvas(t);\n      case \"sc:Sequence\":\n        return this.traverseSequence(t);\n      case \"sc:Range\":\n        return this.traverseRange(t);\n      case \"oa:Annotation\":\n        return this.traverseAnnotation(t);\n      case \"sc:AnnotationList\":\n        return this.traverseAnnotationList(t);\n      case \"sc:Layer\":\n        return this.traverseLayer(t);\n      case \"Service\":\n        return this.traverseService(t);\n      case \"oa:Choice\":\n        return this.traverseChoice(t);\n      case \"ContentResource\":\n        return this.traverseContentResource(t);\n    }\n    return t.profile ? this.traverseService(t) : t;\n  }\n  traverseImageResource(t) {\n    let r = Array.isArray(t), n = Array.isArray(t) ? t : [t], i = [];\n    for (let a of n) typeof a == \"string\" ? i.push(this.traverseContentResource({ \"@id\": a, \"@type\": \"dctypes:Image\" })) : i.push(this.traverseContentResource(a));\n    return !r && !this.options.convertPropsToArray ? i[0] : i;\n  }\n  traverseDescriptive(t) {\n    return t.thumbnail && (t.thumbnail = this.traverseImageResource(t.thumbnail)), t.logo && (t.logo = this.traverseImageResource(t.logo)), t;\n  }\n  traverseOneOrMoreServices(t) {\n    let r = Array.isArray(t), n = Array.isArray(t) ? t : [t], i = [];\n    for (let a of n) i.push(this.traverseService(a));\n    return !r && !this.options.convertPropsToArray ? i[0] : i;\n  }\n  traverseLinking(t) {\n    return t.related && (t.related = this.traverseOneOrManyType(t.related, this.traversals.contentResource)), t.rendering && (t.rendering = this.traverseOneOrManyType(t.rendering, this.traversals.contentResource)), t.service && (t.service = this.traverseOneOrMoreServices(t.service)), t.seeAlso && (t.seeAlso = this.traverseOneOrManyType(t.seeAlso, this.traversals.contentResource)), t.within && (typeof t.within == \"string\" || (t.within = this.traverseOneOrManyType(t.within, this.traversals.contentResource))), t.startCanvas && (typeof t.startCanvas == \"string\" ? t.startCanvas = this.traverseType({ \"@id\": t.startCanvas, \"@type\": \"sc:Canvas\" }, this.traversals.canvas) : t.startCanvas && this.traverseType(t.startCanvas, this.traversals.canvas)), t.contentLayer && (typeof t.contentLayer == \"string\" ? t.contentLayer = this.traverseLayer({ \"@id\": t.contentLayer, \"@type\": \"sc:Layer\" }) : t.contentLayer = this.traverseLayer(t.contentLayer)), t;\n  }\n  traverseOneOrManyType(t, r) {\n    if (!Array.isArray(t)) if (this.options.convertPropsToArray) t = [t];\n    else return this.traverseType(t, r);\n    return t.map((n) => this.traverseType(n, r));\n  }\n  traverseType(t, r) {\n    return r.reduce((n, i) => {\n      let a = i(n);\n      return typeof a > \"u\" && !this.options.allowUndefinedReturn ? n : a;\n    }, t);\n  }\n}, $c = \"http://library.stanford.edu/iiif/image-api/compliance.html#level1\", Mc = \"http://library.stanford.edu/iiif/image-api/compliance.html#level2\", Oc = \"http://library.stanford.edu/iiif/image-api/conformance.html#level1\", Lc = \"http://library.stanford.edu/iiif/image-api/conformance.html#level2\", Pc = \"http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level1\", Fc = \"http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2\", _c = \"http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level1\", zc = \"http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level2\", Dc = \"http://iiif.io/api/image/1/level1.json\", Bc = \"http://iiif.io/api/image/1/profiles/level1.json\", Hc = \"http://iiif.io/api/image/1/level2.json\", Nc = \"http://iiif.io/api/image/1/profiles/level2.json\", Wc = \"http://iiif.io/api/image/2/level1.json\", Vc = \"http://iiif.io/api/image/2/profiles/level1.json\", Uc = \"http://iiif.io/api/image/2/level2.json\", qc = \"http://iiif.io/api/image/2/profiles/level2.json\", jc = \"level1\", Gc = \"level2\", Qc = \"http://iiif.io/api/image/2/level1\", Jc = \"http://iiif.io/api/image/2/level2\", Yc = [Qc, Jc, $c, Mc, Oc, Lc, Pc, Fc, _c, zc, Dc, Bc, Hc, Nc, Wc, Vc, Uc, qc, jc, Gc], bt = { attributionLabel: \"Attribution\", providerId: \"http://example.org/provider\", providerName: \"Unknown\" };\nfunction Zc(e) {\n  if (typeof e == \"string\") return [e];\n  if (!e) return [];\n  let t = Array.isArray(e) ? e : [e], r = [];\n  for (let n of t) {\n    if (typeof n == \"string\") {\n      r.push(n);\n      continue;\n    }\n    r.push({ \"@language\": n[\"@language\"] || n.language, \"@value\": n[\"@value\"] || n.value });\n  }\n  return r;\n}\nfunction Ee(e, t = \"none\") {\n  if (!e) return {};\n  let r = Zc(e), n = {};\n  for (let i of r) {\n    if (typeof i == \"string\") {\n      n[t] = n[t] ? n[t] : [], n[t].push(i || \"\");\n      continue;\n    }\n    if (!i[\"@language\"]) {\n      n[t] = n[t] ? n[t] : [], n[t].push(i[\"@value\"] || \"\");\n      continue;\n    }\n    let a = i[\"@language\"];\n    n[a] = n[a] ? n[a] : [], n[a].push(i[\"@value\"] || \"\");\n  }\n  return n;\n}\nfunction Kn(e) {\n  if (Array.isArray(e)) return Kn(e.find((t) => typeof t == \"string\"));\n  if (Ec.indexOf(e) !== -1) return \"level2\";\n  if (Yc.indexOf(e) !== -1) return \"level1\";\n  if (Cc.indexOf(e) !== -1) return \"level0\";\n  if (typeof e == \"string\") return e;\n}\nfunction Xc(e) {\n  let t = Array.isArray(e) ? e : [e];\n  for (let r of t) switch (r) {\n    case \"http://iiif.io/api/image/2/context.json\":\n    case \"http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2\":\n      return \"ImageService2\";\n    case \"http://iiif.io/api/image/1/context.json\":\n    case \"http://library.stanford.edu/iiif/image-api/1.1/context.json\":\n      return \"ImageService1\";\n    case \"http://iiif.io/api/annex/openannotation/context.json\":\n      return \"ImageApiSelector\";\n  }\n}\nfunction Kc(e) {\n  switch (e) {\n    case \"http://iiif.io/api/image/2/level0.json\":\n    case \"http://iiif.io/api/image/2/level1.json\":\n    case \"http://iiif.io/api/image/2/level2.json\":\n      return \"ImageService2\";\n    case \"http://iiif.io/api/auth/1/kiosk\":\n    case \"http://iiif.io/api/auth/1/login\":\n    case \"http://iiif.io/api/auth/1/clickthrough\":\n    case \"http://iiif.io/api/auth/1/external\":\n    case \"http://iiif.io/api/auth/0/kiosk\":\n    case \"http://iiif.io/api/auth/0/login\":\n    case \"http://iiif.io/api/auth/0/clickthrough\":\n    case \"http://iiif.io/api/auth/0/external\":\n      return \"AuthCookieService1\";\n    case \"http://iiif.io/api/auth/1/token\":\n    case \"http://iiif.io/api/auth/0/token\":\n      return \"AuthTokenService1\";\n    case \"http://iiif.io/api/auth/1/logout\":\n    case \"http://iiif.io/api/auth/0/logout\":\n      return \"AuthLogoutService1\";\n    case \"http://iiif.io/api/search/1/search\":\n    case \"http://iiif.io/api/search/0/search\":\n      return \"SearchService1\";\n    case \"http://iiif.io/api/search/1/autocomplete\":\n    case \"http://iiif.io/api/search/0/autocomplete\":\n      return \"AutoCompleteService1\";\n  }\n}\nfunction Zt(e) {\n  for (let t of [\"sc\", \"oa\", \"dcterms\", \"dctypes\", \"iiif\"]) if (e.startsWith(`${t}:`)) return e.slice(t.length + 1);\n  return e;\n}\nvar eu = [\"Collection\", \"Manifest\", \"Annotation\", \"AnnotationPage\", \"Range\", \"Service\"];\nfunction Mt(e) {\n  let t = e[\"@id\"] || e.id, r = e[\"@type\"] || e.type, n = e.profile || void 0, i = e[\"@context\"] || void 0;\n  if (n) {\n    let a = Kc(n);\n    if (a) return a;\n  }\n  if (i) {\n    let a = Xc(i);\n    if (a) return a;\n  }\n  if (r) {\n    if (Array.isArray(r)) {\n      if (r.indexOf(\"oa:CssStylesheet\") !== -1) return \"CssStylesheet\";\n      if (r.indexOf(\"cnt:ContentAsText\") !== -1) return \"TextualBody\";\n      r = r[0];\n    }\n    for (let a of [\"sc\", \"oa\", \"dcterms\", \"dctypes\", \"iiif\"]) if (r.startsWith(`${a}:`)) {\n      r = r.slice(a.length + 1);\n      break;\n    }\n    switch (r) {\n      case \"Layer\":\n        return \"AnnotationCollection\";\n      case \"AnnotationList\":\n        return \"AnnotationPage\";\n      case \"cnt:ContentAsText\":\n        return \"TextualBody\";\n    }\n  }\n  if (r && eu.indexOf(r) !== -1) return r;\n  if (e.format) {\n    if (e.format.startsWith(\"image/\")) return \"Image\";\n    if (e.format.startsWith(\"text/\") || e.format === \"application/pdf\") return \"Text\";\n    if (e.format.startsWith(\"application/\")) return \"Dataset\";\n  }\n  return t && (t.endsWith(\".jpg\") || t.endsWith(\".png\") || t.endsWith(\".jpeg\")) ? \"Image\" : r || \"unknown\";\n}\nvar tu = /http(s)?:\\/\\/(creativecommons.org|rightsstatements.org)[^\"'\\\\<\\n]+/gm;\nfunction ru(e) {\n  let t = e.match(tu);\n  return t ? t[0] : e;\n}\nfunction nu(e, t = \"Rights/License\", r = \"none\") {\n  let n = null, i = [], a = Array.isArray(e) ? e : [e];\n  for (let s of a) {\n    let l = s ? ru(s) : void 0;\n    if (l && (l.indexOf(\"creativecommons.org\") !== -1 || l.indexOf(\"rightsstatements.org\") !== -1)) {\n      l.startsWith(\"https://\") ? n = `http://${l.slice(8)}` : n = l;\n      continue;\n    }\n    l && i.push({ label: { [r]: [t] }, value: { [r]: [l] } });\n  }\n  return [n, i];\n}\nvar iu = [\"http://iiif.io/api/presentation/2/context.json\", \"http://iiif.io/api/image/2/context.json\", \"http://iiif.io/api/image/1/context.json\", \"http://library.stanford.edu/iiif/image-api/1.1/context.json\", \"http://iiif.io/api/search/1/context.json\", \"http://iiif.io/api/search/0/context.json\", \"http://iiif.io/api/auth/1/context.json\", \"http://iiif.io/api/auth/0/context.json\", \"http://iiif.io/api/annex/openannotation/context.json\"];\nfunction au(e) {\n  if (e) {\n    let t = Array.isArray(e) ? e : [e], r = [];\n    for (let n of t) n === \"http://iiif.io/api/presentation/2/context.json\" && r.push(\"http://iiif.io/api/presentation/3/context.json\"), iu.indexOf(n) === -1 && r.push(n);\n    if (t.length) return r.length === 1 ? r[0] : r;\n  }\n}\nfunction ou(e) {\n  return e ? e.map((t) => ({ label: Ee(t.label), value: Ee(t.value) })) : [];\n}\nvar Xt = 0;\nfunction ei(e, t) {\n  let r = encodeURI(e.id || e[\"@id\"] || \"\").trim();\n  return r && t ? `${r}/${t}` : r || (Xt++, `http://example.org/${e[\"@type\"]}${t ? `/${t}` : \"\"}/${Xt}`);\n}\nfunction de(e) {\n  let t = [...e.behavior || []];\n  e.viewingHint && t.push(e.viewingHint);\n  let r;\n  return Array.isArray(e.motivation) ? r = e.motivation.map(Zt) : e.motivation && (r = Zt(e.motivation)), { \"@context\": e[\"@context\"] ? au(e[\"@context\"]) : void 0, id: (e[\"@id\"] || ei(e)).trim(), type: Mt(e), behavior: t.length ? t : void 0, height: e.height ? e.height : void 0, width: e.width ? e.width : void 0, motivation: r, viewingDirection: e.viewingDirection, profile: e.profile, format: e.format ? e.format : void 0, duration: void 0, timeMode: void 0 };\n}\nfunction me(e) {\n  let [t, r] = nu(e.license), n = [...e.metadata ? ou(e.metadata) : [], ...r];\n  return { rights: t, metadata: n.length ? n : void 0, label: e.label ? Ee(e.label) : void 0, requiredStatement: e.attribution ? { label: Ee(bt.attributionLabel), value: Ee(e.attribution) } : void 0, navDate: e.navDate, summary: e.description ? Ee(e.description) : void 0, thumbnail: su(e.thumbnail) };\n}\nfunction su(e) {\n  return e && (Array.isArray(e) ? e : [e]).map((t) => typeof t == \"string\" ? { id: t, type: \"Image\" } : (t.type === \"unknown\" && (t.type = \"Image\"), t));\n}\nfunction lu(e) {\n  if (!e.within) return;\n  let t = Array.isArray(e.within) ? e.within : [e.within], r = [];\n  for (let n of t) if (typeof n == \"string\") {\n    if (n) switch (e[\"@type\"]) {\n      case \"sc:Manifest\":\n        r.push({ id: n, type: \"Collection\" });\n        break;\n    }\n  } else n[\"@id\"] && r.push({ id: n[\"@id\"], type: Mt(n) });\n  return r.length ? r : void 0;\n}\nfunction ge(e) {\n  let t = e.related ? Array.isArray(e.related) ? e.related : [e.related] : [], r = e.contentLayer;\n  return { provider: e.logo || t.length ? [{ id: bt.providerId, type: \"Agent\", homepage: t.length ? [t[0]] : void 0, logo: e.logo ? Array.isArray(e.logo) ? e.logo : [e.logo] : void 0, label: Ee(bt.providerName) }] : void 0, partOf: lu(e), rendering: e.rendering, seeAlso: e.seeAlso, start: e.startCanvas, service: e.service ? Ac(e.service) : void 0, supplementary: r ? [r] : void 0 };\n}\nfunction cu(e) {\n  return { chars: e.chars, format: e.format ? e.format : void 0, language: e.language };\n}\nfunction uu(e) {\n  return oe({ ...de(e), ...me(e), ...ge(e), items: e.members });\n}\nfunction du(e) {\n  let t = [], r = [], n;\n  for (let a of e.sequences || []) a.canvases.length && t.push(...a.canvases), a.behavior && r.push(...a.behavior), a.startCanvas && (n = a.startCanvas);\n  let i = de(e);\n  return r.length && (i.behavior ? i.behavior.push(...r) : i.behavior = r), oe({ ...i, ...me(e), ...ge(e), start: n, items: t, structures: mu(e.structures) });\n}\nfunction mu(e) {\n  if (!e) return e;\n  let t = /* @__PURE__ */ new Map();\n  for (let n of e) t.set(n.id, n);\n  let r = [];\n  for (let n of e) if (n.items) {\n    let i = n.items.map((a) => typeof a == \"string\" ? (r.push(a), t.get(a) || a) : a && a.id ? (r.push(a.id), t.get(a.id) || a) : a);\n    n.items = i;\n  }\n  return e.filter((n) => r.indexOf(n.id) === -1);\n}\nfunction fu(e) {\n  return oe({ ...de(e), ...me(e), ...ge(e), annotations: e.otherContent && e.otherContent.length ? e.otherContent : void 0, items: e.images && e.images.length ? [{ id: ei(e, \"annotation-page\"), type: \"AnnotationPage\", items: e.images }] : void 0 });\n}\nfunction hu(e) {\n  return oe({ ...de(e), ...me(e), ...ge(e), items: e.resources && e.resources.length ? e.resources : void 0 });\n}\nfunction pu(e) {\n  return !e.canvases || e.canvases.length === 0 ? { canvases: [], behavior: [] } : { canvases: e.canvases, behavior: e.viewingHint ? [e.viewingHint] : [], startCanvas: e.startCanvas };\n}\nfunction gu(e) {\n  function t(r) {\n    if (Array.isArray(r)) {\n      if (r.length > 1) return { type: \"List\", items: r.map(t) };\n      r = r[0];\n    }\n    if (typeof r == \"string\") return encodeURI(r).trim();\n    if (\"@type\" in r) {\n      let n;\n      if (typeof r.full == \"string\") n = r.full;\n      else if (r.full[\"@type\"] === \"dctypes:Image\") n = { id: r.full[\"@id\"], type: \"Image\" };\n      else if (r.full[\"@type\"] === \"sc:Canvas\") n = { id: r.full[\"@id\"], type: \"Canvas\" };\n      else throw new Error(`Unsupported source type on annotation: ${r.full[\"@type\"]}`);\n      return { type: \"SpecificResource\", source: n, selector: wt(r.selector) };\n    } else return encodeURI(r[\"@id\"]).trim();\n  }\n  return oe({ ...de(e), ...me(e), ...ge(e), target: t(e.on), body: Array.isArray(e.resource) ? e.resource.map(Kt) : Kt(e.resource) });\n}\nfunction Kt(e) {\n  return e.type === \"Choice\" ? e : ti(e);\n}\nfunction ti(e) {\n  let t = e;\n  return oe({ ...de(t), ...me(t), ...ge(t), ...cu(t) });\n}\nfunction vu(e) {\n  let t = [];\n  return e.default && e.default !== \"rdf:nil\" && t.push(e.default), e.item && e.item !== \"rdf:nil\" && t.push(...e.item), oe({ ...de(e), ...me(e), items: t });\n}\nfunction yu(e) {\n  return oe({ ...de(e), ...me(e), ...ge(e), items: e.members });\n}\nfunction bu(e) {\n  let { \"@id\": t, \"@type\": r, \"@context\": n, profile: i, ...a } = e, s = {};\n  return t && (s[\"@id\"] = t), s[\"@type\"] = Mt(e), s[\"@type\"] === \"unknown\" && (n && n.length && (s[\"@context\"] = n), s[\"@type\"] = \"Service\"), i && (s.profile = Kn(i)), oe({ ...s, ...a });\n}\nfunction wu(e) {\n  return oe({ ...de(e), ...me(e), ...ge(e) });\n}\nvar xu = new kc({ collection: [uu], manifest: [du], canvas: [fu], annotationList: [hu], sequence: [pu], annotation: [gu], contentResource: [ti], choice: [vu], range: [yu], service: [bu], layer: [wu] });\nfunction Eu(e) {\n  return e && e[\"@context\"] && (e[\"@context\"] === \"http://iiif.io/api/presentation/2/context.json\" || e[\"@context\"].indexOf(\"http://iiif.io/api/presentation/2/context.json\") !== -1 || e[\"@context\"] === \"http://www.shared-canvas.org/ns/context.json\") || e[\"@context\"] === \"http://iiif.io/api/image/2/context.json\" ? xu.traverseUnknown(e) : e;\n}\nfunction wt(e) {\n  if ((Array.isArray(e[\"@type\"]) && e[\"@type\"].includes(\"oa:SvgSelector\") || e[\"@type\"] == \"oa:SvgSelector\") && (\"chars\" in e || \"value\" in e)) return { type: \"SvgSelector\", value: \"chars\" in e ? e.chars : e.value };\n  if (e[\"@type\"] === \"oa:FragmentSelector\") return { type: \"FragmentSelector\", value: e.value };\n  if (e[\"@type\"] === \"oa:Choice\") return [wt(e.default), ...(Array.isArray(e.item) ? e.item : [e.item]).map(wt)];\n  if (e[\"@type\"] == \"iiif:ImageApiSelector\") return { type: \"ImageApiSelector\", region: \"region\" in e ? e.region : void 0, rotation: \"rotation\" in e ? e.rotation : void 0 };\n  throw new Error(`Unsupported selector type: ${e[\"@type\"]}`);\n}\nconst Su = (e) => (Array.isArray(e[\"@context\"]) ? e[\"@context\"] : [e[\"@context\"]]).map((r) => r == null ? void 0 : r.replace(\"http://\", \"https://\")), Cu = (e) => fetch(`${e.replace(/\\/$/, \"\")}/info.json`).then((t) => t.json()).then((t) => t).catch((t) => {\n  console.error(\n    `The IIIF tilesource ${e.replace(\n      /\\/$/,\n      \"\"\n    )}/info.json failed to load: ${t}`\n  );\n}), Au = (e) => {\n  let t, r;\n  if (Array.isArray(e) && (t = e[0], t)) {\n    let n;\n    \"@id\" in t ? n = t[\"@id\"] : n = t.id, r = n;\n  }\n  return r;\n}, ri = (e) => {\n  var n, i, a, s, l, u, d, c, m, p, f, g, h, w, v;\n  let t, r = {};\n  switch (e == null ? void 0 : e.type) {\n    case \"SpecificResource\":\n      t = (a = (i = (n = e == null ? void 0 : e.target) == null ? void 0 : n.partOf) == null ? void 0 : i[0]) == null ? void 0 : a.id, r = {\n        manifest: t,\n        canvas: (s = e == null ? void 0 : e.target) == null ? void 0 : s.id\n      }, e != null && e.selector && (r.selector = e.selector);\n      break;\n    case \"Range\":\n    case \"Annotation\":\n      const b = ((l = e == null ? void 0 : e.target) == null ? void 0 : l.source) || (e == null ? void 0 : e.target), E = (u = e == null ? void 0 : e.target) == null ? void 0 : u.selector;\n      r = {\n        manifest: (c = (d = b == null ? void 0 : b.partOf) == null ? void 0 : d[0]) == null ? void 0 : c.id,\n        canvas: b == null ? void 0 : b.id\n      }, (((m = e == null ? void 0 : e.target) == null ? void 0 : m.type) === \"SpecificResource\" || (p = e == null ? void 0 : e.target) != null && p.selector) && (r.selector = E);\n      break;\n    case \"Canvas\":\n      if (t = (g = (f = e == null ? void 0 : e.partOf) == null ? void 0 : f[0]) == null ? void 0 : g.id, r = {\n        manifest: t,\n        canvas: e == null ? void 0 : e.id\n      }, (h = e == null ? void 0 : e.id) != null && h.includes(\"#xywh=\")) {\n        const [y, A] = e.id.split(\"#xywh=\");\n        r.canvas = y, r.selector = {\n          type: \"FragmentSelector\",\n          value: `xywh=${A}`\n        };\n      }\n      break;\n    case \"Manifest\":\n      t = e == null ? void 0 : e.id, r = {\n        collection: (v = (w = e == null ? void 0 : e.partOf) == null ? void 0 : w[0]) == null ? void 0 : v.id,\n        manifest: e == null ? void 0 : e.id\n      };\n      break;\n    case \"Collection\":\n      t = e == null ? void 0 : e.id, r = {\n        collection: t\n      };\n      break;\n  }\n  return { resourceId: t, active: r };\n}, Iu = (e) => {\n  const t = [\n    \"https://iiif.io/api/presentation/2/context.json\",\n    \"https://iiif.io/api/presentation/3/context.json\"\n  ], r = new TypeError(\n    `The IIIF content may not be a valid IIIF resource: ${t.join(\", \")}`\n  );\n  e[\"@context\"] || console.warn(r);\n  const n = Su(e);\n  try {\n    if (n.includes(t[0])) {\n      const i = Eu(e);\n      if (!i || !i.id || !i.type)\n        throw r;\n      return i;\n    } else {\n      if (n.includes(t[1]))\n        return e;\n      throw r;\n    }\n  } catch (i) {\n    console.warn(i);\n  }\n}, Tu = (e) => {\n  if (typeof e == \"string\" && Mu(e))\n    return { resourceId: e };\n  if (typeof e == \"object\") {\n    const t = Iu(e);\n    return {\n      resourceId: t == null ? void 0 : t.id,\n      resourceObject: t\n    };\n  } else {\n    const t = JSON.parse(yi(e)), { active: r } = ri(t);\n    return { active: r, resourceId: t == null ? void 0 : t.resourceId, resourceObject: t };\n  }\n}, Ru = (e) => {\n  const { resourceId: t, resourceObject: r } = Tu(e);\n  return r || t;\n}, ku = (e) => e.items.map((r) => r.id)[0], $u = (e) => {\n  const t = e.items.filter((r) => r.type === \"Manifest\").map((r) => r.id);\n  return t.length == 0 ? null : t[0];\n}, Mu = (e) => {\n  try {\n    new URL(e);\n  } catch {\n    return !1;\n  }\n  return !0;\n};\nvar te = /* @__PURE__ */ ((e) => (e.TiledImage = \"tiledImage\", e.SimpleImage = \"simpleImage\", e))(te || {});\nconst Ou = (e) => {\n  const t = Array.isArray(e == null ? void 0 : e.service) && (e == null ? void 0 : e.service.length) > 0, r = t ? Au(e == null ? void 0 : e.service) : e == null ? void 0 : e.id, n = t ? te.TiledImage : te.SimpleImage;\n  return {\n    uri: r,\n    imageType: n\n  };\n}, Lu = (e, t) => {\n  const r = t ? te.TiledImage : te.SimpleImage;\n  return {\n    uri: e,\n    imageType: r\n  };\n}, xt = x(\"div\", {\n  position: \"absolute !important\",\n  zIndex: \"1\",\n  top: \"1rem\",\n  left: \"1rem\",\n  width: \"161.8px\",\n  height: \"100px\",\n  backgroundColor: \"#000D\",\n  boxShadow: \"5px 5px 5px #0002\",\n  borderRadius: \"3px\",\n  \".displayregion\": {\n    border: \" 3px solid $accent !important\",\n    boxShadow: \"0 0 3px #0006\"\n  },\n  \"@sm\": {\n    width: \"123px\",\n    height: \"76px\"\n  },\n  \"@xs\": {\n    width: \"100px\",\n    height: \"61.8px\"\n  }\n}), Pu = x(\"div\", {\n  position: \"relative\",\n  width: \"100%\",\n  height: \"100%\",\n  zIndex: \"0\",\n  \".clover-iiif-image-openseadragon-annotation\": {\n    position: \"relative\",\n    backgroundColor: \"transparent\",\n    border: \"2px solid #0003\",\n    boxSizing: \"content-box\",\n    borderRadius: \"3px\",\n    boxShadow: \"0 0 38vw 38vw transparent\",\n    transition: \"box-shadow 100ms ease-in-out\",\n    zIndex: \"0\",\n    label: {\n      opacity: 0,\n      position: \"absolute\",\n      lineHeight: \"1.47rem\",\n      pointerEvents: \"none\",\n      textAlign: \"center\",\n      minWidth: \"300px\",\n      maxWidth: \"20vw\",\n      padding: \"0.5rem\",\n      borderRadius: \"3px\",\n      top: \"calc(100% + 0.5rem)\",\n      left: \"50%\",\n      transform: \"translate(-50%, 0)\",\n      backgroundColor: \"$primary\",\n      color: \"$secondary\",\n      transition: \"opacity 100ms ease-in-out\"\n    },\n    \"&[data-active=true]\": {\n      border: \"2px solid $accent !important\",\n      boxShadow: \"0 0 38vw 38vw #0003\",\n      zIndex: \"99999999\",\n      label: {\n        opacity: 1\n      }\n    }\n  }\n}), Fu = x(\"div\", {\n  width: \"100%\",\n  height: \"100%\",\n  maxHeight: \"100vh\",\n  background: \"transparent\",\n  backgroundSize: \"contain\",\n  color: \"white\",\n  position: \"relative\",\n  zIndex: \"0\",\n  overflow: \"hidden\",\n  variants: {\n    hasNavigator: {\n      true: {\n        [`${xt}`]: {\n          display: \"block\"\n        }\n      },\n      false: {\n        [`${xt}`]: {\n          display: \"none\"\n        }\n      }\n    }\n  }\n}), Te = ({ className: e, id: t, label: r, children: n }) => {\n  const i = r.toLowerCase().replace(/\\s/g, \"-\");\n  return /* @__PURE__ */ o.createElement(\n    _n,\n    {\n      id: t,\n      className: e,\n      \"data-testid\": \"openseadragon-button\",\n      \"data-button\": i\n    },\n    /* @__PURE__ */ o.createElement(\n      \"svg\",\n      {\n        xmlns: \"http://www.w3.org/2000/svg\",\n        \"aria-labelledby\": `${t}-svg-title`,\n        \"data-testid\": \"openseadragon-button-svg\",\n        focusable: \"false\",\n        viewBox: \"0 0 512 512\",\n        role: \"img\"\n      },\n      /* @__PURE__ */ o.createElement(\"title\", { id: `${t}-svg-title` }, r),\n      n\n    )\n  );\n}, _u = x(\"div\", {\n  position: \"absolute\",\n  zIndex: \"1\",\n  top: \"1rem\",\n  right: \"1rem\",\n  display: \"flex\",\n  \"@xs\": {\n    flexDirection: \"column\",\n    zIndex: \"2\"\n  },\n  variants: {\n    hasPlaceholder: {\n      true: {\n        right: \"3.618rem\",\n        \"@xs\": {\n          top: \"3.618rem\",\n          right: \"1rem\"\n        }\n      },\n      false: {\n        right: \"1rem\",\n        \"@xs\": {\n          top: \"1rem\",\n          right: \"1rem\"\n        }\n      }\n    }\n  }\n}), zu = () => /* @__PURE__ */ o.createElement(\n  \"path\",\n  {\n    strokeLinecap: \"round\",\n    strokeMiterlimit: \"10\",\n    strokeWidth: \"45\",\n    d: \"M256 112v288M400 256H112\"\n  }\n), Du = () => /* @__PURE__ */ o.createElement(\n  \"path\",\n  {\n    strokeLinecap: \"round\",\n    strokeMiterlimit: \"10\",\n    strokeWidth: \"45\",\n    d: \"M400 256H112\"\n  }\n), Bu = () => /* @__PURE__ */ o.createElement(\n  \"path\",\n  {\n    fill: \"none\",\n    stroke: \"currentColor\",\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    strokeWidth: \"32\",\n    d: \"M432 320v112H320M421.8 421.77L304 304M80 192V80h112M90.2 90.23L208 208M320 80h112v112M421.77 90.2L304 208M192 432H80V320M90.23 421.8L208 304\"\n  }\n), Hu = () => /* @__PURE__ */ o.createElement(\"path\", { d: \"M448 440a16 16 0 01-12.61-6.15c-22.86-29.27-44.07-51.86-73.32-67C335 352.88 301 345.59 256 344.23V424a16 16 0 01-27 11.57l-176-168a16 16 0 010-23.14l176-168A16 16 0 01256 88v80.36c74.14 3.41 129.38 30.91 164.35 81.87C449.32 292.44 464 350.9 464 424a16 16 0 01-16 16z\" }), er = () => /* @__PURE__ */ o.createElement(o.Fragment, null, /* @__PURE__ */ o.createElement(\n  \"path\",\n  {\n    fill: \"none\",\n    strokeLinecap: \"round\",\n    strokeMiterlimit: \"10\",\n    strokeWidth: \"45\",\n    d: \"M400 148l-21.12-24.57A191.43 191.43 0 00240 64C134 64 48 150 48 256s86 192 192 192a192.09 192.09 0 00181.07-128\"\n  }\n), /* @__PURE__ */ o.createElement(\"path\", { d: \"M464 97.42V208a16 16 0 01-16 16H337.42c-14.26 0-21.4-17.23-11.32-27.31L436.69 86.1C446.77 76 464 83.16 464 97.42z\" })), Nu = ({\n  _cloverViewerHasPlaceholder: e,\n  config: t\n}) => {\n  const r = z(), { activeCanvas: n, plugins: i, vault: a, openSeadragonViewer: s } = r, l = a.get({\n    id: n,\n    type: \"Canvas\"\n  });\n  function u() {\n    return i.filter((d) => {\n      var c;\n      return (c = d.imageViewer) == null ? void 0 : c.controls;\n    }).map((d, c) => {\n      var p, f, g, h;\n      const m = (f = (p = d.imageViewer) == null ? void 0 : p.controls) == null ? void 0 : f.component;\n      return /* @__PURE__ */ o.createElement(\n        m,\n        {\n          key: c,\n          ...(h = (g = d == null ? void 0 : d.imageViewer) == null ? void 0 : g.controls) == null ? void 0 : h.componentProps,\n          canvas: l,\n          useViewerDispatch: X,\n          useViewerState: z\n        }\n      );\n    });\n  }\n  return k(() => {\n    if (!s) return;\n    const d = s.viewport.getRotation();\n    s.addHandler(\"home\", () => {\n      s.viewport.setRotation(d);\n    });\n  }, [s]), /* @__PURE__ */ o.createElement(\n    _u,\n    {\n      \"data-testid\": \"clover-iiif-image-openseadragon-controls\",\n      hasPlaceholder: e\n    },\n    t.showZoomControl && /* @__PURE__ */ o.createElement(o.Fragment, null, /* @__PURE__ */ o.createElement(Te, { id: t.zoomInButton, label: \"zoom in\" }, /* @__PURE__ */ o.createElement(zu, null)), /* @__PURE__ */ o.createElement(Te, { id: t.zoomOutButton, label: \"zoom out\" }, /* @__PURE__ */ o.createElement(Du, null))),\n    t.showFullPageControl && /* @__PURE__ */ o.createElement(Te, { id: t.fullPageButton, label: \"full page\" }, /* @__PURE__ */ o.createElement(Bu, null)),\n    t.showRotationControl && /* @__PURE__ */ o.createElement(o.Fragment, null, /* @__PURE__ */ o.createElement(Te, { id: t.rotateRightButton, label: \"rotate right\" }, /* @__PURE__ */ o.createElement(er, null)), /* @__PURE__ */ o.createElement(Te, { id: t.rotateLeftButton, label: \"rotate left\" }, /* @__PURE__ */ o.createElement(er, null))),\n    t.showHomeControl && /* @__PURE__ */ o.createElement(Te, { id: t.homeButton, label: \"reset\" }, /* @__PURE__ */ o.createElement(Hu, null)),\n    u()\n  );\n};\nasync function ni(e, t = 3, r = 500) {\n  try {\n    return await e();\n  } catch (n) {\n    if (t <= 0) throw n;\n    return await new Promise((i) => setTimeout(i, r)), ni(e, t - 1, r);\n  }\n}\nconst Wu = (e) => new Promise((t) => setTimeout(t, e)), tr = async (e, t, r = 3, n = 300) => {\n  for (let i = 0; i < r; i++) {\n    const a = t ? t - 1 : 0, s = e.getItemAt(a);\n    if (s) return s;\n    await Wu(n);\n  }\n  throw new Error(\"No base item found at index 0 after retries\");\n}, Vu = ({\n  annotations: e,\n  ariaLabel: t,\n  config: r,\n  uri: n,\n  _cloverViewerHasPlaceholder: i,\n  imageType: a,\n  openSeadragonCallback: s\n}) => {\n  const [l, u] = L([]), [d, c] = L([]), [m, p] = L(), [f, g] = L([]), h = X(), w = Ue(!1), v = \"clover-iiif-image-openseadragon-annotation\", b = r.gestureSettingsMouse.scrollToZoom === !1;\n  k(() => (w.current || (w.current = !0, m || p($e(r))), () => m == null ? void 0 : m.destroy()), []), k(() => {\n    E();\n  }, [m, s]), k(() => {\n    m && JSON.stringify(n) !== JSON.stringify(d) && (m.forceRedraw(), b && m.addHandler(\"canvas-scroll\", function(y) {\n      y.preventDefault = !1;\n    }), c(n));\n  }, [b, m, d, n]), k(() => {\n    if (!d.length || !m) return;\n    m.close(), (async () => {\n      switch (a) {\n        case \"simpleImage\":\n          let A = 1, S = 0;\n          for (let C = 0; C < d.length; C++) {\n            const M = d[C];\n            if (e) {\n              const R = new Image();\n              R.src = M, await R.decode(), g((I) => [\n                ...I,\n                { width: R == null ? void 0 : R.width, height: R == null ? void 0 : R.height }\n              ]);\n            }\n            try {\n              if (C !== 0) {\n                const I = (await tr(\n                  m.world,\n                  C\n                )).getBounds();\n                S = I.x + I.width, A = I.height;\n              }\n              m.addSimpleImage({\n                url: M,\n                x: S,\n                y: 0,\n                height: A,\n                success: () => {\n                  u((R) => [...R, M]), typeof h == \"function\" && h({\n                    type: \"updateOSDImageLoaded\",\n                    OSDImageLoaded: !0\n                  });\n                }\n              });\n            } catch (R) {\n              console.error(`Failed to load image at ${M}:`, R);\n            }\n          }\n          break;\n        case \"tiledImage\": {\n          let C = 1, M = 0;\n          for (let R = 0; R < d.length; R++) {\n            const I = d[R];\n            try {\n              const O = await ni(\n                () => Cu(I),\n                3,\n                1e3\n              );\n              if (!O) throw new Error(`No tile source for ${I}`);\n              if (R !== 0) {\n                const J = (await tr(\n                  m.world,\n                  R\n                )).getBounds();\n                M = J.x + J.width, C = J.height;\n              }\n              m.addTiledImage({\n                tileSource: O,\n                x: M,\n                y: 0,\n                height: C,\n                success: () => {\n                  u((W) => [...W, I]), typeof h == \"function\" && h({\n                    type: \"updateOSDImageLoaded\",\n                    OSDImageLoaded: !0\n                  });\n                }\n              });\n            } catch (O) {\n              console.error(`Failed to load tile at ${I}:`, O);\n            }\n          }\n          break;\n        }\n        default:\n          console.warn(`Unsupported imageType: \"${a}\"`);\n          break;\n      }\n    })().catch((A) => console.error(\"Error drawing tiles\", A));\n  }, [d, a, m]), k(() => {\n    if (l) {\n      let A = 0;\n      const S = () => {\n        if (A < 3) {\n          const C = m == null ? void 0 : m.world.getHomeBounds();\n          C && (m == null || m.viewport.fitBounds(C, !0)), A++, setTimeout(S, 50);\n        }\n      };\n      S(), m == null || m.addHandler(\"canvas-click\", (C) => {\n        const M = m == null ? void 0 : m.getOverlayById(\n          C.originalTarget.id\n        );\n        if (M) {\n          const R = M == null ? void 0 : M.getBounds(m.viewport);\n          return R.x -= 0.1, R.y -= 0.1, R.width += 0.2, R.height += 0.2, m == null || m.viewport.fitBounds(R, !1), C.preventDefaultAction = !0;\n        }\n      });\n    }\n  }, [l]), k(() => {\n    function y(A, S, C) {\n      let M = A * C;\n      if (S === 0) return M;\n      for (; S > 0; ) {\n        const R = m == null ? void 0 : m.world.getItemAt(S - 1);\n        if (R) {\n          const I = R.getBounds().width;\n          M += I, S--;\n        } else\n          break;\n      }\n      return M;\n    }\n    e && (m == null || m.clearOverlays(), e.forEach((A) => {\n      var J, F, Y, K;\n      const { annotation: S, targetIndex: C } = A, M = ((F = (J = m == null ? void 0 : m.viewport) == null ? void 0 : J.getBounds()) == null ? void 0 : F.width) || 1, R = m == null ? void 0 : m.world.getItemAt(C), I = R ? (R == null ? void 0 : R.getBounds().width) / (R == null ? void 0 : R.getContentSize().x) : ((Y = f[C]) == null ? void 0 : Y.width) / M, O = Po(\n        S == null ? void 0 : S.target\n      ), W = S != null && S.body ? (K = S == null ? void 0 : S.body[0]) == null ? void 0 : K.value : void 0;\n      if (O != null && O.rect) {\n        const { x: G, y: se, w: ve, h: _ } = O == null ? void 0 : O.rect, U = y(G, C, I), B = new $e.Rect(\n          U,\n          se * I,\n          ve * I,\n          _ * I\n        ), P = document.createElement(\"button\");\n        if (P.classList.add(v), P.id = S.id, P.setAttribute(\"tabindex\", \"0\"), P.setAttribute(\"role\", \"button\"), P.setAttribute(\"data-active\", \"true\"), P.setAttribute(\"tabindex\", \"0\"), P.setAttribute(\"role\", \"button\"), P.setAttribute(\"data-active\", \"false\"), W) {\n          P.setAttribute(\"aria-label\", W);\n          const $ = document.createElement(\"label\");\n          $.innerHTML = W, P.appendChild($);\n        }\n        P.addEventListener(\"mousedown\", ($) => {\n          $.stopPropagation(), $.preventDefault();\n        }), P.addEventListener(\"touchstart\", ($) => {\n          $.stopPropagation(), $.preventDefault();\n        }), P.addEventListener(\"click\", ($) => {\n          $.stopPropagation(), $.preventDefault();\n        }), P.addEventListener(\"keydown\", ($) => {\n          if ($.key === \"Enter\") {\n            $.stopPropagation(), $.preventDefault();\n            const V = new $e.Rect(\n              B.x - 0.1,\n              B.y - 0.1,\n              B.width + 0.2,\n              B.height + 0.2\n            );\n            m == null || m.viewport.fitBounds(V, !1);\n          }\n        }), P.addEventListener(\"focus\", () => {\n          P.setAttribute(\"data-active\", \"true\");\n        }), P.addEventListener(\"mouseover\", () => {\n          P.setAttribute(\"data-active\", \"true\");\n        }), P.addEventListener(\"mouseout\", () => {\n          P.removeAttribute(\"data-active\");\n        }), P.addEventListener(\"blur\", () => {\n          P.removeAttribute(\"data-active\");\n        }), m == null || m.addOverlay(P, B, $e.Placement.CENTER);\n      }\n    }), E());\n  }, [l, e]);\n  function E() {\n    m && (s == null || s(m));\n  }\n  return /* @__PURE__ */ o.createElement(\n    Fu,\n    {\n      className: \"clover-iiif-image-openseadragon\",\n      \"data-testid\": \"clover-iiif-image-openseadragon\",\n      \"data-openseadragon-instance\": r.id,\n      hasNavigator: r.showNavigator\n    },\n    /* @__PURE__ */ o.createElement(\n      Nu,\n      {\n        _cloverViewerHasPlaceholder: i,\n        config: r\n      }\n    ),\n    r.showNavigator && /* @__PURE__ */ o.createElement(\n      xt,\n      {\n        id: r.navigatorId,\n        \"data-testid\": \"clover-iiif-image-openseadragon-navigator\"\n      }\n    ),\n    /* @__PURE__ */ o.createElement(\n      Pu,\n      {\n        id: r.id,\n        \"data-testid\": \"clover-iiif-image-openseadragon-viewport\",\n        role: \"img\",\n        ...t && { \"aria-label\": t }\n      }\n    )\n  );\n};\nfunction Uu(e) {\n  return {\n    id: `openseadragon-${e}`,\n    navigatorId: `openseadragon-navigator-${e}`,\n    loadTilesWithAjax: !0,\n    fullPageButton: `fullPage-${e}`,\n    homeButton: `reset-${e}`,\n    rotateLeftButton: `rotateLeft-${e}`,\n    rotateRightButton: `rotateRight-${e}`,\n    zoomInButton: `zoomIn-${e}`,\n    zoomOutButton: `zoomOut-${e}`,\n    showNavigator: !0,\n    showFullPageControl: !0,\n    showHomeControl: !0,\n    showRotationControl: !0,\n    showZoomControl: !0,\n    navigatorBorderColor: \"transparent\",\n    gestureSettingsMouse: {\n      clickToZoom: !0,\n      dblClickToZoom: !0,\n      pinchToZoom: !0,\n      scrollToZoom: !1\n    }\n  };\n}\nconst qu = ({\n  _cloverViewerHasPlaceholder: e = !1,\n  annotations: t,\n  body: r,\n  instanceId: n,\n  isTiledImage: i = !1,\n  label: a,\n  src: s = \"\",\n  openSeadragonCallback: l,\n  openSeadragonConfig: u = {}\n}) => {\n  const d = n ?? Me(), c = typeof a == \"string\" ? a : ee(a), m = {\n    ...Uu(d),\n    ...u\n  }, p = Array.isArray(r) ? r : r ? [r] : [], f = Array.isArray(s) ? s : s ? [s] : [];\n  let g = [], h = te.SimpleImage;\n  if (p.length) {\n    const v = p.map(Ou);\n    g = v.map((b) => b.uri).filter(Boolean), h = v.some(\n      (b) => b.imageType === te.TiledImage\n    ) ? te.TiledImage : te.SimpleImage;\n  } else if (f.length) {\n    const v = f.map((b) => Lu(b, i));\n    g = v.map((b) => b.uri).filter(Boolean), h = v.some(\n      (b) => b.imageType === te.TiledImage\n    ) ? te.TiledImage : te.SimpleImage;\n  }\n  if (!g.length) return null;\n  const w = (v) => {\n    l == null || l(v);\n  };\n  return /* @__PURE__ */ o.createElement(Et, { FallbackComponent: At }, /* @__PURE__ */ o.createElement(\n    Vu,\n    {\n      _cloverViewerHasPlaceholder: e,\n      annotations: t,\n      ariaLabel: c,\n      config: m,\n      imageType: h,\n      key: d,\n      uri: g,\n      openSeadragonCallback: w\n    }\n  ));\n}, ju = ({\n  isActive: e,\n  isMedia: t,\n  items: r,\n  setIsInteractive: n\n}) => {\n  const { vault: i } = z(), [a, s] = L([]), l = a.length > 1;\n  if (k(() => {\n    s([]);\n    const c = r.map((m) => {\n      const p = he(i, m.id);\n      if (!p) return null;\n      const { id: f, width: g, height: h } = p[0];\n      return f ? {\n        src: f,\n        width: g || 640,\n        height: h || 640,\n        alt: m.label ? Ct(m.label) : \"placeholder image\"\n      } : null;\n    }).filter((m) => m !== null);\n    c.length && s(c);\n  }, [r, l]), !e || !a.length) return null;\n  const u = a.map((c) => c.width / c.height * 1), d = u.reduce((c, m) => c + m, 0);\n  return /* @__PURE__ */ o.createElement(\n    Fn,\n    {\n      onClick: () => n(!0),\n      isMedia: t,\n      className: \"clover-viewer-placeholder\",\n      \"data-active\": e,\n      \"data-paged\": l\n    },\n    a.map((c, m) => {\n      const p = u[m] / d * 100;\n      return /* @__PURE__ */ o.createElement(\n        \"img\",\n        {\n          ...c,\n          key: m,\n          alt: c.alt,\n          style: {\n            width: `${p}%`\n          }\n        }\n      );\n    })\n  );\n}, Gu = x(\"canvas\", {\n  position: \"absolute\",\n  width: \"100%\",\n  height: \"100%\",\n  zIndex: \"0\"\n}), Qu = o.forwardRef(\n  (e, t) => {\n    const r = o.useRef(null), n = qe(() => {\n      var f, g;\n      if ((f = t.current) != null && f.currentTime && ((g = t.current) == null ? void 0 : g.currentTime) > 0) return;\n      const a = t.current;\n      if (!a) return;\n      const s = new AudioContext(), l = s.createMediaElementSource(a), u = s.createAnalyser(), d = r.current;\n      if (!d) return;\n      d.width = a.offsetWidth, d.height = a.offsetHeight;\n      const c = d.getContext(\"2d\");\n      l.connect(u), u.connect(s.destination), u.fftSize = 256;\n      const m = u.frequencyBinCount, p = new Uint8Array(m);\n      setInterval(function() {\n        i(\n          u,\n          c,\n          m,\n          p,\n          d.width,\n          d.height\n        );\n      }, 20);\n    }, [t]);\n    o.useEffect(() => {\n      !t || !t.current || (t.current.onplay = n);\n    }, [n, t]);\n    function i(a, s, l, u, d, c) {\n      const m = d / l * 2.6;\n      let p, f = 0;\n      a.getByteFrequencyData(u), s.fillStyle = \"#000000\", s.fillRect(0, 0, d, c);\n      for (let g = 0; g < l; g++)\n        p = u[g] * 2, s.fillStyle = \"rgba(78, 42, 132, 1)\", s.fillRect(f, c - p, m, p), f += m + 6;\n    }\n    return /* @__PURE__ */ o.createElement(Gu, { ref: r, role: \"presentation\" });\n  }\n), Ju = x(\"div\", {\n  position: \"relative\",\n  backgroundColor: \"$primaryAlt\",\n  display: \"flex\",\n  flexGrow: \"0\",\n  flexShrink: \"1\",\n  height: \"100%\",\n  zIndex: \"1\",\n  video: {\n    backgroundColor: \"transparent\",\n    objectFit: \"contain\",\n    width: \"100%\",\n    height: \"100%\",\n    position: \"relative\",\n    zIndex: \"1\"\n  }\n}), Yu = ({ resource: e, ignoreCaptionLabels: t }) => {\n  const r = Ct(e.label, \"en\");\n  return Array.isArray(r) && r.some((i) => t.includes(i)) ? null : /* @__PURE__ */ o.createElement(\n    \"track\",\n    {\n      key: e.id,\n      src: e.id,\n      label: Array.isArray(r) ? r[0] : r,\n      srcLang: \"en\",\n      \"data-testid\": \"player-track\"\n    }\n  );\n}, Zu = [\n  // Apple santioned\n  \"application/vnd.apple.mpegurl\",\n  \"vnd.apple.mpegurl\",\n  // Apple sanctioned for backwards compatibility\n  \"audio/mpegurl\",\n  // Very common\n  \"audio/x-mpegurl\",\n  // Very common\n  \"application/x-mpegurl\",\n  // Included for completeness\n  \"video/x-mpegurl\",\n  \"video/mpegurl\",\n  \"application/mpegurl\"\n], Xu = ({\n  allSources: e,\n  annotationResources: t,\n  painting: r\n}) => {\n  const [n, i] = o.useState(0), [a, s] = o.useState(), l = o.useRef(null), u = (r == null ? void 0 : r.type) === \"Sound\", d = X(), c = z(), { activeCanvas: m, configOptions: p, contentStateAnnotation: f, vault: g } = c;\n  return k(() => {\n    if (!r.id || !l.current) return;\n    if (l != null && l.current) {\n      const v = l.current;\n      d({\n        type: \"updateActivePlayer\",\n        player: v\n      }), v.src = r.id, v.load();\n    }\n    if (r.id.split(\".\").pop() !== \"m3u8\" && r.format && !Zu.includes(r.format))\n      return;\n    const h = {\n      // eslint-disable-next-line @typescript-eslint/no-unused-vars\n      xhrSetup: function(v, b) {\n        v.withCredentials = !!p.withCredentials;\n      }\n    }, w = new ne(h);\n    return w.attachMedia(l.current), w.on(ne.Events.MEDIA_ATTACHED, function() {\n      w.loadSource(r.id);\n    }), w.on(ne.Events.ERROR, function(v, b) {\n      if (b.fatal)\n        switch (b.type) {\n          case ne.ErrorTypes.NETWORK_ERROR:\n            console.error(\n              `fatal ${v} network error encountered, try to recover`\n            ), w.startLoad();\n            break;\n          case ne.ErrorTypes.MEDIA_ERROR:\n            console.error(\n              `fatal ${v} media error encountered, try to recover`\n            ), w.recoverMediaError();\n            break;\n          default:\n            w.destroy();\n            break;\n        }\n    }), () => {\n      if (w && l.current) {\n        const v = l.current;\n        w.detachMedia(), w.destroy(), v.currentTime = 0;\n      }\n    };\n  }, [\n    p.withCredentials,\n    r.id,\n    r.format,\n    d\n  ]), k(() => {\n    var E, y, A, S;\n    const h = g.get(m), w = (E = h.accompanyingCanvas) != null && E.id ? he(g, (y = h.accompanyingCanvas) == null ? void 0 : y.id) : null, v = (A = h.placeholderCanvas) != null && A.id ? he(g, (S = h.placeholderCanvas) == null ? void 0 : S.id) : null;\n    !!(w && v) ? s(n === 0 ? v[0].id : w[0].id) : (w && s(w[0].id), v && s(v[0].id));\n  }, [m, n, g]), k(() => {\n    const h = l == null ? void 0 : l.current;\n    if (!h) return;\n    let w = null, v = !1;\n    const b = () => {\n      v || (v = !0, w = setInterval(() => {\n        h && !h.paused && !h.ended && (i(h.currentTime), d({\n          type: \"updateActiveSelector\",\n          selector: {\n            type: \"PointSelector\",\n            t: Math.round(h.currentTime)\n          }\n        }));\n      }, 500)), h && h.paused && (i(h.currentTime), d({\n        type: \"updateActiveSelector\",\n        selector: {\n          type: \"PointSelector\",\n          t: Math.round(h.currentTime)\n        }\n      }));\n    };\n    return h.addEventListener(\"timeupdate\", b), () => {\n      h == null || h.removeEventListener(\"timeupdate\", b), w && clearInterval(w);\n    };\n  }, [r.id, m]), k(() => {\n    var h, w;\n    if (f) {\n      const v = l == null ? void 0 : l.current;\n      if (!v) return;\n      const b = (h = f == null ? void 0 : f.target) == null ? void 0 : h.selector, { type: E, t: y, value: A } = b || {};\n      if (// @ts-ignore\n      (((w = f == null ? void 0 : f.target) == null ? void 0 : w.source) || (f == null ? void 0 : f.target)).id !== m) return;\n      if (y && E === \"PointSelector\" && (i(y), v.currentTime = y), E === \"FragmentSelector\" && A) {\n        const C = A.split(\"=\")[1];\n        if (!C) return;\n        const M = C.split(\",\")[0];\n        i(M), v.currentTime = M;\n      }\n    }\n  }, [l, f]), /* @__PURE__ */ o.createElement(\n    Ju,\n    {\n      css: {\n        backgroundColor: p.canvasBackgroundColor,\n        maxHeight: p.canvasHeight,\n        position: \"relative\"\n      },\n      \"data-testid\": \"player-wrapper\",\n      className: \"clover-viewer-player-wrapper\"\n    },\n    /* @__PURE__ */ o.createElement(\n      \"video\",\n      {\n        id: \"clover-iiif-video\",\n        key: r.id,\n        ref: l,\n        \"data-src\": r.id,\n        controls: !0,\n        height: r.height,\n        width: r.width,\n        crossOrigin: p.crossOrigin,\n        poster: a,\n        style: {\n          maxHeight: p.canvasHeight,\n          position: \"relative\",\n          zIndex: \"1\"\n        }\n      },\n      e.map((h) => /* @__PURE__ */ o.createElement(\"source\", { src: h.id, type: h.format, key: h.id })),\n      (t == null ? void 0 : t.length) > 0 && t.map((h) => {\n        const w = [];\n        return h.items.forEach((v) => {\n          g.get(\n            v.id\n          ).body.forEach((E) => {\n            const y = g.get(\n              E.id\n            );\n            w.push(y);\n          });\n        }), w.map((v) => /* @__PURE__ */ o.createElement(\n          Yu,\n          {\n            resource: v,\n            ignoreCaptionLabels: p.ignoreCaptionLabels || [],\n            key: v.id\n          }\n        ));\n      }),\n      \"Sorry, your browser doesn't support embedded videos.\"\n    ),\n    u && /* @__PURE__ */ o.createElement(Qu, { ref: l })\n  );\n}, Ku = () => /* @__PURE__ */ o.createElement(\n  \"svg\",\n  {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"aria-labelledby\": \"close-svg-title\",\n    focusable: \"false\",\n    viewBox: \"0 0 512 512\",\n    role: \"img\"\n  },\n  /* @__PURE__ */ o.createElement(\"title\", { id: \"close-svg-title\" }, \"close\"),\n  /* @__PURE__ */ o.createElement(\"path\", { d: \"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z\" })\n), ed = ({ isMedia: e }) => /* @__PURE__ */ o.createElement(\n  \"svg\",\n  {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"aria-labelledby\": \"open-svg-title\",\n    focusable: \"false\",\n    viewBox: \"0 0 512 512\",\n    role: \"img\"\n  },\n  /* @__PURE__ */ o.createElement(\"title\", { id: \"open-svg-title\" }, \"open\"),\n  e ? /* @__PURE__ */ o.createElement(\"path\", { d: \"M133 440a35.37 35.37 0 01-17.5-4.67c-12-6.8-19.46-20-19.46-34.33V111c0-14.37 7.46-27.53 19.46-34.33a35.13 35.13 0 0135.77.45l247.85 148.36a36 36 0 010 61l-247.89 148.4A35.5 35.5 0 01133 440z\" }) : /* @__PURE__ */ o.createElement(o.Fragment, null, /* @__PURE__ */ o.createElement(\"path\", { d: \"m456.69,421.39l-94.09-94.09c22.65-30.16,34.88-66.86,34.84-104.58,0-96.34-78.38-174.72-174.72-174.72S48,126.38,48,222.72s78.38,174.72,174.72,174.72c37.72.04,74.42-12.19,104.58-34.84l94.09,94.09c10.29,9.2,26.1,8.32,35.3-1.98,8.48-9.49,8.48-23.83,0-33.32Zm-233.97-73.87c-68.89-.08-124.72-55.91-124.8-124.8h0c0-68.93,55.87-124.8,124.8-124.8s124.8,55.87,124.8,124.8-55.87,124.8-124.8,124.8Z\" }), /* @__PURE__ */ o.createElement(\"path\", { d: \"m279.5,197.76h-3.35s-28.47,0-28.47,0v-31.82c-.77-13.79-12.57-24.33-26.36-23.56-12.71.71-22.85,10.86-23.56,23.56v3.35h0v28.47h-31.82c-13.79.77-24.33,12.57-23.56,26.36.71,12.71,10.86,22.85,23.56,23.56h3.35s28.47,0,28.47,0v31.82c.77,13.79,12.57,24.33,26.36,23.56,12.71-.71,22.85-10.86,23.56-23.56v-3.35h0v-28.47h31.82c13.79-.77,24.33-12.57,23.56-26.36-.71-12.71-10.86-22.85-23.56-23.56Z\" }))\n), td = ({\n  handleToggle: e,\n  isInteractive: t,\n  isMedia: r\n}) => /* @__PURE__ */ o.createElement(\n  zn,\n  {\n    onClick: e,\n    isInteractive: t,\n    isMedia: r,\n    \"data-testid\": \"placeholder-toggle\"\n  },\n  t ? /* @__PURE__ */ o.createElement(Ku, null) : /* @__PURE__ */ o.createElement(ed, { isMedia: r })\n), rd = ({\n  activeCanvas: e,\n  annotationResources: t,\n  contentSearchResource: r,\n  isMedia: n,\n  painting: i\n}) => {\n  var _, U, B, P;\n  const [a, s] = o.useState(0), [l, u] = o.useState(!1), [d, c] = o.useState([]), [m, p] = o.useState([]), [f, g] = o.useState(0), {\n    configOptions: h,\n    customDisplays: w,\n    contentStateAnnotation: v,\n    informationPanelResource: b,\n    openSeadragonViewer: E,\n    vault: y,\n    viewerId: A,\n    visibleCanvases: S\n  } = z(), [C, M] = o.useState([]), R = !!v && e === ((U = (_ = v == null ? void 0 : v.target) == null ? void 0 : _.source) == null ? void 0 : U.id), I = X(), O = y.get(e), W = m.length && !l && !n, J = (i == null ? void 0 : i.length) > 1, F = `${A}-${Dr(e + a + JSON.stringify(S) + f)}`, Y = () => {\n    u(!l), g(($) => $ + 1);\n  }, K = ($) => {\n    const V = i.findIndex((Z) => Z.id === $);\n    s(V);\n  }, G = w.find(($) => {\n    var H;\n    let V = !1;\n    const { canvasId: Z, paintingFormat: re } = $.target;\n    if (Array.isArray(Z) && Z.length > 0 && (V = Z.includes(e)), Array.isArray(re) && re.length > 0) {\n      const q = ((H = i[a]) == null ? void 0 : H.format) || \"\";\n      V = !!(q && re.includes(q));\n    }\n    return V;\n  });\n  k(() => {\n    R && W && f === 0 && Y();\n  }, [R, W]), k(() => {\n    W && (I({\n      type: \"updateOpenSeadragonViewer\",\n      openSeadragonViewer: void 0\n    }), I({\n      type: \"updateActiveSelector\",\n      selector: void 0\n    }));\n  }, [W]), k(() => {\n    var V, Z, re;\n    const $ = [];\n    if (b === \"manifest-annotations\" && (t == null || t.forEach((H, q) => {\n      var le;\n      (le = H == null ? void 0 : H.items) == null || le.forEach((ce) => {\n        const Ae = y.get(ce.id);\n        Ae && $.push({\n          annotation: {\n            ...Ae,\n            body: Ae.body.map((Ot) => {\n              const Lt = y.get(Ot.id);\n              return Lt || Ot;\n            })\n          },\n          targetIndex: q\n        });\n      });\n    }), v)) {\n      const H = (\n        // @ts-ignore\n        ((V = v == null ? void 0 : v.target) == null ? void 0 : V.source) || (v == null ? void 0 : v.target)\n      );\n      $.push({\n        // @ts-ignore\n        annotation: {\n          ...v,\n          body: (Z = v == null ? void 0 : v.body) == null ? void 0 : Z.map((q) => {\n            const le = y.get(q.id);\n            return le || q;\n          })\n        },\n        targetIndex: S.findIndex(\n          (q) => q.id === H.id\n        )\n      });\n    }\n    b === \"manifest-content-search\" && ((re = r == null ? void 0 : r.items) == null || re.forEach((H) => {\n      const q = y.get(H.id);\n      if (q) {\n        const le = S.findIndex(\n          (ce) => ce.id === q.target.source.id\n        );\n        typeof le == \"number\" && $.push({\n          annotation: {\n            ...q,\n            body: q.body.map((ce) => {\n              const Ae = y.get(ce.id);\n              return Ae || ce;\n            })\n          },\n          targetIndex: le\n        });\n      }\n    })), M($);\n  }, [\n    t,\n    r,\n    v,\n    b,\n    S\n  ]), k(() => {\n    if (!n) {\n      const $ = S.map((Z) => {\n        const re = Z.id, H = he(y, re);\n        return H ? H[a] : void 0;\n      }).filter(Boolean), V = S.map((Z) => {\n        var ce;\n        const re = Z.id, H = y.get(re), q = (ce = H == null ? void 0 : H.placeholderCanvas) == null ? void 0 : ce.id;\n        return !!!q || !q ? null : {\n          id: q,\n          label: H == null ? void 0 : H.label\n        };\n      }).filter((Z) => Z !== null);\n      c($), p(V);\n    }\n  }, [\n    a,\n    e,\n    S,\n    n,\n    O\n  ]), k(() => {\n    s(0);\n  }, [S]);\n  const se = ($) => {\n    $ && !W && // @ts-ignore\n    (E == null ? void 0 : E.id) !== `openseadragon-${F}` && I({\n      type: \"updateOpenSeadragonViewer\",\n      openSeadragonViewer: $\n    });\n  }, ve = (B = G == null ? void 0 : G.display) == null ? void 0 : B.component;\n  return /* @__PURE__ */ o.createElement(Jl, { className: \"clover-viewer-painting\" }, /* @__PURE__ */ o.createElement(\n    Yl,\n    {\n      style: {\n        backgroundColor: h.canvasBackgroundColor,\n        height: h.canvasHeight === \"auto\" ? \"100%\" : h.canvasHeight\n      }\n    },\n    !!m.length && !n && /* @__PURE__ */ o.createElement(\n      td,\n      {\n        handleToggle: Y,\n        isInteractive: l,\n        isMedia: n\n      }\n    ),\n    !!(m != null && m.length) && !n && /* @__PURE__ */ o.createElement(\n      ju,\n      {\n        isActive: !!W,\n        isMedia: n,\n        items: m,\n        setIsInteractive: u\n      }\n    ),\n    !W && !G && (n ? /* @__PURE__ */ o.createElement(\n      Xu,\n      {\n        allSources: i,\n        painting: i[a],\n        annotationResources: t\n      }\n    ) : i && /* @__PURE__ */ o.createElement(\n      qu,\n      {\n        _cloverViewerHasPlaceholder: !!(m != null && m.length),\n        annotations: C,\n        body: d,\n        instanceId: F,\n        key: F,\n        openSeadragonCallback: se,\n        openSeadragonConfig: h.openSeadragon\n      }\n    )),\n    !W && ve && /* @__PURE__ */ o.createElement(\n      ve,\n      {\n        id: e,\n        annotationBody: i[a],\n        hooks: { useViewerDispatch: X, useViewerState: z },\n        ...G == null ? void 0 : G.display.componentProps\n      }\n    )\n  ), J && /* @__PURE__ */ o.createElement(\n    Bn,\n    {\n      value: (P = i[a]) == null ? void 0 : P.id,\n      onValueChange: K,\n      maxHeight: \"200px\"\n    },\n    i == null ? void 0 : i.map(($) => /* @__PURE__ */ o.createElement(\n      Hn,\n      {\n        value: $ == null ? void 0 : $.id,\n        key: $ == null ? void 0 : $.id,\n        label: $ == null ? void 0 : $.label\n      }\n    ))\n  ));\n}, nd = ({\n  activeCanvas: e,\n  annotationResources: t,\n  searchServiceUrl: r,\n  setContentSearchResource: n,\n  contentSearchResource: i,\n  isAudioVideo: a,\n  items: s,\n  painting: l\n}) => {\n  var E, y;\n  const {\n    contentStateAnnotation: u,\n    isInformationOpen: d,\n    configOptions: c,\n    sequence: m,\n    visibleCanvases: p\n  } = z(), { informationPanel: f } = c, g = p.map((A) => A.id), w = (t.length > 0 || // @ts-ignore\n  g.includes((y = (E = u == null ? void 0 : u.target) == null ? void 0 : E.source) == null ? void 0 : y.id)) && (f == null ? void 0 : f.renderAnnotation), v = (f == null ? void 0 : f.renderAbout) && d || w, b = f == null ? void 0 : f.renderToggle;\n  return /* @__PURE__ */ o.createElement(\n    Gr,\n    {\n      className: \"clover-viewer-content\",\n      \"data-testid\": \"clover-viewer-content\"\n    },\n    /* @__PURE__ */ o.createElement(Qr, { \"data-aside-active\": v, \"data-aside-toggle\": b }, /* @__PURE__ */ o.createElement(\n      rd,\n      {\n        activeCanvas: e,\n        annotationResources: t,\n        contentSearchResource: i,\n        isMedia: a,\n        painting: l\n      }\n    ), m[1].length > 1 && /* @__PURE__ */ o.createElement(po, { className: \"clover-viewer-media-wrapper\" }, /* @__PURE__ */ o.createElement(Ql, { items: s, activeItem: 0 }))),\n    v && /* @__PURE__ */ o.createElement(go, { \"data-aside-active\": v, \"data-aside-toggle\": b }, /* @__PURE__ */ o.createElement(\n      Is,\n      {\n        activeCanvas: e,\n        annotationResources: t,\n        searchServiceUrl: r,\n        setContentSearchResource: n,\n        contentSearchResource: i\n      }\n    ))\n  );\n}, id = x(Ce.Trigger, {\n  width: \"30px\",\n  padding: \"5px\"\n}), ii = x(Ce.Content, {\n  display: \"flex\",\n  flexDirection: \"column\",\n  fontSize: \"0.8333rem\",\n  border: \"none\",\n  boxShadow: \"2px 2px 5px #0003\",\n  zIndex: \"2\",\n  button: {\n    display: \"flex\",\n    textDecoration: \"none\",\n    marginBottom: \"0.5em\",\n    color: \"$accentAlt\",\n    cursor: \"pointer\",\n    background: \"$secondary\",\n    border: \"none\",\n    \"&:last-child\": {\n      marginBottom: \"0\"\n    }\n  }\n}), ad = x(\"span\", {\n  fontSize: \"1.33rem\",\n  alignSelf: \"flex-start\",\n  flexGrow: \"0\",\n  flexShrink: \"1\",\n  padding: \"1rem\",\n  \"@sm\": {\n    fontSize: \"1rem\"\n  },\n  \"&.visually-hidden\": {\n    position: \"absolute\",\n    width: \"1px\",\n    height: \"1px\",\n    padding: \"0\",\n    margin: \"-1px\",\n    overflow: \"hidden\",\n    clip: \"rect(0, 0, 0, 0)\",\n    whiteSpace: \"nowrap\",\n    border: \"0\"\n  }\n}), od = x(\"header\", {\n  display: \"flex\",\n  backgroundColor: \"transparent !important\",\n  justifyContent: \"space-between\",\n  alignItems: \"flex-start\",\n  width: \"100%\",\n  [`> ${Dn}`]: {\n    flexGrow: \"1\",\n    flexShrink: \"0\"\n  },\n  form: {\n    flexGrow: \"0\",\n    flexShrink: \"1\"\n  }\n}), sd = x(\"div\", {\n  display: \"flex\",\n  alignItems: \"flex-end\",\n  justifyContent: \"flex-end\",\n  padding: \"1rem\",\n  flexShrink: \"0\",\n  flexGrow: \"1\"\n}), ld = () => {\n  var u;\n  const e = X(), t = z(), { activeManifest: r, collection: n, configOptions: i, vault: a } = t, s = i == null ? void 0 : i.canvasHeight, l = (d) => {\n    e({\n      type: \"updateActiveCanvas\",\n      canvasId: void 0\n    }), e({\n      type: \"updateActiveManifest\",\n      manifestId: d\n    }), e({\n      type: \"updateViewerId\",\n      viewerId: Me()\n    });\n  };\n  return /* @__PURE__ */ o.createElement(\"div\", { style: { margin: \"0.75rem\" } }, /* @__PURE__ */ o.createElement(\n    Bn,\n    {\n      label: n.label,\n      maxHeight: s,\n      value: r,\n      onValueChange: l\n    },\n    (u = n == null ? void 0 : n.items) == null ? void 0 : u.map((d) => /* @__PURE__ */ o.createElement(\n      Hn,\n      {\n        value: d.id,\n        key: d.id,\n        thumbnail: d != null && d.thumbnail ? a.get(d == null ? void 0 : d.thumbnail) : void 0,\n        label: d.label\n      }\n    ))\n  ));\n}, cd = (e, t = 2500) => {\n  const { t: r } = pe(), [n, i] = L(\"\"), a = qe(() => {\n    navigator.clipboard.writeText(e).then(\n      () => i(r(\"copySuccess\")),\n      () => i(r(\"copyFailure\"))\n    );\n  }, [e]);\n  return k(() => {\n    if (!n) return;\n    const s = setTimeout(() => i(\"\"), t);\n    return () => clearTimeout(s);\n  }, [n]), [n, a];\n}, ud = x(\"span\", {\n  display: \"flex\",\n  alignContent: \"center\",\n  alignItems: \"center\",\n  padding: \"0.125rem 0.25rem 0\",\n  marginTop: \"-0.125rem\",\n  marginLeft: \"0.5rem\",\n  backgroundColor: \"$accent\",\n  color: \"$secondary\",\n  borderRadius: \"3px\",\n  lineHeight: \"1em\"\n}), dd = ({ status: e }) => e ? /* @__PURE__ */ o.createElement(ud, { \"data-copy-status\": e }, e) : null, rr = ({\n  textPrompt: e,\n  textToCopy: t\n}) => {\n  const [r, n] = cd(t);\n  return /* @__PURE__ */ o.createElement(\"button\", { onClick: n }, e, \" \", /* @__PURE__ */ o.createElement(dd, { status: r }));\n}, md = ({ title: e }) => {\n  const t = \"#ed1d33\", r = \"#2873ab\";\n  return /* @__PURE__ */ o.createElement(\"svg\", { viewBox: \"0 0 493.35999 441.33334\", id: \"iiif-logo\", version: \"1.1\" }, /* @__PURE__ */ o.createElement(\"title\", null, e), /* @__PURE__ */ o.createElement(\"g\", { transform: \"matrix(1.3333333,0,0,-1.3333333,0,441.33333)\" }, /* @__PURE__ */ o.createElement(\"g\", { transform: \"scale(0.1)\" }, /* @__PURE__ */ o.createElement(\n    \"path\",\n    {\n      style: { fill: r },\n      d: \"M 65.2422,2178.75 775.242,1915 773.992,15 65.2422,276.25 v 1902.5\"\n    }\n  ), /* @__PURE__ */ o.createElement(\n    \"path\",\n    {\n      style: { fill: r },\n      d: \"m 804.145,2640.09 c 81.441,-240.91 -26.473,-436.2 -241.04,-436.2 -214.558,0 -454.511,195.29 -535.9527,436.2 -81.4335,240.89 26.4805,436.18 241.0387,436.18 214.567,0 454.512,-195.29 535.954,-436.18\"\n    }\n  ), /* @__PURE__ */ o.createElement(\n    \"path\",\n    {\n      style: { fill: t },\n      d: \"M 1678.58,2178.75 968.578,1915 969.828,15 1678.58,276.25 v 1902.5\"\n    }\n  ), /* @__PURE__ */ o.createElement(\n    \"path\",\n    {\n      style: { fill: t },\n      d: \"m 935.082,2640.09 c -81.437,-240.91 26.477,-436.2 241.038,-436.2 214.56,0 454.51,195.29 535.96,436.2 81.43,240.89 -26.48,436.18 -241.04,436.18 -214.57,0 -454.52,-195.29 -535.958,-436.18\"\n    }\n  ), /* @__PURE__ */ o.createElement(\n    \"path\",\n    {\n      style: { fill: r },\n      d: \"m 1860.24,2178.75 710,-263.75 -1.25,-1900 -708.75,261.25 v 1902.5\"\n    }\n  ), /* @__PURE__ */ o.createElement(\n    \"path\",\n    {\n      style: { fill: r },\n      d: \"m 2603.74,2640.09 c 81.45,-240.91 -26.47,-436.2 -241.03,-436.2 -214.58,0 -454.52,195.29 -535.96,436.2 -81.44,240.89 26.48,436.18 241.03,436.18 214.57,0 454.51,-195.29 535.96,-436.18\"\n    }\n  ), /* @__PURE__ */ o.createElement(\n    \"path\",\n    {\n      style: { fill: t },\n      d: \"m 3700.24,3310 v -652.5 c 0,0 -230,90 -257.5,-142.5 -2.5,-247.5 0,-336.25 0,-336.25 l 257.5,83.75 V 1690 l -258.61,-92.5 V 262.5 L 2735.24,0 v 2360 c 0,0 -15,850 965,950\"\n    }\n  ))));\n}, fd = x(mr.Root, {\n  all: \"unset\",\n  height: \"2rem\",\n  width: \"3.236rem\",\n  backgroundColor: \"#6663\",\n  borderRadius: \"9999px\",\n  position: \"relative\",\n  WebkitTapHighlightColor: \"transparent\",\n  cursor: \"pointer\",\n  \"&:focus\": {\n    boxShadow: \"0 0 0 2px $secondaryAlt\"\n  },\n  '&[data-state=\"checked\"]': {\n    backgroundColor: \"$accent\",\n    boxShadow: \"inset 2px 2px 5px #0003\"\n  }\n}), hd = x(mr.Thumb, {\n  display: \"block\",\n  height: \"calc(2rem - 12px)\",\n  width: \"calc(2rem - 12px)\",\n  backgroundColor: \"$secondary\",\n  borderRadius: \"100%\",\n  boxShadow: \"2px 2px 5px #0001\",\n  transition: \"$all\",\n  transform: \"translateX(6px)\",\n  willChange: \"transform\",\n  span: {\n    fontFamily: \"monospace\",\n    fontSize: \"0.8333rem\",\n    fontWeight: \"700\",\n    display: \"flex\",\n    height: \"100%\",\n    width: \"100%\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    color: \"$primary\",\n    opacity: \"0.382\",\n    userSelect: \"none\",\n    pointerEvents: \"none\"\n  },\n  '&[data-state=\"checked\"]': {\n    transform: \"translateX(calc(1.236rem + 6px))\",\n    span: {\n      opacity: \"1\",\n      color: \"$accent\"\n    }\n  }\n});\nx(\"label\", {\n  fontSize: \"0.8333rem\",\n  fontWeight: \"400\",\n  lineHeight: \"1em\",\n  userSelect: \"none\",\n  cursor: \"pointer\",\n  paddingRight: \"0.618rem\"\n});\nconst pd = x(\"form\", {\n  display: \"flex\",\n  flexShrink: \"0\",\n  flexGrow: \"1\",\n  alignItems: \"center\",\n  marginLeft: \"1.618rem\"\n}), gd = () => {\n  const { isInformationOpen: e } = z(), t = X(), { t: r } = pe(), n = (i) => {\n    t({\n      type: \"updateInformationOpen\",\n      isInformationOpen: i\n    });\n  };\n  return /* @__PURE__ */ o.createElement(pd, null, /* @__PURE__ */ o.createElement(\n    fd,\n    {\n      checked: e,\n      onCheckedChange: n,\n      id: \"information-toggle\",\n      \"aria-label\": r(\"informationPanelToggle\"),\n      name: \"toggled?\"\n    },\n    /* @__PURE__ */ o.createElement(hd, null, /* @__PURE__ */ o.createElement(\"span\", null, \"i\"))\n  ));\n}, vd = o.memo(gd), yd = x(Ce.Trigger, {\n  width: \"30px\",\n  padding: \"5px\",\n  marginBottom: \"auto\"\n}), bd = x(ii, {\n  h3: {\n    color: \"$primaryAlt\",\n    fontSize: \"$2\",\n    fontWeight: \"700\",\n    margin: \"$2 0\"\n  },\n  button: {},\n  \"& ul li\": {\n    marginBottom: \"$1\"\n  }\n});\nfunction wd(e) {\n  const { vault: t } = z();\n  try {\n    const r = e && t.get(e);\n    if (!r) throw new Error(`Vault entity ${e} not found.`);\n    return (r == null ? void 0 : r[\"@id\"]) || (r == null ? void 0 : r.id);\n  } catch (r) {\n    return console.error(r), e;\n  }\n}\nfunction nr(e, t) {\n  const r = [];\n  if (!e) return r;\n  for (const n of e)\n    if (n.id) {\n      const i = t.get(n.id);\n      i && r.push(i);\n    }\n  return r;\n}\nfunction xd() {\n  const { activeCanvas: e, activeManifest: t, vault: r } = z(), [n, i] = L({\n    root: [],\n    canvas: []\n  });\n  return k(() => {\n    const a = r.get(t), s = r.get(e), l = a == null ? void 0 : a.rendering, u = s == null ? void 0 : s.rendering, d = nr(l, r), c = nr(u, r);\n    i({\n      root: d,\n      canvas: c\n    });\n  }, [e, t, r]), { ...n };\n}\nfunction ir(e, t) {\n  return e.map(({ format: r, id: n, label: i }) => {\n    const a = wd(n);\n    return {\n      format: r,\n      id: a,\n      label: ee(i) || t\n    };\n  });\n}\nfunction Ed() {\n  const e = xd(), t = ir(\n    (e == null ? void 0 : e.root) || [],\n    \"Root Rendering Label\"\n  ), r = ir(\n    (e == null ? void 0 : e.canvas) || [],\n    \"Canvas Rendering Label\"\n  );\n  return {\n    allPages: t,\n    individualPages: r\n  };\n}\nconst Sd = () => {\n  const { allPages: e, individualPages: t } = Ed(), r = e.length > 0 || t.length > 0, n = (i) => {\n    window.open(i, \"_blank\");\n  };\n  return r ? /* @__PURE__ */ o.createElement(Ce, null, /* @__PURE__ */ o.createElement(yd, { \"data-testid\": \"download-button\" }, /* @__PURE__ */ o.createElement(j, null, /* @__PURE__ */ o.createElement(j.Download, null))), /* @__PURE__ */ o.createElement(bd, { \"data-testid\": \"download-content\" }, t.length > 0 && /* @__PURE__ */ o.createElement(o.Fragment, null, /* @__PURE__ */ o.createElement(\"h3\", null, \"Individual Pages\"), /* @__PURE__ */ o.createElement(\"ul\", null, t.map(({ format: i, id: a, label: s }) => /* @__PURE__ */ o.createElement(\"li\", { key: s }, /* @__PURE__ */ o.createElement(\"button\", { onClick: () => n(a) }, s, \" (\", i, \")\"))))), e.length > 0 && /* @__PURE__ */ o.createElement(o.Fragment, null, /* @__PURE__ */ o.createElement(\"h3\", null, \"All Pages\"), /* @__PURE__ */ o.createElement(\"ul\", null, e.map(({ format: i, id: a, label: s }) => /* @__PURE__ */ o.createElement(\"li\", { key: s }, /* @__PURE__ */ o.createElement(\"button\", { onClick: () => n(a) }, s, \" (\", i, \")\"))))))) : null;\n}, Cd = ({ manifestId: e, manifestLabel: t }) => {\n  const r = z(), { collection: n, configOptions: i } = r, { informationPanel: a, showDownload: s, showIIIFBadge: l, showTitle: u } = i, d = s || l || (a == null ? void 0 : a.renderToggle), { t: c } = pe();\n  return /* @__PURE__ */ o.createElement(od, { className: \"clover-viewer-header\" }, n != null && n.items ? /* @__PURE__ */ o.createElement(ld, null) : /* @__PURE__ */ o.createElement(ad, { className: u ? \"\" : \"visually-hidden\" }, u && /* @__PURE__ */ o.createElement(ue, { label: t, className: \"label\" })), d && /* @__PURE__ */ o.createElement(sd, null, s && /* @__PURE__ */ o.createElement(Sd, null), l && /* @__PURE__ */ o.createElement(Ce, null, /* @__PURE__ */ o.createElement(id, null, /* @__PURE__ */ o.createElement(md, { title: c(\"commonShare\") })), /* @__PURE__ */ o.createElement(ii, null, (n == null ? void 0 : n.items) && /* @__PURE__ */ o.createElement(\n    \"button\",\n    {\n      onClick: (m) => {\n        m.preventDefault(), window.open(n.id, \"_blank\");\n      }\n    },\n    c(\"shareCollectionJson\")\n  ), /* @__PURE__ */ o.createElement(\n    \"button\",\n    {\n      onClick: (m) => {\n        m.preventDefault(), window.open(e, \"_blank\");\n      }\n    },\n    c(\"shareManifestJson\")\n  ), \" \", (n == null ? void 0 : n.items) && /* @__PURE__ */ o.createElement(\n    rr,\n    {\n      textPrompt: c(\"shareCollectionCopy\"),\n      textToCopy: n.id\n    }\n  ), /* @__PURE__ */ o.createElement(\n    rr,\n    {\n      textPrompt: c(\"shareManifestCopy\"),\n      textToCopy: e\n    }\n  ))), (a == null ? void 0 : a.renderToggle) && /* @__PURE__ */ o.createElement(vd, null)));\n}, Ad = (e) => {\n  const t = () => window.matchMedia ? window.matchMedia(e).matches : !1, [r, n] = L(t);\n  return k(() => {\n    const i = () => n(t);\n    return window.addEventListener(\"resize\", i), () => window.removeEventListener(\"resize\", i);\n  }), r;\n}, Id = ({\n  manifest: e,\n  theme: t,\n  iiifContentSearchQuery: r\n}) => {\n  var R;\n  const n = z(), i = X(), {\n    activeCanvas: a,\n    isInformationOpen: s,\n    vault: l,\n    configOptions: u,\n    visibleCanvases: d\n  } = n, c = [\"100%\", \"auto\"], m = (u == null ? void 0 : u.canvasHeight) && c.includes(u == null ? void 0 : u.canvasHeight), [p, f] = L(!1), [g, h] = L([]), [w, v] = L([]), [b, E] = L(), y = Ad(qr.sm), [A, S] = L(), C = qe(\n    (I) => {\n      i({\n        type: \"updateInformationOpen\",\n        isInformationOpen: I\n      });\n    },\n    [i]\n  );\n  k(() => {\n    var I;\n    (I = u == null ? void 0 : u.informationPanel) != null && I.open && C(!y);\n  }, [y, (R = u == null ? void 0 : u.informationPanel) == null ? void 0 : R.open]), k(() => {\n  }, [y]), k(() => {\n    const I = he(l, a);\n    I && (f(\n      [\"Sound\", \"Video\"].indexOf(\n        I[0].type\n      ) > -1\n    ), h(I));\n    const O = bi(\n      l,\n      // @ts-ignore\n      e,\n      a\n    );\n    i({\n      type: \"updateVisibleCanvases\",\n      visibleCanvases: O\n    });\n  }, [a, y, e, l, i]), k(() => {\n    (async () => {\n      const I = await Promise.all(\n        d.map(\n          (O) => co(l, O.id)\n        )\n      );\n      v(I.flat());\n    })();\n  }, [d]);\n  const M = e.service.some(\n    (I) => [\"SearchService1\", \"SearchService2\"].includes(\n      I.type || I[\"@type\"]\n    )\n  );\n  return k(() => {\n    if (M) {\n      const I = e.service.find(\n        (O) => [\"SearchService1\", \"SearchService2\"].includes(\n          O.type || O[\"@type\"]\n        )\n      );\n      I && S(I.id || I[\"@id\"]);\n    }\n  }, [e, M]), k(() => {\n    var I;\n    A && ((I = u.informationPanel) == null ? void 0 : I.renderContentSearch) !== !1 && Vr(\n      l,\n      A,\n      r\n    ).then((O) => E(O));\n  }, [A]), /* @__PURE__ */ o.createElement(Et, { FallbackComponent: At }, /* @__PURE__ */ o.createElement(\n    vo,\n    {\n      className: `${t} clover-viewer`,\n      css: { background: u == null ? void 0 : u.background },\n      \"data-absolute-position\": m,\n      \"data-information-panel-open\": s\n    },\n    /* @__PURE__ */ o.createElement(\n      Ei.Root,\n      {\n        open: s,\n        onOpenChange: C\n      },\n      /* @__PURE__ */ o.createElement(\n        Cd,\n        {\n          manifestLabel: e.label,\n          manifestId: e.id\n        }\n      ),\n      /* @__PURE__ */ o.createElement(\n        nd,\n        {\n          activeCanvas: a,\n          painting: g,\n          annotationResources: w,\n          searchServiceUrl: A,\n          setContentSearchResource: E,\n          contentSearchResource: b,\n          items: e.items,\n          isAudioVideo: p\n        }\n      )\n    )\n  ));\n}, ar = {\n  ignoreCache: !1,\n  headers: {\n    Accept: \"application/json, text/javascript, text/plain\"\n  },\n  timeout: 5e3,\n  withCredentials: !1\n};\nfunction Td(e) {\n  return {\n    ok: e.status >= 200 && e.status < 300,\n    status: e.status,\n    statusText: e.statusText,\n    headers: e.getAllResponseHeaders(),\n    data: e.responseText,\n    json: () => JSON.parse(e.responseText)\n  };\n}\nfunction or(e, t = null) {\n  return {\n    ok: !1,\n    status: e.status,\n    statusText: e.statusText,\n    headers: e.getAllResponseHeaders(),\n    data: t || e.statusText,\n    json: () => JSON.parse(t || e.statusText)\n  };\n}\nfunction Rd(e, t = ar) {\n  const r = t.headers || ar.headers;\n  return new Promise((n, i) => {\n    const a = new XMLHttpRequest();\n    a.open(\"get\", e), a.withCredentials = t.withCredentials, r && Object.keys(r).forEach(\n      (s) => a.setRequestHeader(s, r[s])\n    ), a.onload = () => {\n      n(Td(a));\n    }, a.onerror = () => {\n      i(or(a, \"Failed to make request.\"));\n    }, a.ontimeout = () => {\n      i(or(a, \"Request took longer than expected.\"));\n    }, a.send();\n  });\n}\nconst sr = {\n  \"@context\": \"http://iiif.io/api/presentation/3/context.json\",\n  id: \"https://example.org/iiif/content-state/specific-resource\",\n  type: \"Annotation\",\n  motivation: [\"contentState\"],\n  target: {\n    type: \"SpecificResource\",\n    source: {\n      id: \"https://example.org/iiif/manifest/canvas/0\",\n      type: \"Canvas\",\n      partOf: [\n        {\n          id: \"https://example.org/iiif/manifest\",\n          type: \"Manifest\"\n        }\n      ]\n    }\n  },\n  body: []\n}, Gd = ({\n  canvasIdCallback: e,\n  contentStateCallback: t,\n  customDisplays: r = [],\n  plugins: n = [],\n  customTheme: i,\n  iiifContent: a,\n  id: s,\n  manifestId: l,\n  options: u,\n  iiifContentSearchQuery: d\n}) => {\n  var p, f, g;\n  let c = a;\n  s && (c = s), l && (c = l);\n  const m = Hr(\n    (f = (p = u == null ? void 0 : u.informationPanel) == null ? void 0 : p.vtt) == null ? void 0 : f.autoScroll\n  );\n  return /* @__PURE__ */ o.createElement(\n    lo,\n    {\n      initialState: {\n        ...Qe,\n        customDisplays: r,\n        plugins: n,\n        isAutoScrollEnabled: m.enabled,\n        isInformationOpen: !!((g = u == null ? void 0 : u.informationPanel) != null && g.open),\n        vault: new Fr({\n          customFetcher: (h) => Rd(h, {\n            withCredentials: u == null ? void 0 : u.withCredentials,\n            headers: u == null ? void 0 : u.requestHeaders\n          }).then((w) => JSON.parse(w.data))\n        })\n      }\n    },\n    /* @__PURE__ */ o.createElement(\n      kd,\n      {\n        iiifContent: c,\n        canvasIdCallback: e,\n        contentStateCallback: t,\n        customTheme: i,\n        options: u,\n        iiifContentSearchQuery: d\n      }\n    )\n  );\n}, kd = ({\n  canvasIdCallback: e,\n  contentStateCallback: t,\n  customTheme: r,\n  iiifContent: n,\n  options: i,\n  iiifContentSearchQuery: a\n}) => {\n  const s = X(), l = z(), {\n    activeCanvas: u,\n    activeManifest: d,\n    activeSelector: c,\n    isLoaded: m,\n    vault: p,\n    visibleCanvases: f\n  } = l, [g, h] = L(), [w, v] = L();\n  let b = {};\n  if (r && (b = Ci(\"custom\", r)), k(() => {\n    s({\n      type: \"updateActiveSelector\",\n      selector: void 0\n    });\n  }, [u, d]), k(() => {\n    var E;\n    if (e && e(u), t && d && u) {\n      const y = ((E = f[0]) == null ? void 0 : E.id) || u, A = `${d}/state/${Dr(y + JSON.stringify(c))}`, S = {\n        ...sr,\n        id: A,\n        target: {\n          type: \"SpecificResource\",\n          source: {\n            id: y,\n            type: \"Canvas\",\n            partOf: [\n              {\n                id: d,\n                type: \"Manifest\"\n              }\n            ]\n          },\n          selector: c\n        }\n      };\n      t({\n        json: S,\n        encoded: wi(JSON.stringify(S))\n      });\n    }\n  }, [\n    u,\n    d,\n    c,\n    e,\n    t,\n    f\n  ]), k(() => {\n    d && p.load(d).then((E) => {\n      if (!E) return;\n      v(E);\n      const y = xi(p, E), A = u || ku(E);\n      s({\n        type: \"updateActiveCanvas\",\n        canvasId: A\n      }), s({\n        type: \"updateManifestSequence\",\n        sequence: y\n      });\n    }).catch((E) => {\n      console.error(`Manifest failed to load: ${E}`);\n    }).finally(() => {\n      s({\n        type: \"updateIsLoaded\",\n        isLoaded: !0\n      });\n    });\n  }, [n, d, s, p]), k(() => {\n    s({\n      type: \"updateConfigOptions\",\n      configOptions: i\n    }), (async () => {\n      var A;\n      if (!n) return;\n      const y = Ru(n);\n      try {\n        const S = typeof y == \"object\" && (y != null && y.id) ? await p.loadSync(y == null ? void 0 : y.id, y) : await p.load(y);\n        h(S);\n      } catch (S) {\n        if ((!y || !y.id) && console.error(`Failed to load resource: ${S}`), y != null && y.id && (y == null ? void 0 : y.type) === \"Annotation\" && ((A = y == null ? void 0 : y.motivation) != null && A.includes(\"contentState\"))) {\n          const C = await p.loadSync(\n            y.id,\n            y\n          );\n          C && h(C);\n        } else y != null && y.id && [\"Canvas\", \"Manifest\"].includes(y == null ? void 0 : y.type) && await p.loadSync(y.id, y) && h({\n          ...sr,\n          target: y\n        });\n      }\n    })();\n  }, [s, n, i, p]), k(() => {\n    if (g)\n      switch (g.type) {\n        case \"Annotation\":\n          if (g != null && g.motivation && (Array.isArray(g == null ? void 0 : g.motivation) ? g != null && g.motivation.includes(\"contentState\") : (g == null ? void 0 : g.motivation) === \"content-state\")) {\n            const { active: y } = ri(g);\n            s({\n              type: \"updateActiveManifest\",\n              manifestId: y.manifest\n            }), s({\n              type: \"updateActiveCanvas\",\n              canvasId: y.canvas\n            }), s({\n              type: \"updateContentStateAnnotation\",\n              contentStateAnnotation: g\n            });\n          }\n          break;\n        case \"Collection\":\n          const E = $u(\n            g\n          );\n          s({\n            type: \"updateCollection\",\n            collection: g\n          }), E && s({\n            type: \"updateActiveManifest\",\n            manifestId: E\n          });\n          break;\n        case \"Manifest\":\n          s({\n            type: \"updateActiveManifest\",\n            manifestId: g.id\n          });\n          break;\n      }\n  }, [s, n, g]), !m)\n    if (i != null && i.customLoadingComponent) {\n      const E = i.customLoadingComponent;\n      return /* @__PURE__ */ o.createElement(E, null);\n    } else\n      return /* @__PURE__ */ o.createElement(o.Fragment, null, \"Loading\");\n  return !w || !w.items ? (console.log(`The IIIF manifest ${n} failed to load.`), /* @__PURE__ */ o.createElement(o.Fragment, null)) : w.items.length === 0 ? (console.log(`The IIIF manifest ${n} does not contain canvases.`), /* @__PURE__ */ o.createElement(o.Fragment, null)) : /* @__PURE__ */ o.createElement(\n    Id,\n    {\n      manifest: w,\n      theme: b,\n      key: w.id,\n      iiifContentSearchQuery: a\n    }\n  );\n};\nexport {\n  Gd as default\n};\n//# sourceMappingURL=index.mjs.map\n"],"names":["la","en","commonClose","commonNext","commonPrevious","commonSearch","commonSearchPlaceholder","commonShare","commonViewAll","copyFailure","copySuccess","contentSearchLoading","contentSearchPlaceholder","contentSearchResultsNone","contentSearchResultsMore","informationPanelTabs","informationPanelTabsClose","informationPanelTabsAbout","informationPanelTabsAnnotations","informationPanelTabsSearch","informationPanelToggle","shareCollectionJson","shareCollectionCopy","shareManifestJson","shareManifestCopy","pt","lt","ca","Object","fromEntries","entries","map","e","t","use","init","defaultNS","fallbackLng","ns","resources","N","r","type","getType","toString","n","i","payload","meta","fr","hr","pr","gr","ct","vr","yr","br","ut","wr","xr","ua","da","ma","fa","ha","pa","ga","va","ya","ba","importEntities","modifyEntityField","reorderEntityField","addReference","removeReference","updateReference","addMetadata","removeMetadata","updateMetadata","reorderMetadata","Er","Sr","wa","xa","dt","Cr","mt","Ar","Ir","Tr","Rr","Sa","ft","Ca","Aa","St","ht","Pt","Number","isNaN","Ra","Ft","Array","isArray","length","Xe","iiif","requests","mapping","entities","resourceUri","a","s","find","l","id","_t","waitTimeout","getStore","getState","loadingState","d","c","m","Promise","race","p","f","subscribe","g","h","setTimeout","dispatch","u","resource","message","push","requestId","actualId","Ta","actions","then","ka","$a","zt","Set","is","assign","forEach","setState","getInitialState","add","delete","destroy","console","warn","clear","$r","Mr","Or","Dt","setMetaValue","setMetaValueDynamic","unsetMetaValue","Ke","BASE_URL","DEV","MODE","PROD","SSR","_a","dispatchFromDevtools","Map","Fe","get","stores","Ba","enabled","anonymousActionType","store","window","__REDUX_DEVTOOLS_EXTENSION__","connection","connect","name","set","za","w","v","b","E","send","error","et","state","keys","JSON","stringify","nextLiftedState","computedStates","slice","parse","Na","equalityFn","fireImmediately","tt","Va","indexOf","T","rt","Lr","Qa","Collection","Manifest","Canvas","AnnotationPage","AnnotationCollection","Annotation","ContentResource","Range","Service","Selector","Agent","key","value","from","splice","startIndex","endIndex","index","reference","findIndex","metadata","beforeIndex","label","atIndex","requestUri","uriMismatch","updateValue","Ja","Ya","enableDevtools","iiifStoreName","defaultState","customReducers","reduce","Ga","Ma","Za","defineProperty","fe","enumerable","configurable","writable","Xa","Q","Re","be","parent","this","has","we","ye","Pr","Symbol","for","Bt","reactive","refresh","unreactive","unwrap","includes","Error","toPresentation3","toPresentation2","valueOf","toJSON","items","annotations","structures","seeAlso","service","services","rendering","partOf","start","supplementary","homepage","thumbnail","placeholderCanvas","accompanyingCanvas","provider","eo","create","Ht","Fr","constructor","fetch","json","options","reducers","customFetcher","defaultFetcher","emitter","all","on","off","emit","Ka","remoteFetcher","staticFetcher","batch","isBatching","batchQueue","asyncBatch","action","serialize","hydrate","skipSelfReturn","preserveSpecificResources","source","skipPartOfCheck","select","deep","size","loadManifest","load","loadCollection","resolve","loadSync","loadManifestSync","loadCollectionSync","areInputsEqual","ensureLoaded","requestStatus","getResourceMeta","getObject","loadObject","loadManifestObject","loadCollectionObject","wrapObject","isWrapped","to","_r","split","Math","ceil","parseInt","no","padStart","ro","Date","toISOString","substr","zr","Dr","charCodeAt","Br","hasOwn","String","ie","annotationOverlays","backgroundColor","borderColor","borderType","borderWidth","opacity","renderOverlays","zoomLevel","background","canvasBackgroundColor","canvasHeight","contentSearch","searchResultsLimit","overlays","crossOrigin","ignoreCaptionLabels","informationPanel","vtt","autoScroll","settings","behavior","block","open","renderAbout","renderSupplementing","renderToggle","renderAnnotation","renderContentSearch","openSeadragon","requestHeaders","showDownload","showIIIFBadge","showTitle","withCredentials","Hr","TypeError","join","ao","lr","cr","oo","ur","Qe","activeCanvas","activeManifest","activePlayer","activeSelector","OSDImageLoaded","collection","configOptions","customDisplays","plugins","isAutoScrollEnabled","isAutoScrolling","isInformationOpen","isLoaded","isUserScrolling","sequence","vault","openSeadragonViewer","viewerId","visibleCanvases","visibleAnnotations","Nr","Wr","so","canvasId","manifestId","player","contentStateAnnotation","informationPanelResource","selector","lo","initialState","children","addHandler","viewport","getBounds","viewportToImageRectangle","round","x","y","width","height","removeAllHandlers","Provider","z","X","Vr","async","q","trim","URL","searchParams","Ur","canvas","annotationPage","body","motivation","target","filter","Ct","getOwnPropertyNames","he","uo","colors","primary","primaryMuted","primaryAlt","accent","accentMuted","accentAlt","secondary","secondaryMuted","secondaryAlt","fontSizes","lineHeights","sizes","space","radii","pill","transitions","zIndices","max","qr","xxs","xs","sm","md","lg","xl","styled","css","Ud","keyframes","jr","createTheme","qd","theme","media","mo","display","flexDirection","alignItems","fo","fontWeight","fontSize","ho","At","role","po","position","zIndex","Gr","flexGrow","overflow","Qr","flexShrink","go","maxHeight","vo","fontSmooth","webkitFontSmoothing","justifyContent","padding","yo","maskImage","marginTop","boxShadow","bo","margin","borderBottom","ke","fontFamily","border","lineHeight","whiteSpace","cursor","transition","content","bottom","left","_e","top","xo","handleScroll","className","onScroll","overflowY","Jr","color","borderRadius","Je","textAlign","It","header","em","fontStyle","paddingBottom","marginBottom","Ye","gap","Eo","So","handleClick","onClick","dangerouslySetInnerHTML","__html","Co","caption","imageUri","src","alt","Ao","A","html","Nt","isContentSearch","Io","identifier","localName","document","createElement","attributes","setAttribute","innerHTML","parentNode","replaceChild","replace","title","outerHTML","RegExp","log","addIdentifiersToParsedCues","createNestedCues","end","pop","isChild","some","orderCuesByTime","sort","parseVttData","errors","cues","align","text","To","Yr","marginLeft","strong","$o","addEventListener","currentTime","removeEventListener","current","HTMLElement","getComputedStyle","scrollHeight","clientHeight","ko","S","getBoundingClientRect","offsetTop","offsetHeight","floor","scrollTo","ref","pause","play","Mo","listStyle","paddingLeft","Zr","Oo","inlineCues","vttUri","headers","Accept","catch","Tt","annotation","targetResource","isContentState","J","F","Y","K","G","se","ve","_","U","P","format","language","chars","none","C","M","Lo","toLocaleLowerCase","R","styles","I","getOverlayById","element","focus","B","fitBounds","O","$","preventDefault","stopPropagation","V","setInterval","container","clearInterval","dir","style","backgroundImage","backgroundSize","backgroundPosition","match","input","W","Xr","ee","ae","_o","allowedAttributes","img","allowedSchemes","allowedTags","zo","ue","as","lang","Wt","objectFit","Bo","contentResource","altAsLabel","region","duration","attachMedia","MEDIA_ATTACHED","loadSource","ERROR","fatal","NETWORK_ERROR","startLoad","MEDIA_ERROR","recoverMediaError","detachMedia","autoplay","Do","disablePictureInPicture","loop","muted","onPause","Ho","No","href","Wo","delimiter","Rt","Kr","kt","Vo","Uo","Vt","markup","Fo","qo","jo","Go","customValueContent","tn","item","toLowerCase","Jo","Yo","matchingLabel","Content","Qo","Zo","Xo","Ko","es","ts","requiredStatement","rs","summary","rn","os","ss","form","marginRight","ls","boxSizing","svg","fill","stroke","cs","searchServiceUrl","setContentSearchResource","setLoading","onSubmit","onChange","placeholder","asChild","xmlns","viewBox","us","ds","maxWidth","video","dl","dd","li","ms","fs","hs","htmlLabel","ps","gs","vs","ys","rights","bs","ws","Es","Cs","Is","annotationResources","contentSearchResource","pluginsWithInfoPanel","component","Ss","defaultTab","defaultValue","onValueChange","orientation","annotationTabLabel","clearTimeout","FallbackComponent","componentProps","useViewerDispatch","useViewerState","nn","variants","isLarge","true","isMedium","isSmall","j","Title","Add","strokeLinecap","strokeLinejoin","strokeWidth","Audio","Close","Download","Image","Video","Ps","transform","Fs","an","_s","right","zs","minWidth","animationDuration","animationTimingFunction","animationName","Ds","Bs","Ce","Trigger","sideOffset","collisionPadding","Ve","textTransform","isIcon","Be","Ws","Vs","He","objectPosition","borderBottomLeftRadius","borderTopRightRadius","gt","figure","figcaption","MozBoxOrient","WebkitBoxOrient","WebkitLineClamp","Us","overflowX","qs","borderRight","borderLeft","borderTopLeftRadius","borderBottomRightRadius","sn","js","it","Gs","Qs","isToggle","paddingTop","Ys","strokeMiterlimit","Zs","Xs","Ks","el","handleCanvasToggle","handleFilter","activeIndex","canvasLength","Js","autoFocus","disabled","tl","rootMargin","isVisibleCallback","IntersectionObserver","isIntersecting","disconnect","observe","ze","$t","rl","De","nl","xe","endsWith","ln","cn","un","dn","mn","fn","hn","pn","gn","vn","yn","bn","wn","xn","En","Sn","Cn","An","In","Tn","Rn","kn","$n","Mn","pl","gl","extraFormats","extraQualities","extraFeatures","vl","yl","bl","full","square","startsWith","parseFloat","percent","El","upscaled","confined","serialiseAsFull","percentScale","version","Sl","angle","mirror","Al","path","scheme","server","prefix","substring","Cl","reverse","Boolean","originalPath","rotation","quality","Il","profile","formats","qualities","supports","maxArea","wl","Tl","Rl","D","Ze","Ne","vt","On","$l","kl","minHeight","level","tiles","Ut","yt","Ml","unsafe","Ol","qt","Ln","Fl","_l","zl","at","Ie","Bl","unsafeImageService","atAnyCost","fallback","returnAllOptions","preferFixedSize","allowUnsafe","explain","abs","Dl","best","Hl","scaleFactors","jt","Pn","verificationsRequired","approximateServices","enableFetching","disableThrottling","config","setConfig","sample","knownImageServers","imageServices","real","verify","verifications","malformed","root","preLoaded","sampledId","verified","result","context","sampledProfile","resourceServiceRatio","sampledSizes","sizeRatios","sampledTiles","preLoad","predict","protocol","getThumbnailFromResource","getImageCandidates","loadService","canLoadSync","loadServiceSync","Ll","fetchService","Nl","markAsMalformed","fetchingCount","Wl","Gt","Vl","dereference","imageServiceLoader","getBestThumbnailAtSize","Ul","ql","jl","canvasIndex","isActive","handleChange","Gl","Ql","querySelector","offsetLeft","offsetWidth","Fn","aspectRatio","isMedia","_n","rotate","zn","isInteractive","false","compoundVariants","Jl","Yl","Zl","Xl","alignSelf","Kl","ec","textOverflow","tc","Dn","ot","direction","focusable","Bn","Hn","Se","OpenSeadragon","Qt","Viewer","prototype","svgOverlay","_svgOverlayInfo","Nn","_viewer","_containerWidth","_containerHeight","_svg","createElementNS","appendChild","_node","resize","node","clientWidth","pixelFromPoint","Point","getZoom","getRotation","getFlip","_containerInnerSize","MouseTracker","clickHandler","setTracking","Wn","Vn","Un","qn","jn","Gn","Qn","Jn","Yn","Zn","Ec","Cc","oe","Ac","Ic","Jt","Tc","Yt","Yc","bt","Ee","Zc","Kn","Zt","eu","Mt","Kc","Xc","tu","ru","iu","au","ou","Xt","ei","encodeURI","de","viewingHint","viewingDirection","timeMode","me","nu","license","attribution","navDate","description","su","lu","within","ge","related","contentLayer","logo","startCanvas","cu","mu","Kt","ti","xu","Xn","traversals","manifest","annotationList","choice","range","layer","convertPropsToArray","mergeMemberProperties","allowUndefinedReturn","traverseCollection","traverseType","traverseDescriptive","traverseLinking","traverseCollectionItems","manifests","collections","members","traverseManifest","traverseUnknown","traverseManifestItems","sequences","traverseSequence","traverseRange","traverseSequenceItems","canvases","traverseCanvas","traverseCanvasItems","images","traverseAnnotation","otherContent","traverseAnnotationList","traverseRangeItems","ranges","traverseAnnotationListItems","traverseAnnotationItems","traverseContentResource","traverseLayer","traverseLayerItems","traverseChoice","traverseChoiceItems","default","traverseService","Rc","traverseImageResource","traverseOneOrMoreServices","traverseOneOrManyType","wt","Cu","ri","resourceId","active","Iu","Su","Eu","Ru","resourceObject","Mu","Tu","te","TiledImage","SimpleImage","Ou","Au","uri","imageType","xt","Pu","pointerEvents","Fu","hasNavigator","Te","_u","hasPlaceholder","zu","Du","Bu","Hu","er","Nu","_cloverViewerHasPlaceholder","setRotation","showZoomControl","zoomInButton","zoomOutButton","showFullPageControl","fullPageButton","showRotationControl","rotateRightButton","rotateLeftButton","showHomeControl","homeButton","imageViewer","controls","ni","Wu","tr","getItemAt","Vu","ariaLabel","openSeadragonCallback","gestureSettingsMouse","scrollToZoom","forceRedraw","close","decode","world","addSimpleImage","url","success","addTiledImage","tileSource","getHomeBounds","originalTarget","preventDefaultAction","clearOverlays","targetIndex","getContentSize","rect","point","Po","classList","removeAttribute","addOverlay","CENTER","showNavigator","navigatorId","Uu","loadTilesWithAjax","navigatorBorderColor","clickToZoom","dblClickToZoom","pinchToZoom","qu","instanceId","isTiledImage","openSeadragonConfig","Lu","ju","setIsInteractive","Gu","Qu","AudioContext","createMediaElementSource","createAnalyser","getContext","destination","fftSize","frequencyBinCount","Uint8Array","getByteFrequencyData","fillStyle","fillRect","onplay","Ju","Yu","srcLang","Zu","Xu","allSources","painting","xhrSetup","paused","ended","poster","Ku","ed","td","handleToggle","rd","H","Z","paintingFormat","re","le","ce","Ae","Ot","annotationBody","hooks","nd","isAudioVideo","activeItem","ii","button","textDecoration","ad","clip","od","sd","ld","ud","alignContent","status","rr","textPrompt","textToCopy","navigator","clipboard","writeText","cd","fd","WebkitTapHighlightColor","hd","willChange","span","userSelect","paddingRight","pd","vd","checked","onCheckedChange","yd","bd","h3","nr","ir","wd","Ed","xd","allPages","individualPages","Sd","Cd","manifestLabel","Id","iiifContentSearchQuery","matchMedia","matches","Ad","co","flat","onOpenChange","ar","ignoreCache","timeout","or","ok","statusText","getAllResponseHeaders","data","Rd","XMLHttpRequest","setRequestHeader","onload","responseText","Td","onerror","ontimeout","sr","Gd","canvasIdCallback","contentStateCallback","customTheme","iiifContent","kd","encoded","ku","finally","$u","customLoadingComponent"],"sourceRoot":""}